import{r as x,u as ie,j as e,g as O,b as Z,S as ve,a as ye,J as ge}from"./app-BUVb_nAj.js";import{L as je}from"./Layout-DnkF-NCm.js";import{c as le,f as be,y as Ce,u as Re,e as Se,B as D,D as we}from"./Button-DzGhUBn7.js";import{I as N}from"./Input-CZ4N0rVB.js";import{T as K}from"./TextArea-CO0sOTJt.js";import{S as Fe}from"./Select-CwiaD0cR.js";import{F as Q}from"./FileUpload-CwAWv9wr.js";import{C as W}from"./Card-vSg9PuMO.js";import{g as V,f as J,s as T,b as H,d as X,c as ce,r as de,m as ue,i as ee,o as ke,h as Ae,u as Ie,B as f,P as re,T as d}from"./Button-DFxjcZ8p.js";import{C as Pe}from"./Container-DEvTfuj0.js";import{A as te}from"./ArrowBack-Cgi6G0-j.js";import{A as qe}from"./Slide-DYtCGdXj.js";import{B as Be}from"./BusinessCenter-CsY4Qukq.js";import{E as _e}from"./Event-DRCIx1GO.js";import{S as We,a as Ge,b as Te}from"./Stepper-DYYQ6KDz.js";import{A as M}from"./Alert-j9c9aQEr.js";import{A as ze}from"./AlertTitle-CPDkbCwY.js";import{C as Ee}from"./Check-4ptu1-hL.js";import{G}from"./Grid-CUDx21Kg.js";import{D as $e}from"./Description-bLLwqFxn.js";import{S as De}from"./Send-C49l985x.js";import{A as Ne}from"./ArrowForward-Tz2ikYxH.js";import{b as L,F as oe,a as se}from"./InputLabel-DpN5m5Yk.js";import{F as ae}from"./FormControlLabel-DTCfN-Gd.js";import{C as Oe}from"./Checkbox-DZaxlRGh.js";import{S as Ue}from"./SwitchBase-BRw57M3-.js";import"./Sidebar-DGzgELZX.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-Dtg-WGcE.js";import"./Work-CLEsMByH.js";import"./CheckCircle-Dd-oaFV0.js";import"./ChevronRight-FNylUib_.js";import"./Person-5k5xBlAT.js";import"./Info-CdM9Lqya.js";import"./People-6TwBzk5z.js";import"./Footer-DSErbOqA.js";import"./TextField-DdsD0Afg.js";import"./Select-Bh9V9k3o.js";import"./InputAdornment-CzgX0339.js";import"./VisibilityOff-BgFPuDcZ.js";import"./Visibility-clJeQAT9.js";import"./LinearProgress-3EBWbMR1.js";import"./CloudUpload-CD8KO2hp.js";import"./Upload-M5XxF891.js";import"./Error-CSPDIC8t.js";import"./Delete-DjrVMKuP.js";import"./PictureAsPdf-Yr8idwAW.js";import"./InsertDriveFile-BNg7U0hV.js";import"./Card-D_rkxkaC.js";import"./MoreVert-PY4ZbxeC.js";import"./CardHeader-D023TrKm.js";import"./CardContent-DTmJK9ga.js";import"./Close-CafbgWA1.js";function Me(t){return V("MuiFormGroup",t)}J("MuiFormGroup",["root","row","error"]);const Le=t=>{const{classes:o,row:a,error:l}=t;return X({root:["root",a&&"row",l&&"error"]},Me,o)},Ve=T("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.row&&o.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),pe=x.forwardRef(function(o,a){const l=ie({props:o,name:"MuiFormGroup"}),{className:u,row:y=!1,...g}=l,j=le(),i=be({props:l,muiFormControl:j,states:["error"]}),v={...l,row:y,error:i.error},m=Le(v);return e.jsx(Ve,{className:H(m.root,u),ownerState:v,ref:a,...g})}),Je=ce(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),He=ce(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Xe=T("span",{shouldForwardProp:de})({position:"relative",display:"flex"}),Ye=T(Je)({transform:"scale(1)"}),Ze=T(He)(ue(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function me(t){const{checked:o=!1,classes:a={},fontSize:l}=t,u={...t,checked:o};return e.jsxs(Xe,{className:a.root,ownerState:u,children:[e.jsx(Ye,{fontSize:l,className:a.background,ownerState:u}),e.jsx(Ze,{fontSize:l,className:a.dot,ownerState:u})]})}const xe=x.createContext(void 0);function Ke(){return x.useContext(xe)}function Qe(t){return V("MuiRadio",t)}const ne=J("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),er=t=>{const{classes:o,color:a,size:l}=t,u={root:["root",`color${O(a)}`,l!=="medium"&&`size${O(l)}`]};return{...o,...X(u,Qe,o)}},rr=T(Ue,{shouldForwardProp:t=>de(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.size!=="medium"&&o[`size${O(a.size)}`],o[`color${O(a.color)}`]]}})(ue(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${ne.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Z(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(ee()).map(([o])=>({props:{color:o,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[o].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Z(t.palette[o].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(ee()).map(([o])=>({props:{color:o,disabled:!1},style:{[`&.${ne.checked}`]:{color:(t.vars||t).palette[o].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function tr(t,o){return typeof o=="object"&&o!==null?t===o:String(t)===String(o)}const or=e.jsx(me,{checked:!0}),sr=e.jsx(me,{}),ar=x.forwardRef(function(o,a){const l=ie({props:o,name:"MuiRadio"}),{checked:u,checkedIcon:y=or,color:g="primary",icon:j=sr,name:i,onChange:v,size:m="medium",className:b,disabled:q,disableRipple:C=!1,slots:R={},slotProps:p={},inputProps:F,...B}=l,h=le();let S=q;h&&typeof S>"u"&&(S=h.disabled),S??(S=!1);const _={...l,disabled:S,disableRipple:C,color:g,size:m},z=er(_),w=Ke();let k=u;const E=Ce(v,w&&w.onChange);let A=i;w&&(typeof k>"u"&&(k=tr(w.value,l.value)),typeof A>"u"&&(A=w.name));const I=p.input??F,[$,r]=Re("root",{ref:a,elementType:rr,className:H(z.root,b),shouldForwardComponentProp:!0,externalForwardedProps:{slots:R,slotProps:p,...B},getSlotProps:s=>({...s,onChange:(c,...P)=>{var n;(n=s.onChange)==null||n.call(s,c,...P),E(c,...P)}}),ownerState:_,additionalProps:{type:"radio",icon:x.cloneElement(j,{fontSize:j.props.fontSize??m}),checkedIcon:x.cloneElement(y,{fontSize:y.props.fontSize??m}),disabled:S,name:A,checked:k,slots:R,slotProps:{input:typeof I=="function"?I(_):I}}});return e.jsx($,{...r,classes:z})});function nr(t){return V("MuiRadioGroup",t)}J("MuiRadioGroup",["root","row","error"]);const ir=t=>{const{classes:o,row:a,error:l}=t;return X({root:["root",a&&"row",l&&"error"]},nr,o)},lr=x.forwardRef(function(o,a){const{actions:l,children:u,className:y,defaultValue:g,name:j,onChange:i,value:v,...m}=o,b=x.useRef(null),q=ir(o),[C,R]=Se({controlled:v,default:g,name:"RadioGroup"});x.useImperativeHandle(l,()=>({focus:()=>{let h=b.current.querySelector("input:not(:disabled):checked");h||(h=b.current.querySelector("input:not(:disabled)")),h&&h.focus()}}),[]);const p=ke(a,b),F=Ae(j),B=x.useMemo(()=>({name:F,onChange(h){R(h.target.value),i&&i(h,h.target.value)},value:C}),[F,i,R,C]);return e.jsx(xe.Provider,{value:B,children:e.jsx(pe,{role:"radiogroup",ref:p,className:H(q.root,y),...m,children:u})})}),ct=({job:t={id:"",title:"",company:{name:"",logo:null},submission_deadline:""},formSections:o=[]})=>{var k,E,A,I,$;Ie();const[a,l]=x.useState(0),[u,y]=x.useState(null),[g,j]=x.useState(["Personal Information","Resume & Cover Letter","Review & Submit"]),{data:i,setData:v,errors:m,processing:b,post:q,setError:C,clearErrors:R}=ve({job_id:t.id,cover_letter:"",resume:null,responses:{}});x.useEffect(()=>{console.log("Form sections:",o),(!o||!Array.isArray(o))&&console.warn("formSections tidak valid:",o)},[o]);const p=(r,s)=>{v("responses",{...i.responses,[r]:s})},F=r=>{v("resume",r)},B=r=>{r.preventDefault(),q(route("candidate.jobs.submit-application",t.id),{forceFormData:!0,onSuccess:()=>{},onError:s=>{s.responses?y(0):(s.resume||s.cover_letter)&&y(1)}})},h=()=>{_()&&l(r=>r+1)},S=()=>{l(r=>r-1)},_=()=>{if(R(),a===0){let r=!0;return o.forEach(s=>{s.fields.forEach(c=>{c.is_required&&(!i.responses[c.id]||i.responses[c.id]==="")&&(C(`responses.${c.id}`,"This field is required"),r=!1)})}),r}else if(a===1){let r=!0;return i.resume||(C("resume","Resume is required"),r=!1),r}return!0},z=r=>{if(!r.options)return[];if(typeof r.options=="string")try{return JSON.parse(r.options)}catch{return[]}return r.options},w=r=>{const s=m[`responses.${r.id}`],c=i.responses[r.id]||"",P=z(r);switch(r.field_type){case"text":return e.jsx(N,{label:r.name,value:c,onChange:n=>p(r.id,n.target.value),required:r.is_required,error:!!s,helperText:s,fullWidth:!0,margin:"normal"},r.id);case"textarea":return e.jsx(K,{label:r.name,value:c,onChange:n=>p(r.id,n.target.value),required:r.is_required,error:!!s,helperText:s,fullWidth:!0,rows:4,margin:"normal"},r.id);case"select":return e.jsx(Fe,{label:r.name,value:c,onChange:n=>p(r.id,n.target.value),options:P.map(n=>({value:n,label:n})),required:r.is_required,error:!!s,helperText:s,fullWidth:!0,margin:"normal"},r.id);case"radio":return e.jsxs(oe,{component:"fieldset",margin:"normal",error:!!s,required:r.is_required,children:[e.jsx(L,{component:"legend",children:r.name}),e.jsx(lr,{value:c,onChange:n=>p(r.id,n.target.value),children:P.map((n,U)=>e.jsx(ae,{value:n,control:e.jsx(ar,{}),label:n},U))}),s&&e.jsx(se,{children:s})]},r.id);case"checkbox":return e.jsxs(oe,{component:"fieldset",margin:"normal",error:!!s,required:r.is_required,children:[e.jsx(L,{component:"legend",children:r.name}),e.jsx(pe,{children:P.map((n,U)=>e.jsx(ae,{control:e.jsx(Oe,{checked:Array.isArray(c)?c.includes(n):!1,onChange:he=>{const Y=Array.isArray(c)?[...c]:[];he.target.checked?p(r.id,[...Y,n]):p(r.id,Y.filter(fe=>fe!==n))}}),label:n},U))}),s&&e.jsx(se,{children:s})]},r.id);case"date":return e.jsx(N,{label:r.name,type:"date",value:c,onChange:n=>p(r.id,n.target.value),required:r.is_required,error:!!s,helperText:s,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}},r.id);case"number":return e.jsx(N,{label:r.name,type:"number",value:c,onChange:n=>p(r.id,n.target.value),required:r.is_required,error:!!s,helperText:s,fullWidth:!0,margin:"normal"},r.id);case"email":return e.jsx(N,{label:r.name,type:"email",value:c,onChange:n=>p(r.id,n.target.value),required:r.is_required,error:!!s,helperText:s,fullWidth:!0,margin:"normal"},r.id);case"file":return e.jsxs(f,{sx:{my:2},children:[e.jsx(L,{component:"legend",required:r.is_required,children:r.name}),e.jsx(Q,{onFileSelect:n=>p(r.id,n),label:`Upload ${r.name}`,accept:".pdf,.doc,.docx,.jpg,.png",error:!!s,helperText:s})]},r.id);default:return null}};return e.jsxs(je,{children:[e.jsx(ye,{title:`Apply for ${t.title}`}),e.jsx(Pe,{maxWidth:"lg",sx:{py:4},children:e.jsxs(f,{mb:4,children:[e.jsx(D,{component:ge,href:route("candidate.jobs.show",t.id),startIcon:e.jsx(te,{}),variant:"outlined",sx:{mb:2},children:"Back to Job"}),e.jsxs(re,{sx:{p:3,borderRadius:2,mb:3},children:[e.jsxs(f,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(qe,{src:((k=t.company)==null?void 0:k.logo)||void 0,alt:(E=t.company)==null?void 0:E.name,variant:"rounded",sx:{width:56,height:56,mr:2,borderRadius:2,bgcolor:"primary.lighter"},children:((I=(A=t.company)==null?void 0:A.name)==null?void 0:I.charAt(0))||e.jsx(Be,{})}),e.jsxs(f,{children:[e.jsx(d,{variant:"h5",fontWeight:"bold",children:t.title}),e.jsx(d,{variant:"body1",color:"text.secondary",children:($=t.company)==null?void 0:$.name})]})]}),e.jsx(f,{display:"flex",alignItems:"center",children:e.jsxs(f,{display:"flex",alignItems:"center",mr:3,children:[e.jsx(_e,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:["Deadline: ",t.submission_deadline]})]})})]}),e.jsx(f,{sx:{mb:4},children:e.jsx(We,{activeStep:a,alternativeLabel:!0,children:g.map((r,s)=>e.jsx(Ge,{completed:a>s,children:e.jsx(Te,{error:u===s,children:r})},r))})}),e.jsxs(re,{sx:{p:4,borderRadius:2},children:[a===0&&e.jsxs(f,{children:[e.jsx(d,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Application Form"}),e.jsx(d,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Please complete all required fields in the application form below."}),Object.keys(m).length>0&&e.jsxs(M,{severity:"error",sx:{mb:3},children:[e.jsx(ze,{children:"Error"}),"Please correct the errors in the form to proceed."]}),Array.isArray(o)&&o.map(r=>e.jsx(W,{title:r.name,subtitle:r.description,sx:{mb:4},children:Array.isArray(r.fields)&&r.fields.map(s=>w(s))},r.id))]}),a===1&&e.jsxs(f,{children:[e.jsx(d,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Resume & Cover Letter"}),e.jsx(d,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Upload your resume and provide a cover letter to support your application."}),e.jsxs(W,{title:"Resume",sx:{mb:4},children:[e.jsx(Q,{onFileSelect:F,label:"Upload Resume (PDF, DOC, DOCX)",accept:".pdf,.doc,.docx",error:!!m.resume,helperText:m.resume,sx:{mb:2}}),i.resume&&e.jsxs(M,{severity:"success",icon:e.jsx(Ee,{fontSize:"inherit"}),sx:{mt:2},children:["Resume uploaded: ",i.resume.name]})]}),e.jsx(W,{title:"Cover Letter (Optional)",children:e.jsx(K,{placeholder:"Write something about yourself and why you are interested in this position...",value:i.cover_letter,onChange:r=>v("cover_letter",r.target.value),fullWidth:!0,rows:6,error:!!m.cover_letter,helperText:m.cover_letter})})]}),a===2&&e.jsxs(f,{children:[e.jsx(d,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Review Your Application"}),e.jsx(d,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Please review your application details before submitting."}),e.jsx(M,{severity:"info",sx:{mb:4},children:"Once submitted, you won't be able to edit your application."}),e.jsx(W,{title:"Application Summary",sx:{mb:4},children:e.jsxs(G,{container:!0,spacing:2,children:[e.jsxs(G,{item:!0,xs:12,md:6,children:[e.jsx(d,{variant:"subtitle2",fontWeight:"bold",children:"Resume"}),i.resume?e.jsxs(f,{display:"flex",alignItems:"center",children:[e.jsx($e,{sx:{mr:1,color:"success.main"}}),e.jsx(d,{variant:"body2",children:i.resume.name})]}):e.jsx(d,{variant:"body2",color:"error.main",children:"No resume uploaded"})]}),e.jsxs(G,{item:!0,xs:12,md:6,children:[e.jsx(d,{variant:"subtitle2",fontWeight:"bold",children:"Cover Letter"}),i.cover_letter?e.jsxs(d,{variant:"body2",noWrap:!0,sx:{maxWidth:300},children:[i.cover_letter.substring(0,100),"..."]}):e.jsx(d,{variant:"body2",color:"text.secondary",children:"No cover letter provided"})]})]})}),o.length>0&&e.jsx(W,{title:"Form Responses",children:Array.isArray(o)&&o.map(r=>e.jsxs(f,{sx:{mb:3},children:[e.jsx(d,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:r.name}),e.jsx(G,{container:!0,spacing:2,children:Array.isArray(r.fields)&&r.fields.map(s=>e.jsxs(G,{item:!0,xs:12,sm:6,children:[e.jsx(d,{variant:"subtitle2",fontWeight:"medium",children:s.name}),e.jsx(d,{variant:"body2",children:Array.isArray(i.responses[s.id])?i.responses[s.id].join(", "):i.responses[s.id]||"Not provided"})]},s.id))}),r!==o[o.length-1]&&e.jsx(we,{sx:{my:2}})]},r.id))})]}),e.jsxs(f,{display:"flex",justifyContent:"space-between",mt:4,children:[e.jsx(D,{variant:"outlined",onClick:S,startIcon:e.jsx(te,{}),disabled:a===0,children:"Back"}),a===g.length-1?e.jsx(D,{variant:"contained",color:"primary",onClick:B,endIcon:e.jsx(De,{}),loading:b,children:"Submit Application"}):e.jsx(D,{variant:"contained",color:"primary",onClick:h,endIcon:e.jsx(Ne,{}),children:"Next"})]})]})]})})]})};export{ct as default};
