import{H as D,b as p,r as d,u as ee,j as e,g as J,S as re,a as te,J as _}from"./app-BUVb_nAj.js";import{L as ne}from"./Layout-DnkF-NCm.js";import{S as ie}from"./SweetAlert-B9pLtg6v.js";import{f as oe,g as ae,u as U,s as se,b as le,d as ce,T as o,m as de,i as pe,w as V,c as me,B as i,P as E,a as f}from"./Button-DFxjcZ8p.js";import{C as ue}from"./Container-DEvTfuj0.js";import{B as xe}from"./Breadcrumbs-NSzrb1Jm.js";import{N as he}from"./NavigateNext-D8f8rhDY.js";import{I as fe}from"./InfoOutlined-DJot2JP-.js";import{T as ye}from"./TextField-DdsD0Afg.js";import{P as ge}from"./PictureAsPdf-Yr8idwAW.js";import{T as N,W as be}from"./Work-CLEsMByH.js";import{I as H,D as ve}from"./Button-DzGhUBn7.js";import{O as je}from"./OpenInNew-cExbGeSp.js";import{E as Ce}from"./Edit-D-W3BsdZ.js";import{C as ke}from"./Card-D_rkxkaC.js";import{C as $}from"./Slide-DYtCGdXj.js";import{S as we}from"./Star-Bgm7RHOV.js";import{C as Se}from"./CardMedia-Cnc7eeGM.js";import{C as _e}from"./CardContent-DTmJK9ga.js";import{C as Le}from"./CardActions-CNvPXNbJ.js";import{C as Pe}from"./Checkbox-DZaxlRGh.js";import{S as Te}from"./Send-C49l985x.js";import{B as K}from"./BusinessCenter-CsY4Qukq.js";import{S as M}from"./Stack-DUsTNRwi.js";import{L as Ae}from"./LocationOn-CpujyWrU.js";import{C as Be}from"./CalendarToday-CUHpeiFE.js";import{T as De}from"./AccessTime-DXhpyso9.js";import{E as Ie}from"./Error-CSPDIC8t.js";import{S as ze}from"./Snackbar-DrQ7HE2I.js";import{A as Re}from"./Alert-j9c9aQEr.js";import{D as $e,a as Fe,b as We}from"./DialogContent-D4sYn80t.js";import{D as Oe}from"./DialogTitle-DUJu7qVS.js";import{L as Ve,C as Ee}from"./Link-CJosWfKL.js";import{G as Ne}from"./GitHub-1sbbnK5H.js";import{D as He}from"./Description-bLLwqFxn.js";import"./Sidebar-DGzgELZX.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-Dtg-WGcE.js";import"./CheckCircle-Dd-oaFV0.js";import"./ChevronRight-FNylUib_.js";import"./Person-5k5xBlAT.js";import"./Info-CdM9Lqya.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";import"./Footer-DSErbOqA.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./Select-Bh9V9k3o.js";import"./InputLabel-DpN5m5Yk.js";import"./SwitchBase-BRw57M3-.js";import"./Close-CafbgWA1.js";function Ke(r){return ae("MuiLink",r)}const Me=oe("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Ge=({theme:r,ownerState:n})=>{const s=n.color,a=D(r,`palette.${s}.main`,!1)||D(r,`palette.${s}`,!1)||n.color,x=D(r,`palette.${s}.mainChannel`)||D(r,`palette.${s}Channel`);return"vars"in r&&x?`rgba(${x} / 0.4)`:p(a,.4)},G={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Je=r=>{const{classes:n,component:s,focusVisible:a,underline:x}=r,y={root:["root",`underline${J(x)}`,s==="button"&&"button",a&&"focusVisible"]};return ce(y,Ke,n)},Ue=se(o,{name:"MuiLink",slot:"Root",overridesResolver:(r,n)=>{const{ownerState:s}=r;return[n.root,n[`underline${J(s.underline)}`],s.component==="button"&&n.button]}})(de(({theme:r})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:n,ownerState:s})=>n==="always"&&s.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(r.palette).filter(pe()).map(([n])=>({props:{underline:"always",color:n},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette[n].mainChannel} / 0.4)`:p(r.palette[n].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:p(r.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.secondaryChannel} / 0.4)`:p(r.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(r.vars||r).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Me.focusVisible}`]:{outline:"auto"}}}]}))),F=d.forwardRef(function(n,s){const a=ee({props:n,name:"MuiLink"}),x=U(),{className:y,color:m="primary",component:g="a",onBlur:w,onFocus:L,TypographyClasses:b,underline:P="always",variant:T="inherit",sx:v,...l}=a,[A,c]=d.useState(!1),j=h=>{V(h.target)||c(!1),w&&w(h)},C=h=>{V(h.target)&&c(!0),L&&L(h)},k={...a,color:m,component:g,focusVisible:A,underline:P,variant:T},I=Je(k);return e.jsx(Ue,{color:m,className:le(I.root,y),classes:b,component:g,onBlur:j,onFocus:C,ref:s,ownerState:k,variant:T,...l,sx:[...G[m]===void 0?[{color:m}]:[],...Array.isArray(v)?v:[v]],style:{...l.style,...P==="always"&&m!=="inherit"&&!G[m]&&{"--Link-underlineColor":Ge({theme:x,ownerState:k})}}})}),qe=me(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}));function Jr({job:r,candidateProfile:n,portfolioItems:s}){const a=U(),[x,y]=d.useState(!1),[m,g]=d.useState({open:!1,message:"",severity:"info"}),[w,L]=d.useState(!1),[b,P]=d.useState([]),[T,v]=d.useState(!1),[l,A]=d.useState(null),[c,j]=d.useState({show:!1,title:"",text:"",icon:"",confirmButtonText:"",showCancelButton:!1,cancelButtonText:"",onConfirm:null});d.useEffect(()=>{if(w){const t=setTimeout(()=>{window.location.href=route("candidate.applications.index")},1500);return()=>clearTimeout(t)}},[w]),d.useEffect(()=>{console.log("Job data:",r),console.log("Candidate profile:",n),console.log("Portfolio items:",s)},[r,n,s]);const{data:C,setData:k,post:I,processing:h,errors:B}=re({job_id:(r==null?void 0:r.id)||"",cover_letter:"",portfolio_items:[]}),q=t=>{const{name:u,value:S}=t.target;k(u,S)},W=t=>{P(u=>u.includes(t)?u.filter(S=>S!==t):[...u,t]),k("portfolio_items",u=>u.includes(t)?u.filter(S=>S!==t):[...u,t])},Q=t=>{A(t),v(!0)},z=()=>{v(!1),A(null)},X=()=>r!=null&&r.submission_deadline?new Date(r.submission_deadline)<new Date:!1,Y=t=>{if(t.preventDefault(),!C.cover_letter||C.cover_letter.trim().length<10){g({open:!0,message:"Cover letter harus diisi minimal 10 karakter",severity:"error"});return}j({show:!0,title:"Kirim Lamaran",text:`Apakah Anda yakin ingin mengirim lamaran untuk posisi ${r.title} di ${r.company.name}? Pastikan semua informasi telah lengkap dan akurat.`,icon:"question",confirmButtonText:"Konfirmasi & Kirim",showCancelButton:!0,cancelButtonText:"Periksa Kembali",onConfirm:Z})},Z=()=>{y(!0),console.log("Submitting application data:",C),I(route("candidate.jobs.submit-application",r.id),{onSuccess:()=>{j({show:!0,title:"Berhasil!",text:"Lamaran Anda telah berhasil dikirim. Anda akan dialihkan ke halaman lamaran Anda.",icon:"success",confirmButtonText:"OK",onConfirm:()=>{L(!0)}})},onError:t=>{console.error("Application submission errors:",t),g({open:!0,message:"Terjadi kesalahan saat mengirim lamaran. Silakan coba lagi.",severity:"error"}),y(!1)}})},O=()=>{g(t=>({...t,open:!1}))},R=t=>{switch(t){case"project":return e.jsx(qe,{});case"open_source":return e.jsx(Ee,{});case"work":return e.jsx(be,{});default:return e.jsx(He,{})}};return e.jsxs(ne,{children:[e.jsx(te,{title:`Apply - ${r==null?void 0:r.title}`}),e.jsxs(ue,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(xe,{separator:e.jsx(he,{fontSize:"small"}),"aria-label":"breadcrumb",sx:{mb:3},children:[e.jsx(F,{underline:"hover",color:"inherit",component:_,href:route("candidate.dashboard"),children:"Dashboard"}),e.jsx(F,{underline:"hover",color:"inherit",component:_,href:route("candidate.jobs.index"),children:"Lowongan"}),e.jsx(F,{underline:"hover",color:"inherit",component:_,href:route("candidate.jobs.show",r.id),children:r.title}),e.jsx(o,{color:"text.primary",children:"Lamar"})]}),e.jsxs(i,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3},children:[e.jsx(i,{sx:{flex:{xs:"1 1 100%",md:"1 1 calc(66.666% - 12px)"}},children:e.jsxs(E,{elevation:0,sx:{p:3,border:"1px solid",borderColor:"divider",borderRadius:2,mb:3},children:[e.jsxs(o,{variant:"h5",gutterBottom:!0,children:["Lamar Posisi ",r.title]}),e.jsxs(i,{display:"flex",alignItems:"center",sx:{mb:3,p:2,backgroundColor:p(a.palette.info.main,.1),borderRadius:1,border:`1px solid ${p(a.palette.info.main,.3)}`},children:[e.jsx(fe,{color:"info",sx:{mr:1}}),e.jsx(o,{variant:"body2",children:"Periksa kembali dokumen dan informasi yang Anda berikan sebelum mengirim lamaran."})]}),e.jsxs(i,{component:"form",onSubmit:Y,sx:{mt:3},children:[e.jsx(ye,{name:"cover_letter",label:"Cover Letter",multiline:!0,rows:8,value:C.cover_letter,onChange:q,fullWidth:!0,variant:"outlined",required:!0,placeholder:"Tuliskan mengapa Anda tertarik dengan posisi ini dan mengapa Anda adalah kandidat yang tepat...",error:!!B.cover_letter,helperText:B.cover_letter||"Jelaskan mengapa Anda tertarik dengan posisi ini dan kualifikasi yang Anda miliki.",InputProps:{sx:{fontFamily:"inherit"}},sx:{mb:3}}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Resume"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",p:2,backgroundColor:a.palette.background.default,borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsx(ge,{color:"error",sx:{fontSize:28,mr:2}}),e.jsxs(i,{sx:{flexGrow:1},children:[e.jsx(o,{variant:"subtitle1",children:n.resume_filename||"Resume.pdf"}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:["Last updated: ",n.last_updated]})]}),e.jsx(N,{title:"Lihat Resume",children:e.jsx(H,{color:"primary",href:n.resume,target:"_blank",rel:"noopener noreferrer",children:e.jsx(je,{})})}),e.jsx(N,{title:"Edit Resume",children:e.jsx(H,{color:"primary",component:_,href:route("candidate.profile.edit"),children:e.jsx(Ce,{})})})]})]}),s&&s.length>0&&e.jsxs(i,{sx:{mb:4},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Portfolio"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Pilih proyek-proyek yang relevan dengan posisi ini untuk ditampilkan pada lamaran Anda."}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:s.map(t=>e.jsx(i,{sx:{width:{xs:"100%",sm:"calc(50% - 8px)",md:"calc(33.333% - 11px)"}},children:e.jsxs(ke,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.2s",borderColor:b.includes(t.id)?a.palette.primary.main:"divider",backgroundColor:b.includes(t.id)?p(a.palette.primary.main,.05):"transparent"},children:[t.is_featured&&e.jsx($,{icon:e.jsx(we,{fontSize:"small"}),label:"Featured",size:"small",color:"primary",sx:{position:"absolute",top:8,right:8,zIndex:1}}),t.thumbnail?e.jsx(Se,{component:"img",height:"140",image:t.thumbnail,alt:t.title}):e.jsx(i,{sx:{height:140,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:p(a.palette.primary.main,.1)},children:R(t.type)}),e.jsxs(_e,{sx:{flexGrow:1,pb:1},children:[e.jsx(o,{variant:"subtitle1",component:"div",noWrap:!0,children:t.title}),e.jsx($,{label:t.type_label,size:"small",color:"default",variant:"outlined",icon:R(t.type),sx:{mb:1}}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description||"No description provided"})]}),e.jsxs(Le,{sx:{justifyContent:"space-between",pt:0},children:[e.jsx(f,{size:"small",onClick:()=>Q(t),children:"Preview"}),e.jsx(Pe,{checked:b.includes(t.id),onChange:()=>W(t.id),inputProps:{"aria-label":`Select ${t.title}`},color:"primary"})]})]})},t.id))}),B.portfolio_items&&e.jsx(o,{color:"error",variant:"caption",sx:{mt:1,display:"block"},children:B.portfolio_items})]}),e.jsxs(i,{sx:{mt:3,display:"flex",justifyContent:"space-between"},children:[e.jsx(f,{variant:"outlined",component:_,href:route("candidate.jobs.show",r.id),children:"Kembali"}),e.jsx(f,{type:"submit",variant:"contained",color:"primary",disabled:h||x||X(),startIcon:e.jsx(Te,{}),children:"Kirim Lamaran"})]})]})]})}),e.jsx(i,{sx:{flex:{xs:"1 1 100%",md:"1 1 calc(33.333% - 12px)"}},children:e.jsxs(E,{elevation:0,sx:{p:3,border:"1px solid",borderColor:"divider",borderRadius:2,position:{md:"sticky"},top:{md:24}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Ringkasan Lowongan"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.company.logo?e.jsx(i,{component:"img",src:r.company.logo,alt:r.company.name,sx:{width:48,height:48,objectFit:"contain",mr:2,border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5}}):e.jsx(K,{sx:{fontSize:48,mr:2,color:"primary.main"}}),e.jsxs(i,{children:[e.jsx(o,{variant:"subtitle1",fontWeight:600,children:r.title}),e.jsx(o,{variant:"body2",color:"text.secondary",children:r.company.name})]})]}),e.jsx(ve,{sx:{my:2}}),e.jsxs(M,{spacing:2,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ae,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsx(o,{variant:"body2",children:r.location||"Lokasi tidak ditentukan"})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(K,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsx(o,{variant:"body2",children:r.job_type||"Tipe pekerjaan tidak ditentukan"})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Be,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsxs(o,{variant:"body2",children:["Deadline: ",r.submission_deadline]})]}),e.jsx(i,{sx:{display:"flex",alignItems:"center",p:1.5,backgroundColor:r.days_remaining>5?p(a.palette.success.main,.1):r.days_remaining>2?p(a.palette.warning.main,.1):p(a.palette.error.main,.1),borderRadius:1},children:r.days_remaining>0?e.jsxs(e.Fragment,{children:[e.jsx(De,{sx:{mr:1,fontSize:20,color:r.days_remaining>5?a.palette.success.main:r.days_remaining>2?a.palette.warning.main:a.palette.error.main}}),e.jsxs(o,{variant:"body2",children:[r.days_remaining," hari tersisa untuk melamar"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{sx:{color:a.palette.error.main,mr:1,fontSize:20}}),e.jsx(o,{variant:"body2",color:"error",children:"Batas waktu pendaftaran telah berakhir"})]})})]})]})})]})]}),e.jsx(ze,{open:m.open,autoHideDuration:6e3,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Re,{onClose:O,severity:m.severity,variant:"filled",sx:{width:"100%"},children:m.message})}),e.jsx(ie,{show:c.show,title:c.title,text:c.text,icon:c.icon,showCancelButton:c.showCancelButton,confirmButtonText:c.confirmButtonText,cancelButtonText:c.cancelButtonText,onConfirm:()=>{c.onConfirm&&c.onConfirm(),j(t=>({...t,show:!1}))},onCancel:()=>j(t=>({...t,show:!1}))}),e.jsx($e,{open:T,onClose:z,maxWidth:"md",fullWidth:!0,children:l&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o,{variant:"h6",children:l.title}),e.jsx($,{label:l.type_label,size:"small",color:"primary",icon:R(l.type)})]})}),e.jsxs(Fe,{dividers:!0,children:[l.thumbnail&&e.jsx(i,{sx:{mb:2,textAlign:"center"},children:e.jsx("img",{src:l.thumbnail,alt:l.title,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px"}})}),e.jsx(o,{variant:"body1",paragraph:!0,children:l.description||"No description provided"}),e.jsxs(M,{direction:"row",spacing:2,sx:{mt:2},children:[l.project_url&&e.jsx(f,{variant:"outlined",startIcon:e.jsx(Ve,{}),href:l.project_url,target:"_blank",rel:"noopener noreferrer",size:"small",children:"View Project"}),l.repository_url&&e.jsx(f,{variant:"outlined",startIcon:e.jsx(Ne,{}),href:l.repository_url,target:"_blank",rel:"noopener noreferrer",size:"small",children:"View Repository"})]})]}),e.jsxs(We,{children:[e.jsx(f,{onClick:z,children:"Close"}),e.jsx(f,{variant:"contained",onClick:()=>{W(l.id),z()},children:b.includes(l.id)?"Remove from Application":"Add to Application"})]})]})})]})}export{Jr as default};
