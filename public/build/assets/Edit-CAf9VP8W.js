import{r as h,S as I,j as r,a as B,m as F,b as a,J as U}from"./app-BUVb_nAj.js";import{L as G}from"./Layout-DnkF-NCm.js";import{u as J,B as s,a as P,T as p,P as L,C as z}from"./Button-DFxjcZ8p.js";import{C as N}from"./Container-DEvTfuj0.js";import{A as $}from"./ArrowBack-Cgi6G0-j.js";import{A as K}from"./Alert-j9c9aQEr.js";import{A as Y}from"./Slide-DYtCGdXj.js";import{I as O,D as q}from"./Button-DzGhUBn7.js";import{P as H}from"./PhotoCamera-DMFcExI6.js";import{D as Q}from"./Delete-DjrVMKuP.js";import{S}from"./Stack-DUsTNRwi.js";import{T as m}from"./TextField-DdsD0Afg.js";import{S as V}from"./Save-JdvVwzrr.js";import"./Sidebar-DGzgELZX.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-Dtg-WGcE.js";import"./Work-CLEsMByH.js";import"./CheckCircle-Dd-oaFV0.js";import"./ChevronRight-FNylUib_.js";import"./Person-5k5xBlAT.js";import"./Info-CdM9Lqya.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";import"./Footer-DSErbOqA.js";import"./Close-CafbgWA1.js";import"./Select-Bh9V9k3o.js";import"./InputLabel-DpN5m5Yk.js";const Or=({user:b})=>{const e=J(),[y,f]=h.useState(b.avatar),[v,u]=h.useState(0),[c,g]=h.useState(!1),x=h.useRef(null),{data:i,setData:d,errors:n,post:M,processing:w,recentlySuccessful:k,reset:R}=I({name:b.name,email:b.email,current_password:"",password:"",password_confirmation:""}),{setData:j,post:_,errors:C}=I({avatar:null}),D=o=>{o.preventDefault();const t=new FormData;t.append("name",i.name),t.append("email",i.email),t.append("_method","PUT"),i.current_password&&(t.append("current_password",i.current_password),t.append("password",i.password),t.append("password_confirmation",i.password_confirmation)),M(route("manager.profile.update"),{data:t,preserveScroll:!0,forceFormData:!0,onSuccess:()=>{R("current_password","password","password_confirmation")},onError:()=>{}})},T=o=>{const t=o.target.files[0];if(t){if(!["image/jpeg","image/png","image/jpg"].includes(t.type)){alert("Please upload a valid image file (JPG, JPEG, PNG)");return}if(t.size>2*1024*1024){alert("File size should be less than 2MB");return}j("avatar",t),f(URL.createObjectURL(t)),W(t)}},W=o=>{g(!0),u(0);const t=new FormData;t.append("avatar",o),_(route("manager.profile.update-avatar"),{data:t,preserveScroll:!0,forceFormData:!0,onProgress:l=>{u(l.percentage)},onSuccess:l=>{g(!1),u(0),l!=null&&l.avatar&&f(l.avatar)},onError:()=>{g(!1),u(0),alert("Failed to upload avatar. Please try again.")}})},A=()=>{x.current.click()},E=()=>{f(null),j("avatar",null),x.current&&(x.current.value="")};return r.jsxs(G,{children:[r.jsx(B,{title:"Edit Profil"}),r.jsx(N,{maxWidth:"lg",children:r.jsx(s,{sx:{py:4},children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs(s,{sx:{display:"flex",mb:4,alignItems:"center",flexWrap:"wrap",gap:2},children:[r.jsx(P,{component:U,href:route("manager.profile.index"),startIcon:r.jsx($,{}),variant:"outlined",sx:{borderRadius:"10px",px:2,mr:2,boxShadow:"0 2px 8px rgba(0,0,0,0.05)",borderColor:a(e.palette.primary.main,.3),"&:hover":{borderColor:e.palette.primary.main,backgroundColor:a(e.palette.primary.main,.05)}},children:"Kembali"}),r.jsx(p,{variant:"h4",component:"h1",fontWeight:"bold",color:"primary.main",sx:{background:`linear-gradient(45deg, ${e.palette.primary.main} 30%, ${e.palette.primary.light} 90%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Edit Profil"})]}),k&&r.jsx(K,{severity:"success",sx:{mb:3,borderRadius:"10px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:"Profil berhasil diperbarui."}),r.jsx(L,{elevation:0,sx:{borderRadius:"1.25rem",overflow:"hidden",border:"1px solid",borderColor:a(e.palette.primary.main,.1),mb:4,boxShadow:"0 8px 24px rgba(0,0,0,0.05)",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{boxShadow:"0 12px 28px rgba(0,0,0,0.08)"}},children:r.jsxs("form",{onSubmit:D,children:[r.jsxs(s,{sx:{p:{xs:3,md:4}},children:[r.jsx(p,{variant:"h6",component:"h2",fontWeight:"bold",sx:{mb:3,color:e.palette.primary.main,position:"relative","&:after":{content:'""',position:"absolute",bottom:"-8px",left:0,width:"40px",height:"3px",background:e.palette.primary.main,borderRadius:"10px"}},children:"Informasi Profil"}),r.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,mb:3},children:[r.jsxs(s,{sx:{width:{xs:"100%",md:"30%"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},children:[r.jsxs(s,{sx:{position:"relative",width:150,height:150,mb:2},children:[r.jsx(Y,{src:y,alt:i.name,sx:{width:150,height:150,border:"4px solid",borderColor:a(e.palette.primary.main,.2),boxShadow:"0 8px 20px rgba(0,0,0,0.1)",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.03)"}}}),c&&r.jsxs(s,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:a("#000",.5),borderRadius:"50%",zIndex:2},children:[r.jsx(z,{variant:"determinate",value:v,size:60,sx:{color:"white"}}),r.jsx(p,{variant:"body2",component:"div",sx:{position:"absolute",color:"white",fontWeight:"bold"},children:`${Math.round(v)}%`})]}),r.jsx("input",{type:"file",ref:x,style:{display:"none"},accept:"image/png, image/jpeg, image/jpg",onChange:T}),r.jsxs(s,{sx:{position:"absolute",bottom:0,right:0,display:"flex",gap:1},children:[r.jsx(O,{onClick:A,sx:{bgcolor:e.palette.primary.main,color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{bgcolor:e.palette.primary.dark},transition:"all 0.2s ease"},disabled:c,children:r.jsx(H,{})}),y&&r.jsx(O,{onClick:E,sx:{bgcolor:e.palette.error.main,color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{bgcolor:e.palette.error.dark},transition:"all 0.2s ease"},disabled:c,children:r.jsx(Q,{})})]})]}),r.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:2,textAlign:"center",px:2,py:1,bgcolor:a(e.palette.primary.main,.05),borderRadius:"8px"},children:"Unggah foto profil dengan ukuran maksimal 2MB. Format yang didukung: JPG, JPEG, PNG."}),C.avatar&&r.jsx(p,{variant:"body2",color:"error",sx:{mt:1,fontWeight:"medium"},children:C.avatar})]}),r.jsx(s,{sx:{width:{xs:"100%",md:"70%"}},children:r.jsxs(S,{spacing:3,children:[r.jsx(m,{label:"Nama Lengkap",fullWidth:!0,value:i.name,onChange:o=>d("name",o.target.value),error:!!n.name,helperText:n.name,InputProps:{sx:{borderRadius:"10px","& .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.5)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main}}}}),r.jsx(m,{label:"Email",fullWidth:!0,type:"email",value:i.email,onChange:o=>d("email",o.target.value),error:!!n.email,helperText:n.email,InputProps:{sx:{borderRadius:"10px","& .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.5)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main}}}})]})})]}),r.jsx(q,{sx:{my:4,borderColor:a(e.palette.primary.main,.1)}}),r.jsx(p,{variant:"h6",component:"h2",fontWeight:"bold",sx:{mb:3,color:e.palette.primary.main,position:"relative","&:after":{content:'""',position:"absolute",bottom:"-8px",left:0,width:"40px",height:"3px",background:e.palette.primary.main,borderRadius:"10px"}},children:"Ubah Password"}),r.jsxs(S,{spacing:3,children:[r.jsx(m,{label:"Password Saat Ini",fullWidth:!0,type:"password",value:i.current_password,onChange:o=>d("current_password",o.target.value),error:!!n.current_password,helperText:n.current_password,InputProps:{sx:{borderRadius:"10px","& .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.5)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main}}}}),r.jsx(m,{label:"Password Baru",fullWidth:!0,type:"password",value:i.password,onChange:o=>d("password",o.target.value),error:!!n.password,helperText:n.password,InputProps:{sx:{borderRadius:"10px","& .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.5)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main}}}}),r.jsx(m,{label:"Konfirmasi Password Baru",fullWidth:!0,type:"password",value:i.password_confirmation,onChange:o=>d("password_confirmation",o.target.value),error:!!n.password_confirmation,helperText:n.password_confirmation,InputProps:{sx:{borderRadius:"10px","& .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:a(e.palette.primary.main,.5)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main}}}})]})]}),r.jsx(s,{sx:{p:{xs:3,md:4},bgcolor:a(e.palette.primary.main,.03),borderTop:"1px solid",borderColor:a(e.palette.primary.main,.1),display:"flex",justifyContent:"flex-end"},children:r.jsx(P,{type:"submit",variant:"contained",color:"primary",startIcon:r.jsx(V,{}),disabled:w||c,sx:{borderRadius:"10px",px:3,py:1.2,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(0,0,0,0.2)"}},children:w?"Menyimpan...":"Simpan Perubahan"})})]})})]})})})]})};export{Or as default};
