import{r as x,S as L,j as e,J}from"./app-DbtvrzCH.js";import{C as M}from"./Card-CO4m9eOz.js";import{D as _,I as S,B as p}from"./Button-CgCKgwRd.js";import{I as j}from"./Input-jLRtBHuK.js";import{T as U}from"./TextArea-CFriLAGe.js";import{F as g}from"./FormGroup-1loQCr0P.js";import{S as $}from"./Select-GW1WnAoX.js";import{C}from"./Checkbox-BoxgtzbF.js";import{A as H}from"./Alert-BWXyQfZl.js";import{L as K}from"./Layout-nP23ILEi.js";import{B as c,T as a,P as k}from"./Button-B_2tu0cn.js";import{G as i}from"./Grid-6uBMiZYW.js";import{D as Q}from"./DragIndicator-DIhAE6IG.js";import{D as A}from"./Delete-DKhiqqSP.js";import{T as V}from"./TextField-BKjSZQPY.js";import{A as I}from"./Add-DoOXNSNv.js";import{S as X}from"./Save-D3JGzUEu.js";import{A as Y}from"./ArrowBack-BlJGXhv6.js";import{F as Z}from"./DynamicForm-M7LHl-SM.js";import"./Card-DBrS13VS.js";import"./MoreVert-DyEsPTVO.js";import"./CardHeader-iJjJx4bi.js";import"./CardContent-BDcyNa-E.js";import"./InputLabel-DUQX8vmT.js";import"./InputAdornment-Vh23wNde.js";import"./VisibilityOff-C8adI21A.js";import"./Visibility-7zZFC74a.js";import"./Info-j9m1PK-Q.js";import"./Select-DuuFGO1T.js";import"./Work-bK6ZZ-Qp.js";import"./Slide-DsAvN5qg.js";import"./FormControlLabel-DEPIK6dM.js";import"./Checkbox-D9hSuJOi.js";import"./SwitchBase-BHRWgqGq.js";import"./Alert-D22fyny9.js";import"./Close-Dpj-0MLQ.js";import"./AlertTitle-CTfZdqfc.js";import"./AccessTime-as3EkDL5.js";import"./ArrowForward-jR7HuMfl.js";import"./Close-BbHhCS19.js";import"./Error-D1IMUwky.js";import"./Warning-CYk4HSbS.js";import"./CheckCircle-nvk-SVVX.js";import"./LinearProgress-Cp3Ye6up.js";import"./Sidebar-sw6YawgY.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-BJHsQb-H.js";import"./Container-CHMV_DAY.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";import"./Footer-BBk2Lp_N.js";const er=()=>{const[T,h]=x.useState(!1),[B,v]=x.useState(""),[D,y]=x.useState("error"),[s,n]=x.useState([{name:"",field_type:"text",options:[],is_required:!1,order_index:0}]),{data:m,setData:u,post:w,processing:F,errors:d,reset:E}=L({name:"",description:"",is_enabled:!0,order_index:0}),q=r=>{if(r.preventDefault(),!N()){v("Please fill in all field names and provide options for select/radio/checkbox fields."),y("error"),h(!0);return}w(route("admin.form-builder.store"),{data:{...m,fields:s},onSuccess:()=>{},onError:t=>{v("Please check the form for errors."),y("error"),h(!0),window.scrollTo(0,0)}})},W=()=>{n([...s,{name:"",field_type:"text",options:[],is_required:!1,order_index:s.length}])},P=r=>{const t=[...s];t.splice(r,1),t.forEach((o,l)=>{o.order_index=l}),n(t)},f=(r,t)=>{const o=[...s];o[r]=t,n(o)},z=r=>{const t=[...s],o=t[r];o.options||(o.options=[]),o.options.push(""),n(t)},O=(r,t,o)=>{const l=[...s],b=l[r];b.options[t]=o,n(l)},R=(r,t)=>{const o=[...s];o[r].options.splice(t,1),n(o)},N=()=>{if(s.length===0)return!1;for(const r of s){if(!r.name.trim())return!1;if(["select","radio","checkbox"].includes(r.field_type)){if(!r.options||!Array.isArray(r.options)||r.options.length===0)return!1;for(const t of r.options)if(!t.trim())return!1}}return!0},G=[{value:"text",label:"Text Field"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"email",label:"Email"},{value:"date",label:"Date"},{value:"select",label:"Dropdown Select"},{value:"radio",label:"Radio Buttons"},{value:"checkbox",label:"Checkboxes"},{value:"file",label:"File Upload"}];return e.jsx(e.Fragment,{children:e.jsxs(K,{children:[T&&e.jsx(H,{severity:D,onClose:()=>h(!1),sx:{mb:2},children:B}),e.jsx(M,{title:"Create Form Section",icon:e.jsx(Z,{}),action:e.jsx(p,{variant:"outlined",startIcon:e.jsx(Y,{}),component:J,href:route("admin.form-builder.index"),children:"Back to Form Builder"}),children:e.jsxs(c,{component:"form",onSubmit:q,children:[e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(g,{label:"Section Information",marginBottom:"large",children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(j,{label:"Section Name",name:"name",value:m.name,onChange:r=>u("name",r.target.value),required:!0,error:d.name,helperText:d.name,fullWidth:!0,placeholder:"e.g., Personal Information, Education, Work Experience"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(U,{label:"Description",name:"description",value:m.description||"",onChange:r=>u("description",r.target.value),error:d.description,helperText:d.description,rows:3,fullWidth:!0,placeholder:"Brief description of this form section"})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"Order Index",name:"order_index",type:"number",value:m.order_index,onChange:r=>u("order_index",r.target.value),error:d.order_index,helperText:d.order_index||"Determines the display order of sections",fullWidth:!0,InputProps:{inputProps:{min:0}}})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(C,{label:"Enable this section",name:"is_enabled",checked:m.is_enabled,onChange:r=>u("is_enabled",r.target.checked),helperText:"Disabled sections won't be shown in application forms"})})]})})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(g,{label:"Information",marginBottom:"large",children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Form sections allow you to organize your application form into logical groups."}),e.jsxs(c,{sx:{mt:2},children:[e.jsx(a,{variant:"body2",fontWeight:500,children:"Instructions:"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"- Provide a descriptive name for the section"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"- Add fields to collect applicant information"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"- Set the order index to determine where this section appears"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"- Sections can be enabled/disabled as needed"})]})]})})]}),e.jsx(_,{sx:{my:3}}),e.jsxs(g,{label:"Form Fields",marginBottom:"large",children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add fields to collect information from applicants. Drag to reorder fields."}),s.map((r,t)=>e.jsxs(k,{sx:{p:2,mb:2,borderRadius:2,border:"1px solid",borderColor:"divider",position:"relative"},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Q,{color:"action",sx:{mr:1}}),e.jsxs(a,{variant:"subtitle1",fontWeight:500,children:["Field #",t+1]}),e.jsx(c,{sx:{ml:"auto"},children:e.jsx(S,{color:"error",onClick:()=>P(t),size:"small",disabled:s.length===1,children:e.jsx(A,{fontSize:"small"})})})]}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"Field Name",value:r.name,onChange:o=>f(t,{...r,name:o.target.value}),required:!0,fullWidth:!0,placeholder:"e.g., Full Name, Email Address, Education Level"})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx($,{label:"Field Type",value:r.field_type,onChange:o=>f(t,{...r,field_type:o.target.value}),options:G,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(C,{label:"Required Field",checked:r.is_required,onChange:o=>f(t,{...r,is_required:o.target.checked}),helperText:"Applicants must fill this field to submit the application"})}),["select","radio","checkbox"].includes(r.field_type)&&e.jsx(i,{item:!0,xs:12,children:e.jsxs(k,{sx:{p:2,bgcolor:"background.default",borderRadius:1},children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Options"}),r.options&&r.options.map((o,l)=>e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(V,{size:"small",value:o,onChange:b=>O(t,l,b.target.value),placeholder:`Option ${l+1}`,fullWidth:!0,sx:{mr:1}}),e.jsx(S,{size:"small",color:"error",onClick:()=>R(t,l),children:e.jsx(A,{fontSize:"small"})})]},l)),e.jsx(p,{variant:"outlined",size:"small",startIcon:e.jsx(I,{}),onClick:()=>z(t),sx:{mt:1},children:"Add Option"})]})})]})]},t)),e.jsx(p,{variant:"outlined",startIcon:e.jsx(I,{}),onClick:W,sx:{mt:2},children:"Add Field"})]}),e.jsx(_,{sx:{my:3}}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(p,{type:"button",variant:"outlined",onClick:()=>{E(),n([{name:"",field_type:"text",options:[],is_required:!1,order_index:0}])},disabled:F,children:"Reset"}),e.jsx(p,{type:"submit",variant:"contained",startIcon:e.jsx(X,{}),loading:F,children:"Create Form Section"})]})]})})]})})};export{er as default};
