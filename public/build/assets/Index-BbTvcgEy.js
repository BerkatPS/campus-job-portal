import{j as e,q as V,r as g,f as m,a as q,b as i,J as H}from"./app-DbtvrzCH.js";import{T as K}from"./Table-B5QHKXcj.js";import{I as R}from"./Button-CgCKgwRd.js";import{P as Q}from"./Pagination-D3ETEnxi.js";import{S as Y}from"./SearchBar-CuK-1Vse.js";import{S as A}from"./Select-GW1WnAoX.js";import{D as G}from"./Dropdown-BRdAFtyH.js";import{A as X}from"./Alert-BWXyQfZl.js";import{L as Z}from"./Layout-nP23ILEi.js";import{c as $,u as _,B as n,T as s,P as I}from"./Button-B_2tu0cn.js";import{S as p}from"./Stack-CsubfPvX.js";import{B as P}from"./Badge-DGpL2cWn.js";import{P as f}from"./Person-C1OGobf6.js";import{W as v}from"./WorkOutline-B3w2_Dhf.js";import{T}from"./Work-bK6ZZ-Qp.js";import{T as ee}from"./Tune-Df3KyvXQ.js";import{R as te}from"./Sidebar-sw6YawgY.js";import{M as re}from"./MoreVert-DyEsPTVO.js";import{C as oe}from"./Card-DBrS13VS.js";import{C as ae}from"./CardContent-BDcyNa-E.js";import{A as ie,C as y}from"./Slide-DsAvN5qg.js";import{A as se}from"./Add-DoOXNSNv.js";import{F as ne}from"./FileDownload-CzpwCIB0.js";import"./TableRow-DitY7KzI.js";import"./Checkbox-D9hSuJOi.js";import"./SwitchBase-BHRWgqGq.js";import"./TablePagination-DtYWInOg.js";import"./KeyboardArrowRight-B784So0V.js";import"./LastPage-ByPDXHdv.js";import"./Select-DuuFGO1T.js";import"./KeyboardArrowLeft-ISc4gDFH.js";import"./ButtonGroup-CCy93Gk6.js";import"./InputLabel-DUQX8vmT.js";import"./FilterList-D0xY2zDR.js";import"./LocationOn-BAU5EuQK.js";import"./BusinessCenter-CGvXca3O.js";import"./Close-BbHhCS19.js";import"./Alert-D22fyny9.js";import"./Close-Dpj-0MLQ.js";import"./AlertTitle-CTfZdqfc.js";import"./AccessTime-as3EkDL5.js";import"./ArrowForward-jR7HuMfl.js";import"./Error-D1IMUwky.js";import"./Warning-CYk4HSbS.js";import"./Info-j9m1PK-Q.js";import"./CheckCircle-nvk-SVVX.js";import"./LinearProgress-Cp3Ye6up.js";import"./Footer-BBk2Lp_N.js";import"./Container-CHMV_DAY.js";import"./index-BJHsQb-H.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./ChevronRight-Bjx9uoMx.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";const le=$(e.jsx("path",{d:"M19.88 18.47c.44-.7.7-1.51.7-2.39 0-2.49-2.01-4.5-4.5-4.5s-4.5 2.01-4.5 4.5 2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7L21.58 23 23 21.58zm-3.8.11c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5m-.36-8.5c-.74.02-1.45.18-2.1.45l-.55-.83-3.8 6.18-3.01-3.52-3.63 5.81L1 17l5-8 3 3.5L13 6zm2.59.5c-.64-.28-1.33-.45-2.05-.49L21.38 2 23 3.18z"})),j=({title:o,value:d,icon:x,color:a})=>{const c=_();return e.jsx(oe,{sx:{borderRadius:"0.75rem",border:"1px solid",borderColor:"divider",boxShadow:"none",overflow:"hidden",transition:"all 0.15s ease-in-out",height:"100%","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.03)"}},children:e.jsxs(ae,{sx:{p:2.5,height:"100%"},children:[e.jsxs(p,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsx(s,{color:"text.secondary",variant:"body2",fontWeight:"500",children:o}),e.jsx(n,{sx:{p:1,borderRadius:"8px",bgcolor:i(c.palette[a].main,.08)},children:x})]}),e.jsx(s,{variant:"h4",sx:{fontWeight:"600",color:c.palette.text.primary},children:d})]})})},xt=()=>{var C,k,w;const{applications:o,filters:d,flash:x}=V().props,a=_(),[c,S]=g.useState({search:"",status:"",job:"",page:1}),[de,ce]=g.useState("list"),[me,W]=g.useState(0),b=(t,r)=>{S(l=>({...l,[t]:r,page:1}))};g.useEffect(()=>{const t=Object.fromEntries(Object.entries(c).filter(([r,l])=>l!==""));W(Object.values(t).filter(r=>r!=="").length),m.get(route("manager.applications.index"),t,{preserveState:!0,replace:!0,only:["applications"]})},[c]);const M=[{field:"id",header:"ID",width:"70px"},{field:"applicant",header:"Applicant",render:(t,r)=>{var l,h,u,z;return e.jsxs(p,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(ie,{src:((l=r.user)==null?void 0:l.avatar)||"/images/avatars/default.png",alt:((h=r.user)==null?void 0:h.name)||"User",sx:{width:40,height:40,border:"1px solid",borderColor:i(a.palette.divider,.5)}}),e.jsxs(n,{children:[e.jsx(s,{variant:"body2",fontWeight:"500",children:((u=r.user)==null?void 0:u.name)||"Unknown User"}),e.jsx(s,{variant:"caption",color:"text.secondary",children:((z=r.user)==null?void 0:z.email)||"No email"})]})]})}},{field:"job",header:"Job Position",render:(t,r)=>{var l,h,u;return r.job?e.jsx(H,{href:route("manager.jobs.show",(l=r.job)==null?void 0:l.id),children:e.jsxs(p,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(v,{fontSize:"small",color:"primary"}),e.jsxs(n,{children:[e.jsx(s,{variant:"body2",color:"primary.main",sx:{fontWeight:500},children:((h=r.job)==null?void 0:h.title)||"Unnamed Position"}),e.jsx(s,{variant:"caption",color:"text.secondary",children:((u=r.job)==null?void 0:u.location)||"No location"})]})]})}):e.jsx(s,{variant:"body2",color:"text.secondary",children:"Position not available"})}},{field:"status",header:"Status",render:(t,r)=>r.status?e.jsx(y,{label:r.status.name,size:"small",sx:{backgroundColor:i(r.status.color,.12),color:r.status.color,fontWeight:500,borderRadius:"6px",py:.5}}):e.jsx(y,{label:"Unknown",size:"small",sx:{backgroundColor:i(a.palette.grey[500],.12),color:a.palette.grey[600],fontWeight:500,borderRadius:"6px",py:.5}})},{field:"current_stage",header:"Current Stage",render:(t,r)=>r.current_stage?e.jsx(y,{label:r.current_stage.name,size:"small",variant:"outlined",sx:{borderColor:i(r.current_stage.color,.5),color:r.current_stage.color,borderRadius:"6px",py:.5}}):e.jsx(s,{variant:"caption",children:"Not started"})},{field:"created_at",header:"Applied Date",render:t=>t?e.jsxs(p,{direction:"column",spacing:.5,children:[e.jsx(s,{variant:"body2",fontWeight:"500",children:new Date(t).toLocaleDateString()}),e.jsx(s,{variant:"caption",color:"text.secondary",children:new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):"-"}],D=t=>[{label:"View Application",onClick:()=>m.visit(route("manager.applications.show",t.id)),icon:e.jsx(f,{fontSize:"small"})},{label:"Schedule Interview",onClick:()=>m.visit(route("manager.events.create",{application_id:t.id})),icon:e.jsx(se,{fontSize:"small"})},{divider:!0},{label:"Mark as Favorite",onClick:()=>L(t.id),color:t.is_favorite?"success":"inherit",icon:t.is_favorite?e.jsx("span",{className:"material-icons-outlined",children:"star"}):e.jsx("span",{className:"material-icons-outlined",children:"star_outline"})},{divider:!0},{label:"Download Resume",onClick:()=>t.resume?window.open(t.resume_url,"_blank"):null,disabled:!t.resume,icon:e.jsx(ne,{fontSize:"small"})}],L=t=>{m.put(route("manager.applications.toggle-favorite",t),{},{preserveScroll:!0,preserveState:!0})},B=t=>{S(r=>({...r,page:t}))},F=(d==null?void 0:d.statuses)||[],N=(d==null?void 0:d.jobs)||[],E=(o==null?void 0:o.total)||0,J=((C=o==null?void 0:o.data)==null?void 0:C.filter(t=>{var r;return((r=t.status)==null?void 0:r.name)==="Pending"}).length)||0,U=((k=o==null?void 0:o.data)==null?void 0:k.filter(t=>{var r;return((r=t.status)==null?void 0:r.name)==="Reviewing"}).length)||0,O=((w=o==null?void 0:o.data)==null?void 0:w.filter(t=>{var r;return((r=t.status)==null?void 0:r.name)==="Shortlisted"}).length)||0;return e.jsxs(Z,{children:[e.jsx(q,{title:"Job Applications"}),e.jsxs(n,{sx:{background:a.palette.mode==="dark"?i(a.palette.primary.dark,.05):i(a.palette.primary.light,.05),py:4,borderRadius:"0.75rem",px:3,mb:4,boxShadow:"none",border:"1px solid",borderColor:"divider"},children:[e.jsx(p,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},spacing:2,sx:{mb:3},children:e.jsxs(n,{children:[e.jsx(s,{variant:"h5",fontWeight:"600",gutterBottom:!0,children:"Lamaran Pekerjaan"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Kelola dan tinjau aplikasi kandidat untuk posisi terbuka Anda"})]})}),e.jsxs(n,{sx:{mt:1,display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:2},children:[e.jsx(j,{title:"Total Applications",value:E,icon:e.jsx(P,{fontSize:"small",color:"primary"}),color:"primary"}),e.jsx(j,{title:"Pending",value:J,icon:e.jsx(le,{fontSize:"small",color:"warning"}),color:"warning"}),e.jsx(j,{title:"Reviewing",value:U,icon:e.jsx(f,{fontSize:"small",color:"info"}),color:"info"}),e.jsx(j,{title:"Shortlisted",value:O,icon:e.jsx(v,{fontSize:"small",color:"success"}),color:"success"})]})]}),(x==null?void 0:x.success)&&e.jsx(X,{severity:"success",title:"Success",onClose:()=>m.reload({only:["flash"]}),sx:{mb:3},children:x.success}),e.jsx(I,{elevation:0,sx:{p:2.5,mb:3,borderRadius:"0.75rem",border:"1px solid",borderColor:"divider",boxShadow:"none"},children:e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"5fr 3fr 3fr 1fr"},gap:2,alignItems:"center"},children:[e.jsx(n,{children:e.jsx(Y,{placeholder:"Search applicants",value:c.search,onChange:t=>b("search",t.target.value),size:"small",sx:{borderRadius:"0.75rem"}})}),e.jsx(n,{children:e.jsx(A,{options:N.map(t=>({value:t.id,label:t.title})),value:c.job,onChange:t=>b("job",t.target.value),placeholder:"Job Position",size:"small",startIcon:e.jsx(v,{fontSize:"small"}),sx:{borderRadius:"0.75rem"}})}),e.jsx(n,{children:e.jsx(A,{options:F.map(t=>({value:t.id,label:t.name})),value:c.status,onChange:t=>b("status",t.target.value),placeholder:"Status",size:"small",startIcon:e.jsx(P,{fontSize:"small"}),sx:{borderRadius:"0.75rem"}})}),e.jsx(n,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"}},children:e.jsxs(p,{direction:"row",spacing:1,children:[e.jsx(T,{title:"More Filters",children:e.jsx(R,{color:"primary",sx:{bgcolor:i(a.palette.primary.main,.08),"&:hover":{bgcolor:i(a.palette.primary.main,.15)}},children:e.jsx(ee,{})})}),e.jsx(T,{title:"Refresh",children:e.jsx(R,{color:"primary",onClick:()=>m.reload({only:["applications"]}),sx:{bgcolor:i(a.palette.primary.main,.08),"&:hover":{bgcolor:i(a.palette.primary.main,.15)}},children:e.jsx(te,{})})})]})})]})}),e.jsx(I,{elevation:0,sx:{overflow:"hidden",borderRadius:"0.75rem",border:"1px solid",borderColor:"divider",boxShadow:"none"},children:o!=null&&o.data?e.jsx(K,{columns:M,data:o.data,onRowClick:t=>m.visit(route("manager.applications.show",t.id)),actions:t=>e.jsx(G,{buttonType:"icon",icon:e.jsx(re,{}),items:D(t)}),borderRadius:"medium",variant:"outlined",zebraPattern:!1,hoverEffect:!0,sx:{"& .MuiTableHead-root":{bgcolor:a.palette.mode==="dark"?i(a.palette.background.paper,.5):i(a.palette.grey[50],1)},"& .MuiTableCell-head":{fontWeight:600,color:a.palette.text.primary,fontSize:"0.875rem"},"& .MuiTableCell-root":{borderColor:a.palette.divider,padding:"12px 16px"},"& .MuiTableRow-root:hover":{bgcolor:a.palette.mode==="dark"?i(a.palette.primary.dark,.08):i(a.palette.primary.light,.08)}}}):e.jsx(n,{sx:{p:4,textAlign:"center"},children:e.jsx(s,{variant:"body1",children:"Memuat data aplikasi..."})})}),(o==null?void 0:o.data)&&o.data.length>0&&e.jsxs(p,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},spacing:2,sx:{mt:3},children:[e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Showing ",o.from,"-",o.to," of ",o.total," applications"]}),e.jsx(Q,{currentPage:o.current_page,totalPages:o.last_page,onPageChange:B,totalItems:o.total,perPage:o.per_page,variant:"rounded"})]}),(o==null?void 0:o.data)&&o.data.length===0&&e.jsxs(n,{sx:{py:8,textAlign:"center"},children:[e.jsx(f,{sx:{fontSize:60,color:i(a.palette.text.primary,.1),mb:2}}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"No applications found"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:3,maxWidth:500,mx:"auto"},children:"There are no applications matching your filters. Try changing your search criteria or check back later."})]})]})};export{xt as default};
