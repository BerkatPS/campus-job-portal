import{q as B,r as t,j as e,R as E,J as b,f as S}from"./app-DbtvrzCH.js";import{C as w}from"./Card-CO4m9eOz.js";import{L as M,I as c,D as R,B as P}from"./Button-CgCKgwRd.js";import{M as V}from"./Modal-B-OjsfG3.js";import{A as k}from"./Alert-BWXyQfZl.js";import{S as G}from"./Spinner-3KcxgD8W.js";import{L as J}from"./Layout-nP23ILEi.js";import{B as i,P as y,T as l}from"./Button-B_2tu0cn.js";import{G as g}from"./Grid-6uBMiZYW.js";import{T as O}from"./TextField-BKjSZQPY.js";import{I as W}from"./InputAdornment-Vh23wNde.js";import{S as $,L as q,a as N,b as H,c as K,T as p}from"./Work-bK6ZZ-Qp.js";import{D as Q}from"./DragIndicator-DIhAE6IG.js";import{C as I}from"./Slide-DsAvN5qg.js";import{V as U}from"./Visibility-7zZFC74a.js";import{V as X}from"./VisibilityOff-C8adI21A.js";import{E as Y}from"./Edit-LT1RMSQh.js";import{D as Z}from"./Delete-DKhiqqSP.js";import{A as ee}from"./Add-DoOXNSNv.js";import{F as re}from"./DynamicForm-M7LHl-SM.js";import"./Card-DBrS13VS.js";import"./MoreVert-DyEsPTVO.js";import"./CardHeader-iJjJx4bi.js";import"./CardContent-BDcyNa-E.js";import"./DialogContent-CpDcnQgJ.js";import"./DialogTitle-CnVKeRzh.js";import"./Close-BbHhCS19.js";import"./DialogContentText-BbIC-bWf.js";import"./Alert-D22fyny9.js";import"./Close-Dpj-0MLQ.js";import"./AlertTitle-CTfZdqfc.js";import"./AccessTime-as3EkDL5.js";import"./ArrowForward-jR7HuMfl.js";import"./Error-D1IMUwky.js";import"./Warning-CYk4HSbS.js";import"./Info-j9m1PK-Q.js";import"./CheckCircle-nvk-SVVX.js";import"./LinearProgress-Cp3Ye6up.js";import"./Sidebar-sw6YawgY.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-BJHsQb-H.js";import"./Container-CHMV_DAY.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";import"./Footer-BBk2Lp_N.js";import"./Select-DuuFGO1T.js";import"./InputLabel-DUQX8vmT.js";const Ye=()=>{const{formSections:A}=B().props,[x,v]=t.useState(""),[C,a]=t.useState(!1),[o,f]=t.useState(null),[u,h]=t.useState(!1),[F,n]=t.useState(""),[L,m]=t.useState("success"),[D,s]=t.useState(!1),T=()=>{o&&(h(!0),S.delete(route("admin.form-builder.destroy",o.id),{onSuccess:()=>{a(!1),f(null),n("Form section deleted successfully."),m("success"),s(!0)},onError:r=>{n("Failed to delete form section: "+Object.values(r).flat().join(" ")),m("error"),s(!0)},onFinish:()=>h(!1)}))},_=r=>{S.patch(route("admin.form-builder.toggle",r.id),{is_enabled:!r.is_enabled},{preserveScroll:!0,onError:()=>{n("Failed to update section status."),m("error"),s(!0)}})},d=A.filter(r=>r.name.toLowerCase().includes(x.toLowerCase()));return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[D&&e.jsx(k,{severity:L,onClose:()=>s(!1),sx:{mb:2},children:F}),e.jsx(w,{title:"Form Builder",icon:e.jsx(re,{}),action:e.jsx(P,{variant:"contained",startIcon:e.jsx(ee,{}),component:b,href:route("admin.form-builder.create"),children:"Add Form Section"}),children:e.jsxs(i,{sx:{mb:3},children:[e.jsx(g,{container:!0,spacing:2,sx:{mb:3},children:e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(O,{fullWidth:!0,placeholder:"Search form sections...",value:x,onChange:r=>v(r.target.value),InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx($,{color:"action"})})},size:"small",variant:"outlined"})})}),u?e.jsx(i,{sx:{py:4,display:"flex",justifyContent:"center"},children:e.jsx(G,{message:"Loading form sections..."})}):d.length===0?e.jsx(y,{sx:{p:4,borderRadius:2,textAlign:"center"},children:e.jsx(l,{variant:"body1",color:"text.secondary",children:'No form sections found. Click "Add Form Section" to create your first section.'})}):e.jsx(y,{sx:{borderRadius:2},children:e.jsx(M,{disablePadding:!0,children:d.map((r,z)=>e.jsxs(E.Fragment,{children:[e.jsxs(q,{sx:{borderLeft:j=>`4px solid ${r.is_enabled?j.palette.primary.main:j.palette.grey[400]}`,opacity:r.is_enabled?1:.7,py:2},children:[e.jsx(N,{children:e.jsx(Q,{color:"action"})}),e.jsx(H,{primary:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(l,{variant:"body1",fontWeight:500,children:r.name}),e.jsx(I,{label:`${r.form_fields_count||0} fields`,color:"primary",size:"small",variant:"outlined",sx:{ml:1}}),e.jsx(I,{label:r.is_enabled?"Enabled":"Disabled",color:r.is_enabled?"success":"default",size:"small",sx:{ml:1}})]}),secondary:r.description}),e.jsx(K,{children:e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(p,{title:r.is_enabled?"Disable Section":"Enable Section",children:e.jsx(c,{onClick:()=>_(r),size:"small",color:r.is_enabled?"primary":"default",sx:{mr:1},children:r.is_enabled?e.jsx(U,{fontSize:"small"}):e.jsx(X,{fontSize:"small"})})}),e.jsx(p,{title:"Edit Section",children:e.jsx(c,{component:b,href:route("admin.form-builder.edit",r.id),size:"small",color:"primary",sx:{mr:1},children:e.jsx(Y,{fontSize:"small"})})}),e.jsx(p,{title:"Delete Section",children:e.jsx(c,{onClick:()=>{f(r),a(!0)},size:"small",color:"error",children:e.jsx(Z,{fontSize:"small"})})})]})})]}),z<d.length-1&&e.jsx(R,{})]},r.id))})})]})}),e.jsx(V,{open:C,onClose:()=>a(!1),title:"Delete Form Section",description:e.jsxs(e.Fragment,{children:[e.jsxs(l,{variant:"body1",gutterBottom:!0,children:["Are you sure you want to delete ",e.jsx("strong",{children:o==null?void 0:o.name}),"?"]}),e.jsx(l,{variant:"body2",color:"error",children:"This action cannot be undone. All form fields associated with this section will also be deleted."})]}),confirmButton:!0,cancelButton:!0,confirmText:"Delete",confirmColor:"error",onConfirm:T,loading:u})]})})};export{Ye as default};
