import{q as D,r as h,S as R,j as e,b as o,J as g}from"./app-DbtvrzCH.js";import{B as m,D as E}from"./Button-CgCKgwRd.js";import{S as w}from"./Select-GW1WnAoX.js";import{F as j}from"./FormGroup-1loQCr0P.js";import{C as U}from"./Checkbox-BoxgtzbF.js";import{A as $}from"./Alert-BWXyQfZl.js";import{L as q}from"./Layout-nP23ILEi.js";import{u as z,B as a,T as n}from"./Button-B_2tu0cn.js";import{A as I}from"./Slide-DsAvN5qg.js";import{P as b}from"./Person-C1OGobf6.js";import{A as L}from"./ArrowBack-BlJGXhv6.js";import{B as v}from"./Work-bK6ZZ-Qp.js";import{S as F}from"./Save-D3JGzUEu.js";import{I as J}from"./Info-j9m1PK-Q.js";import{S as G}from"./Stack-CsubfPvX.js";import"./InputLabel-DUQX8vmT.js";import"./Select-DuuFGO1T.js";import"./FormControlLabel-DEPIK6dM.js";import"./Checkbox-D9hSuJOi.js";import"./SwitchBase-BHRWgqGq.js";import"./Alert-D22fyny9.js";import"./Close-Dpj-0MLQ.js";import"./AlertTitle-CTfZdqfc.js";import"./AccessTime-as3EkDL5.js";import"./ArrowForward-jR7HuMfl.js";import"./Close-BbHhCS19.js";import"./Error-D1IMUwky.js";import"./Warning-CYk4HSbS.js";import"./CheckCircle-nvk-SVVX.js";import"./LinearProgress-Cp3Ye6up.js";import"./Sidebar-sw6YawgY.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-BJHsQb-H.js";import"./Container-CHMV_DAY.js";import"./ChevronRight-Bjx9uoMx.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";import"./Footer-BBk2Lp_N.js";const We=()=>{var S,k;const{manager:t,user:r,company:l,companies:A,users:B,flash:d}=D().props,i=z(),[T,p]=h.useState(!1),[M,u]=h.useState(""),[W,f]=h.useState("error"),{data:y,setData:c,post:C,processing:_,errors:x}=R({_method:"PUT",company_id:(t==null?void 0:t.company_id)||"",user_id:(t==null?void 0:t.user_id)||"",is_primary:(t==null?void 0:t.is_primary)||!1});h.useEffect(()=>{if(d!=null&&d.message){u(d.message),f(d.type||"success"),p(!0);const s=setTimeout(()=>{p(!1)},5e3);return()=>clearTimeout(s)}},[d]);const P=s=>{s.preventDefault(),C(route("admin.managers.update",t.id),{onSuccess:()=>{u("Manager updated successfully."),f("success"),p(!0)},onError:H=>{u("Please check the form for errors."),f("error"),p(!0),window.scrollTo(0,0)}})};return e.jsxs(q,{children:[e.jsxs(a,{sx:{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(I,{sx:{bgcolor:o(i.palette.primary.main,.1),color:i.palette.primary.main,width:56,height:56},children:e.jsx(b,{fontSize:"large"})}),e.jsxs(a,{children:[e.jsx(n,{variant:"h4",component:"h1",fontWeight:700,children:"Edit Manager Assignment"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Update manager details and company assignment"})]})]}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(L,{}),component:g,href:route("admin.managers.index"),children:"Back to Managers"})]}),T&&e.jsx($,{severity:W,onClose:()=>p(!1),sx:{mb:3},children:M}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(a,{sx:{borderRadius:3,boxShadow:"0 2px 10px rgba(0,0,0,0.04)",border:`1px solid ${o(i.palette.divider,.1)}`,overflow:"hidden"},children:[e.jsxs(a,{sx:{p:3,borderBottom:`1px solid ${o(i.palette.divider,.1)}`,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(v,{color:"primary"}),e.jsx(n,{variant:"h6",fontWeight:600,children:"Edit Manager Assignment"})]}),e.jsx(a,{component:"form",onSubmit:P,sx:{p:3},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(I,{src:r==null?void 0:r.avatar,alt:r==null?void 0:r.name,sx:{width:64,height:64},children:(S=r==null?void 0:r.name)==null?void 0:S.charAt(0).toUpperCase()}),e.jsxs(a,{children:[e.jsx(n,{variant:"h6",fontWeight:600,children:r==null?void 0:r.name}),e.jsx(n,{variant:"body2",color:"text.secondary",children:r==null?void 0:r.email}),e.jsxs(a,{sx:{display:"flex",gap:1,mt:.5},children:[e.jsx(n,{variant:"caption",sx:{px:1,py:.25,bgcolor:o(i.palette.primary.main,.1),color:i.palette.primary.main,borderRadius:1,fontWeight:500},children:((k=r==null?void 0:r.role)==null?void 0:k.name)||"Manager"}),e.jsx(n,{variant:"caption",sx:{px:1,py:.25,bgcolor:r!=null&&r.is_active?o(i.palette.success.main,.1):o(i.palette.error.main,.1),color:r!=null&&r.is_active?i.palette.success.main:i.palette.error.main,borderRadius:1,fontWeight:500},children:r!=null&&r.is_active?"Active":"Inactive"})]})]})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(j,{label:"Perusahaan",required:!0,icon:e.jsx(v,{fontSize:"small",sx:{opacity:.7}}),marginBottom:"medium",children:e.jsx(w,{name:"company_id",value:y.company_id,onChange:s=>c("company_id",s.target.value),options:(A||[]).map(s=>({value:s.id,label:s.name,description:s.is_active?"Aktif":"Tidak Aktif"})),required:!0,error:x.company_id,helperText:x.company_id})}),e.jsx(j,{label:"Pengguna",required:!0,icon:e.jsx(b,{fontSize:"small",sx:{opacity:.7}}),marginBottom:"medium",children:e.jsx(w,{name:"user_id",value:y.user_id,onChange:s=>c("user_id",s.target.value),options:(B||[]).map(s=>({value:s.id,label:s.name,description:s.email})),required:!0,error:x.user_id,helperText:x.user_id})}),e.jsx(a,{sx:{p:2,bgcolor:o(i.palette.primary.main,.04),borderRadius:2,border:`1px solid ${o(i.palette.primary.main,.1)}`},children:e.jsx(j,{marginBottom:"none",children:e.jsx(U,{label:"Tetapkan sebagai Manager Utama",name:"is_primary",checked:y.is_primary,onChange:s=>c("is_primary",s.target.checked),helperText:"Manager utama memiliki kendali penuh atas detail perusahaan dan pengelolaan lowongan kerja"})})})]}),e.jsx(E,{sx:{my:4}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(m,{type:"button",variant:"text",color:"error",onClick:()=>{c({_method:"PUT",company_id:(t==null?void 0:t.company_id)||"",user_id:(t==null?void 0:t.user_id)||"",is_primary:(t==null?void 0:t.is_primary)||!1})},disabled:_,children:"Reset Formulir"}),e.jsx(m,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(F,{}),loading:_,size:"large",children:"Simpan Perubahan"})]})]})})]}),e.jsxs(a,{sx:{borderRadius:3,boxShadow:"0 2px 10px rgba(0,0,0,0.04)",border:`1px solid ${o(i.palette.divider,.1)}`,overflow:"hidden",height:"100%"},children:[e.jsxs(a,{sx:{p:3,borderBottom:`1px solid ${o(i.palette.divider,.1)}`,display:"flex",alignItems:"center",gap:1.5,bgcolor:o(i.palette.info.main,.05)},children:[e.jsx(J,{color:"info"}),e.jsx(n,{variant:"h6",fontWeight:600,children:"Informasi"})]}),e.jsxs(a,{sx:{p:3},children:[e.jsx(n,{variant:"body1",paragraph:!0,children:"Manager perusahaan adalah pengguna yang dapat mengelola detail dan lowongan kerja untuk perusahaan tertentu."}),e.jsx(n,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Status Saat Ini"}),e.jsxs(a,{sx:{p:2,bgcolor:t!=null&&t.is_primary?o(i.palette.primary.main,.05):o(i.palette.secondary.main,.05),border:`1px solid ${t!=null&&t.is_primary?o(i.palette.primary.main,.1):o(i.palette.secondary.main,.1)}`,borderRadius:2,mb:3},children:[e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:r==null?void 0:r.name})," saat ini merupakan"]}),e.jsx(n,{variant:"subtitle1",sx:{display:"inline-block",px:1.5,py:.5,bgcolor:t!=null&&t.is_primary?i.palette.primary.main:i.palette.secondary.main,color:"#fff",borderRadius:1,fontWeight:600},children:t!=null&&t.is_primary?"Manager Utama":"Manager Sekunder"}),e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["untuk perusahaan ",e.jsx("strong",{children:l==null?void 0:l.name})]})]}),e.jsx(n,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Tindakan Tambahan"}),e.jsxs(G,{spacing:2,children:[e.jsx(m,{variant:"outlined",startIcon:e.jsx(b,{}),component:g,href:route("admin.users.show",r==null?void 0:r.id),fullWidth:!0,children:"Lihat Detail Pengguna"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(v,{}),component:g,href:route("admin.companies.show",l==null?void 0:l.id),fullWidth:!0,children:"Lihat Detail Perusahaan"})]})]})]})]})]})};export{We as default};
