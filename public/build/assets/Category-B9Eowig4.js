import{r as v,j as e,a as D,J as T,S}from"./app-BUVb_nAj.js";import{P as B}from"./PublicLayout-Bc1zoCIL.js";import{f as w}from"./formatDistanceToNow-Bl6WKXxM.js";import{B as j}from"./Button-DzGhUBn7.js";import{C as y}from"./Card-vSg9PuMO.js";import{A as C}from"./Alert-W_CUoSxB.js";import{P as A}from"./Pagination-DLFQ9JGy.js";import{u as g,P as f,B as t,T as i}from"./Button-DFxjcZ8p.js";import{u as R}from"./index-Dtg-WGcE.js";import{C as W}from"./Container-DEvTfuj0.js";import{B as z}from"./Breadcrumbs-NSzrb1Jm.js";import{F as P,S as F}from"./Work-CLEsMByH.js";import{C as N}from"./Category-CYeNYdY6.js";import{N as _}from"./NavigateNext-D8f8rhDY.js";import{A as k}from"./Add-Dwuu4lJj.js";import{T as b}from"./TextField-DdsD0Afg.js";import{I as E}from"./InputAdornment-CzgX0339.js";import{C as I}from"./CardContent-DTmJK9ga.js";import{A as J}from"./Slide-DYtCGdXj.js";import{T as L}from"./AccessTime-DXhpyso9.js";import{C as Q,T as O,L as U}from"./LoadingButton-LkH2cM91.js";import{V}from"./Visibility-clJeQAT9.js";import{D as H,a as K,b as M}from"./DialogContent-D4sYn80t.js";import{D as Y}from"./DialogTitle-DUJu7qVS.js";import{C as $}from"./Create-ClEMRAii.js";import{i as q}from"./id-GFPdi1w9.js";import"./Footer-DSErbOqA.js";import"./Badge-Z58iZkOl.js";import"./Dropdown-DkhB3yYD.js";import"./MoreVert-PY4ZbxeC.js";import"./SearchBar-Cc77Mvvk.js";import"./FilterList-Cvii7KUK.js";import"./LocationOn-CpujyWrU.js";import"./BusinessCenter-CsY4Qukq.js";import"./Close-B7UDIhaS.js";import"./Modal-B2mKmmvX.js";import"./DialogContentText-B8PLj8LQ.js";import"./Spinner-BQ8Zpssl.js";import"./Home-Dgjf0Cn6.js";import"./KeyboardArrowDown-Cpvp99se.js";import"./Login-BhYUAFD9.js";import"./PersonAdd-C_AqpDZ_.js";import"./Stack-DUsTNRwi.js";import"./constructNow-z21Lzbrf.js";import"./toDate-DQ4lCuA9.js";import"./en-US-DjmIwZ1X.js";import"./endOfDay-CxCfia3b.js";import"./endOfMonth-CEPzkpce.js";import"./Card-D_rkxkaC.js";import"./CardHeader-D023TrKm.js";import"./Alert-j9c9aQEr.js";import"./Close-CafbgWA1.js";import"./AlertTitle-CPDkbCwY.js";import"./ArrowForward-Tz2ikYxH.js";import"./Error-CSPDIC8t.js";import"./Warning-BLg7sOqp.js";import"./Info-CdM9Lqya.js";import"./CheckCircle-Dd-oaFV0.js";import"./LinearProgress-3EBWbMR1.js";import"./KeyboardArrowLeft-CAm5v7jB.js";import"./ButtonGroup-BUsgIcyn.js";import"./InputLabel-DpN5m5Yk.js";import"./Select-Bh9V9k3o.js";const G=({topic:r})=>(g(),!r||!r.user?e.jsx(y,{variant:"outlined",sx:{mb:2,borderRadius:"12px"},children:e.jsx(I,{children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Data topik tidak lengkap"})})}):e.jsx(y,{variant:"outlined",customHeader:!1,hover:!0,elevation:0,sx:{mb:2,borderRadius:"12px",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.06)"}},children:e.jsx(I,{sx:{p:2.5},children:e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gap:2},children:[e.jsx(t,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start"},children:[e.jsx(J,{src:r.user.profile_photo||null,alt:r.user.name,sx:{width:40,height:40,mr:2},children:r.user.name.charAt(0).toUpperCase()}),e.jsxs(t,{children:[e.jsx(T,{href:route("public.forum.topic",r.slug),className:"no-underline",children:e.jsx(i,{variant:"h6",component:"h3",sx:{fontWeight:"medium",color:"text.primary",fontSize:"1rem",mb:.5,"&:hover":{color:"primary.main"}},children:r.title})}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1,mt:1},children:[e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(L,{fontSize:"inherit",sx:{mr:.5}}),w(new Date(r.created_at),{addSuffix:!0,locale:q})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(Q,{fontSize:"inherit",sx:{mr:.5}}),r.posts_count," komentar"]})]})]})]})}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:{xs:"flex-start",sm:"flex-end"},gap:2,mt:{xs:1,sm:0}},children:[e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(V,{fontSize:"inherit",sx:{mr:.5}}),r.views," dilihat"]}),r.likes_count>0&&e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(O,{fontSize:"inherit",sx:{mr:.5}}),r.likes_count," suka"]})]})]})})})),X=({open:r,onClose:s,category:n})=>{g();const{data:o,setData:m,post:h,processing:x,errors:l,reset:p}=S({title:"",content:"",category_id:(n==null?void 0:n.id)||""}),c=a=>{a.preventDefault(),h(route("public.forum.store.topic"),{onSuccess:()=>{p(),s()}})},u=()=>{p(),s()};return e.jsxs(H,{open:r,onClose:u,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"12px",overflow:"hidden"}},children:[e.jsxs(Y,{sx:{display:"flex",alignItems:"center",gap:1,borderBottom:"1px solid",borderColor:"divider",py:2},children:[e.jsx($,{color:"primary"}),e.jsxs(i,{variant:"h6",component:"span",children:["Buat Topik Baru di ",(n==null?void 0:n.name)||"Forum"]})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs(K,{sx:{pt:3},children:[e.jsx(b,{autoFocus:!0,margin:"dense",id:"title",label:"Judul Topik",type:"text",fullWidth:!0,variant:"outlined",value:o.title,onChange:a=>m("title",a.target.value),error:!!l.title,helperText:l.title,sx:{mb:3}}),e.jsx(b,{id:"content",label:"Konten",multiline:!0,rows:8,fullWidth:!0,variant:"outlined",value:o.content,onChange:a=>m("content",a.target.value),error:!!l.content,helperText:l.content})]}),e.jsxs(M,{sx:{px:3,py:2,borderTop:"1px solid",borderColor:"divider"},children:[e.jsx(j,{onClick:u,variant:"outlined",color:"inherit",children:"Batal"}),e.jsx(U,{loading:x,type:"submit",variant:"contained",disableElevation:!0,children:"Buat Topik"})]})]})]})},lr=({category:r,topics:s,popularTopics:n=[],flash:o})=>{const m=g();R(m.breakpoints.down("md"));const[h,x]=v.useState(!1),[l,p]=v.useState(""),c=()=>{x(!0)},u=()=>{x(!1)},a=d=>{p(d)};return e.jsxs(B,{children:[e.jsx(D,{title:`${r.name} - Forum Diskusi`}),e.jsxs(W,{maxWidth:"lg",sx:{py:4},children:[(o==null?void 0:o.success)&&e.jsx(C,{severity:"success",sx:{mb:3,borderRadius:"12px"},children:o.success}),(o==null?void 0:o.error)&&e.jsx(C,{severity:"error",sx:{mb:3,borderRadius:"12px"},children:o.error}),e.jsxs(f,{elevation:0,sx:{p:3,mb:4,borderRadius:"12px",border:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:[e.jsx(t,{sx:{mb:2},children:e.jsxs(z,{separator:e.jsx(_,{fontSize:"small"}),"aria-label":"breadcrumb",children:[e.jsxs(T,{href:route("public.forum.index"),sx:{display:"flex",alignItems:"center",color:"text.secondary",textDecoration:"none","&:hover":{textDecoration:"underline",color:"primary.main"}},children:[e.jsx(P,{sx:{mr:.5},fontSize:"small"}),"Forum"]}),e.jsxs(i,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(N,{sx:{mr:.5},fontSize:"small"}),r.name]})]})}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},flexDirection:{xs:"column",md:"row"},gap:2},children:[e.jsxs(t,{children:[e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",gutterBottom:!0,children:r.name}),e.jsx(i,{variant:"body1",color:"text.secondary",children:r.description})]}),e.jsx(j,{variant:"contained",startIcon:e.jsx(k,{}),onClick:c,disableElevation:!0,children:"Topik Baru"})]})]}),e.jsx(f,{elevation:0,sx:{p:2,mb:4,borderRadius:"12px",border:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:e.jsx(b,{fullWidth:!0,placeholder:"Cari topik diskusi...",variant:"outlined",size:"medium",value:l,onChange:d=>a(d.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(F,{})}),sx:{borderRadius:"8px"}}})}),e.jsxs(t,{sx:{mb:4},children:[e.jsx(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(i,{variant:"h5",component:"h2",fontWeight:"bold",children:"Topik Diskusi"})}),s.data&&s.data.length>0?e.jsxs(e.Fragment,{children:[s.data.map(d=>e.jsx(G,{topic:d},d.id)),s.links&&s.links.length>3&&e.jsx(t,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(A,{links:s.links,prevNext:!0})})]}):e.jsxs(f,{sx:{p:3,textAlign:"center",borderRadius:"12px",bgcolor:"background.paper",border:"1px dashed",borderColor:"divider"},children:[e.jsx(i,{variant:"body1",color:"text.secondary",children:"Belum ada topik diskusi di kategori ini. Jadilah yang pertama membuat topik!"}),e.jsx(j,{variant:"contained",startIcon:e.jsx(k,{}),onClick:c,sx:{mt:2},disableElevation:!0,children:"Buat Topik"})]})]}),e.jsx(X,{open:h,onClose:u,category:r})]})]})};export{lr as default};
