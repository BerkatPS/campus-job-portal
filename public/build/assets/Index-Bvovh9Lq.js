import{j as e,q as Le,r as p,a as Pe,b as o,m as V,J as z,A as $e,f as fe}from"./app-BUVb_nAj.js";import{S as G}from"./sweetalert2.esm.all-DV3w3JmD.js";import{T as Ee}from"./Table-DMYZ1T9r.js";import{B as je,I as g,M as De}from"./Button-DzGhUBn7.js";import"./Modal-B2mKmmvX.js";import{A as Fe}from"./Alert-W_CUoSxB.js";import{S as ye}from"./Select-CwiaD0cR.js";import{L as Oe}from"./Layout-DnkF-NCm.js";import{c as Ve,u as ve,B as a,T as m,P as be}from"./Button-DFxjcZ8p.js";import{A,C as v}from"./Slide-DYtCGdXj.js";import{A as M}from"./AdminPanelSettings-CO8uXZnm.js";import{A as Ge}from"./Add-Dwuu4lJj.js";import{P as R}from"./Person-5k5xBlAT.js";import{T as S,S as He,B as k,M as L,a as P,b as $}from"./Work-CLEsMByH.js";import{M as Ne}from"./MoreVert-PY4ZbxeC.js";import{T as Ue,a as E}from"./Tabs-CQDMEBQN.js";import{G as I}from"./Grid-CUDx21Kg.js";import{T as Je}from"./TextField-DdsD0Afg.js";import{I as D}from"./InputAdornment-CzgX0339.js";import{F as ge}from"./FilterList-Cvii7KUK.js";import{C as Ke}from"./Card-D_rkxkaC.js";import{C as qe}from"./CloudDownload-BKqs_LW6.js";import{P as Qe}from"./Print-C4-INZY1.js";import{R as Xe}from"./Sidebar-DGzgELZX.js";import{V as Ye}from"./Visibility-clJeQAT9.js";import{E as Ze}from"./Edit-D-W3BsdZ.js";import{D as et}from"./Delete-DjrVMKuP.js";import"./TableRow-BgPH6iWY.js";import"./Checkbox-DZaxlRGh.js";import"./SwitchBase-BRw57M3-.js";import"./TablePagination-C03w4OZ2.js";import"./KeyboardArrowRight-By3nsvSL.js";import"./LastPage-B2IJYsVY.js";import"./Select-Bh9V9k3o.js";import"./DialogContent-D4sYn80t.js";import"./DialogTitle-DUJu7qVS.js";import"./Close-B7UDIhaS.js";import"./DialogContentText-B8PLj8LQ.js";import"./Alert-j9c9aQEr.js";import"./Close-CafbgWA1.js";import"./AlertTitle-CPDkbCwY.js";import"./AccessTime-DXhpyso9.js";import"./ArrowForward-Tz2ikYxH.js";import"./Error-CSPDIC8t.js";import"./Warning-BLg7sOqp.js";import"./Info-CdM9Lqya.js";import"./CheckCircle-Dd-oaFV0.js";import"./LinearProgress-3EBWbMR1.js";import"./InputLabel-DpN5m5Yk.js";import"./Footer-DSErbOqA.js";import"./Container-DEvTfuj0.js";import"./index-Dtg-WGcE.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./ChevronRight-FNylUib_.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";const F=Ve(e.jsx("path",{d:"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5M9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5 6 6.34 6 8s1.34 3 3 3m7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75M9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13"})),tt=(r,x)=>{var y,l;G.fire({title:"Hapus Asosiasi Manager",html:`
            <p>Anda yakin ingin menghapus asosiasi manager ${(y=r==null?void 0:r.user)==null?void 0:y.name} dengan perusahaan ${(l=r==null?void 0:r.company)==null?void 0:l.name}?</p>
            <p style="color: #666; font-size: 0.9em; margin-top: 8px;">
                Tindakan ini hanya akan menghapus asosiasi, tidak menghapus data pengguna.
            </p>
        `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#f44336",cancelButtonColor:"#9e9e9e",confirmButtonText:"Hapus",cancelButtonText:"Batal"}).then(i=>{i.isConfirmed&&x()})},O=({icon:r,count:x,label:y,color:l="primary",delay:i=0})=>{const n=ve();return e.jsx(a,{sx:{flex:1,minWidth:"220px",maxWidth:"270px"},children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:i},children:e.jsxs(Ke,{elevation:0,sx:{display:"flex",alignItems:"center",p:2,borderRadius:2,border:`1px solid ${o(n.palette.divider,.1)}`,boxShadow:`0 1px 5px ${o(n.palette.common.black,.05)}`,bgcolor:o(n.palette[l].main,.03)},children:[e.jsx(A,{sx:{bgcolor:o(n.palette[l].main,.1),color:n.palette[l].main,width:56,height:56,mr:2},children:r}),e.jsxs(a,{children:[e.jsx(m,{variant:"h4",fontWeight:700,gutterBottom:!0,children:x}),e.jsx(m,{variant:"body2",color:"text.secondary",children:y})]})]})})})},st=({anchorEl:r,onClose:x})=>e.jsxs(De,{anchorEl:r,open:!!r,onClose:x,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(L,{onClick:x,children:[e.jsx(P,{children:e.jsx(qe,{fontSize:"small"})}),e.jsx($,{children:"Export CSV"})]}),e.jsxs(L,{onClick:x,children:[e.jsx(P,{children:e.jsx(Qe,{fontSize:"small"})}),e.jsx($,{children:"Print List"})]}),e.jsxs(L,{onClick:x,children:[e.jsx(P,{children:e.jsx(Xe,{fontSize:"small"})}),e.jsx($,{children:"Refresh Data"})]})]}),as=({managers:r={data:[]},companies:x=[],roles:y=[]})=>{var se,ie,re,oe,ae;const{flash:l}=Le().props,i=ve(),[n,H]=p.useState(""),[Se,N]=p.useState(!1),[U,J]=p.useState(null),[Ce,Me]=p.useState(""),[Ie,Ae]=p.useState("success"),[Te,B]=p.useState(!1),[_,K]=p.useState(0),[we,q]=p.useState(null),[f,Q]=p.useState(""),[j,X]=p.useState(""),[T,w]=p.useState("");p.useEffect(()=>{if(l!=null&&l.message){Me(l.message),Ae(l.type||"success"),B(!0);const t=setTimeout(()=>{B(!1)},5e3);return()=>clearTimeout(t)}},[l]);const ze=(t,s)=>{K(s),s===0?w(""):s===1?w("true"):s===2&&w("false")},Re=t=>{q(t.currentTarget)},Be=()=>{q(null)},_e=()=>{U&&(N(!0),fe.delete(route("admin.managers.destroy",U.id),{onSuccess:t=>{const s=t.props.flash&&t.props.flash.message?t.props.flash.message:"Asosiasi manager berhasil dihapus";G.fire({title:"Berhasil!",text:s,icon:"success",confirmButtonText:"OK",confirmButtonColor:i.palette.primary.main}),J(null),fe.reload({only:["managers"]})},onError:t=>{console.error("Error deleting manager:",t);let s="Gagal menghapus asosiasi manager: Terjadi kesalahan";t.message?s=t.message:t.errors&&Object.keys(t.errors).length>0&&(s=`Gagal menghapus asosiasi manager:
`+Object.values(t.errors).flat().join(`
`)),G.fire({title:"Error!",text:s,icon:"error",confirmButtonText:"OK",confirmButtonColor:i.palette.error.main})},onFinish:()=>N(!1)}))},We=[{field:"user",header:"Manager",sortable:!0,render:(t,s)=>{var c,d,h,u,b,C;return e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(A,{src:(c=s.user)==null?void 0:c.avatar,alt:(d=s.user)==null?void 0:d.name,sx:{width:42,height:42,border:s.is_primary?`2px solid ${i.palette.primary.main}`:`1px solid ${o(i.palette.divider,.2)}`,boxShadow:s.is_primary?`0 0 0 2px ${o(i.palette.primary.main,.2)}`:"none"},children:((u=(h=s.user)==null?void 0:h.name)==null?void 0:u.charAt(0).toUpperCase())||e.jsx(R,{})}),e.jsxs(a,{children:[e.jsx(m,{variant:"body1",fontWeight:600,children:(b=s.user)==null?void 0:b.name}),e.jsx(m,{variant:"caption",color:"text.secondary",children:(C=s.user)==null?void 0:C.email})]})]})}},{field:"company",header:"Company",sortable:!0,render:(t,s)=>{var c,d,h,u;return e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(c=s.company)!=null&&c.logo?e.jsx(A,{src:s.company.logo,alt:(d=s.company)==null?void 0:d.name,variant:"rounded",sx:{width:36,height:36,border:`1px solid ${o(i.palette.divider,.2)}`}}):e.jsx(A,{variant:"rounded",sx:{width:36,height:36,bgcolor:o(i.palette.primary.main,.1),color:i.palette.primary.main},children:e.jsx(k,{})}),e.jsxs(a,{children:[e.jsx(m,{variant:"body2",fontWeight:500,children:(h=s.company)==null?void 0:h.name}),e.jsx(m,{variant:"caption",color:"text.secondary",children:((u=s.company)==null?void 0:u.industry)||"No industry specified"})]})]})}},{field:"is_primary",header:"Role",sortable:!0,render:t=>e.jsx(v,{label:t?"Primary Manager":"Secondary Manager",color:t?"primary":"default",size:"small",variant:t?"filled":"outlined",icon:t?e.jsx(M,{}):e.jsx(F,{}),sx:{fontWeight:500,px:.5,"& .MuiChip-icon":{fontSize:"1rem"}}})},{field:"user.role",header:"User Role",render:(t,s)=>{var c,d;return e.jsx(v,{label:((d=(c=s.user)==null?void 0:c.role)==null?void 0:d.name)||"No Role",size:"small",color:"secondary",variant:"outlined",sx:{fontWeight:500}})}},{field:"user.is_active",header:"Status",sortable:!0,render:(t,s)=>{var c,d,h,u,b;return e.jsx(v,{label:(c=s.user)!=null&&c.is_active?"Active":"Inactive",color:(d=s.user)!=null&&d.is_active?"success":"default",size:"small",variant:(h=s.user)!=null&&h.is_active?"filled":"outlined",sx:{fontWeight:500,backgroundColor:(u=s.user)!=null&&u.is_active?o(i.palette.success.main,.1):o(i.palette.action.disabled,.1),color:(b=s.user)!=null&&b.is_active?i.palette.success.dark:i.palette.text.disabled}})}},{field:"created_at",header:"Added On",sortable:!0,render:t=>{const s=new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return e.jsx(m,{variant:"body2",color:"text.secondary",children:s})}}],W=p.useMemo(()=>{var t;return((t=r==null?void 0:r.data)==null?void 0:t.filter(s=>{var C,ne,le,ce,de,pe,me,xe,he,ue;const c=((ne=(C=s.user)==null?void 0:C.name)==null?void 0:ne.toLowerCase().includes(n.toLowerCase()))||((ce=(le=s.user)==null?void 0:le.email)==null?void 0:ce.toLowerCase().includes(n.toLowerCase()))||((pe=(de=s.company)==null?void 0:de.name)==null?void 0:pe.toLowerCase().includes(n.toLowerCase())),d=!f||((xe=(me=s.company)==null?void 0:me.id)==null?void 0:xe.toString())===f,h=!j||((ue=(he=s.user)==null?void 0:he.role_id)==null?void 0:ue.toString())===j,u=s.is_primary!==void 0?s.is_primary.toString():"";return c&&d&&h&&(!T||u===T)}))||[]},[r==null?void 0:r.data,n,f,j,T]),Y=((se=r==null?void 0:r.data)==null?void 0:se.length)||0,Z=((re=(ie=r==null?void 0:r.data)==null?void 0:ie.filter(t=>t.is_primary===!0))==null?void 0:re.length)||0,ee=((ae=(oe=r==null?void 0:r.data)==null?void 0:oe.filter(t=>t.is_primary===!1))==null?void 0:ae.length)||0,ke=t=>e.jsxs(a,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(S,{title:"View User",children:e.jsx(g,{size:"small",component:z,href:route("admin.users.show",t.user_id),sx:{color:i.palette.info.main,bgcolor:o(i.palette.info.main,.1),"&:hover":{bgcolor:o(i.palette.info.main,.2)}},children:e.jsx(Ye,{fontSize:"small"})})}),e.jsx(S,{title:"View Company",children:e.jsx(g,{size:"small",component:z,href:route("admin.companies.show",t.company_id),sx:{color:i.palette.primary.main,bgcolor:o(i.palette.primary.main,.1),"&:hover":{bgcolor:o(i.palette.primary.main,.2)}},children:e.jsx(k,{fontSize:"small"})})}),e.jsx(S,{title:"Edit",children:e.jsx(g,{size:"small",component:z,href:route("admin.managers.edit",t.id),sx:{color:i.palette.warning.main,bgcolor:o(i.palette.warning.main,.1),"&:hover":{bgcolor:o(i.palette.warning.main,.2)}},children:e.jsx(Ze,{fontSize:"small"})})}),e.jsx(S,{title:"Remove",children:e.jsx(g,{size:"small",onClick:()=>{J(t),tt(t,_e)},sx:{color:i.palette.error.main,bgcolor:o(i.palette.error.main,.1),"&:hover":{bgcolor:o(i.palette.error.main,.2)}},children:e.jsx(et,{fontSize:"small"})})})]}),te=()=>{H(""),Q(""),X(""),K(0),w("")};return e.jsxs(Oe,{children:[e.jsx(Pe,{title:"Company Managers"}),e.jsxs(a,{sx:{mb:4,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(A,{sx:{width:56,height:56,bgcolor:o(i.palette.primary.main,.1),color:i.palette.primary.main},children:e.jsx(M,{fontSize:"large"})}),e.jsxs(a,{children:[e.jsx(m,{variant:"h4",component:"h1",fontWeight:700,children:"Company Managers"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"Manage and assign users to handle company profiles and job listings"})]})]}),e.jsx(V.div,{whileHover:{scale:1.03},whileTap:{scale:.98},children:e.jsx(je,{variant:"contained",startIcon:e.jsx(Ge,{}),component:z,href:route("admin.managers.create"),size:"large",sx:{px:3},children:"Add Manager"})})]}),e.jsx($e,{children:Te&&e.jsx(V.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(Fe,{severity:Ie,onClose:()=>B(!1),sx:{mb:3},children:Ce})})}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:3,mb:3},children:[e.jsx(O,{icon:e.jsx(R,{}),count:Y,label:"Total Managers",color:"primary",delay:0}),e.jsx(O,{icon:e.jsx(M,{}),count:Z,label:"Primary Managers",color:"success",delay:.1}),e.jsx(O,{icon:e.jsx(F,{}),count:ee,label:"Secondary Managers",color:"info",delay:.2})]}),e.jsxs(be,{elevation:0,sx:{borderRadius:3,boxShadow:"0 2px 10px rgba(0,0,0,0.04)",border:`1px solid ${o(i.palette.divider,.1)}`,overflow:"hidden",mb:4},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,pl:3,borderBottom:`1px solid ${o(i.palette.divider,.1)}`},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(M,{color:"primary"}),e.jsx(m,{variant:"h6",fontWeight:600,children:"Manage Company Assignments"})]}),e.jsxs(a,{children:[e.jsx(S,{title:"More Actions",children:e.jsx(g,{onClick:Re,children:e.jsx(Ne,{})})}),e.jsx(st,{anchorEl:we,onClose:Be})]})]}),e.jsx(a,{sx:{borderBottom:1,borderColor:"divider",px:2},children:e.jsxs(Ue,{value:_,onChange:ze,"aria-label":"manager tabs",sx:{".MuiTabs-indicator":{height:3,borderTopLeftRadius:3,borderTopRightRadius:3},".MuiTab-root":{textTransform:"none",fontWeight:600,px:3,py:1.5}},children:[e.jsx(E,{label:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(R,{}),e.jsx("span",{children:"All Managers"}),e.jsx(v,{label:Y,size:"small",sx:{ml:.5,height:20,fontSize:"0.7rem",fontWeight:600}})]})}),e.jsx(E,{label:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(M,{}),e.jsx("span",{children:"Primary"}),e.jsx(v,{label:Z,size:"small",color:"primary",sx:{ml:.5,height:20,fontSize:"0.7rem",fontWeight:600}})]})}),e.jsx(E,{label:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{}),e.jsx("span",{children:"Secondary"}),e.jsx(v,{label:ee,size:"small",color:"info",sx:{ml:.5,height:20,fontSize:"0.7rem",fontWeight:600}})]})})]})}),e.jsx(a,{sx:{p:2,borderBottom:`1px solid ${o(i.palette.divider,.1)}`},children:e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(Je,{fullWidth:!0,placeholder:"Search by manager name, email, or company...",value:n,onChange:t=>H(t.target.value),InputProps:{startAdornment:e.jsx(D,{position:"start",children:e.jsx(He,{fontSize:"small"})}),sx:{borderRadius:2,bgcolor:o(i.palette.common.black,.02)}},variant:"outlined",size:"small"})}),e.jsx(I,{item:!0,xs:6,md:3,children:e.jsx(ye,{fullWidth:!0,value:f,onChange:t=>Q(t.target.value),options:[{value:"",label:"All Companies"},...(x||[]).map(t=>({value:t.id.toString(),label:t.name}))],placeholder:"All Companies",size:"small",startAdornment:e.jsx(D,{position:"start",children:e.jsx(k,{fontSize:"small",color:"action"})})})}),e.jsx(I,{item:!0,xs:6,md:3,children:e.jsx(ye,{fullWidth:!0,value:j,onChange:t=>X(t.target.value),options:[{value:"",label:"All Roles"},...(y||[]).map(t=>({value:t.id.toString(),label:t.name}))],placeholder:"All Roles",size:"small",startAdornment:e.jsx(D,{position:"start",children:e.jsx(R,{fontSize:"small",color:"action"})})})}),e.jsx(I,{item:!0,xs:12,md:1,sx:{display:"flex",justifyContent:{xs:"flex-start",md:"center"}},children:e.jsx(S,{title:"Reset all filters",children:e.jsx("span",{children:e.jsx(g,{color:"primary",onClick:te,disabled:!n&&!f&&!j&&_===0,size:"small",sx:{border:`1px solid ${o(i.palette.primary.main,.2)}`,borderRadius:2},children:e.jsx(ge,{fontSize:"small"})})})})})]})}),e.jsxs(a,{sx:{px:3,py:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{children:e.jsxs(m,{variant:"body2",color:"text.secondary",children:[W.length," ",W.length===1?"result":"results"," found",n||f||j||T?" with current filters":""]})}),(n||f||j||_>0)&&e.jsx(je,{variant:"text",size:"small",startIcon:e.jsx(ge,{fontSize:"small"}),onClick:te,children:"Clear Filters"})]}),e.jsx(a,{sx:{px:2,pb:2},children:e.jsx(be,{elevation:0,sx:{borderRadius:2,border:`1px solid ${o(i.palette.divider,.1)}`,overflow:"hidden"},children:e.jsx(Ee,{data:W,columns:We,actions:ke,pagination:!0,paginationInfo:r==null?void 0:r.meta,baseRoute:"admin.managers.index",emptyMessage:"No managers found with the current filters.",sx:{".MuiTableHead-root":{bgcolor:o(i.palette.primary.main,.02)},".MuiTableCell-head":{fontWeight:600},".MuiTableRow-root:hover":{bgcolor:o(i.palette.primary.main,.03)}},loading:Se})})})]})]})};export{as as default};
