import{j as e,q as te,r as u,f as c,a as ie,b as d}from"./app-DbtvrzCH.js";import{D as ae,C as ne,P as le}from"./react-beautiful-dnd.esm-D38ohTwd.js";import{I as b,B as de,D as ce}from"./Button-CgCKgwRd.js";import{S as xe}from"./SearchBar-CuK-1Vse.js";import{S as pe}from"./Select-GW1WnAoX.js";import{D as me}from"./Dropdown-BRdAFtyH.js";import{A as he}from"./Alert-BWXyQfZl.js";import{S as be}from"./Spinner-3KcxgD8W.js";import{L as ge}from"./Layout-nP23ILEi.js";import{c as D,u as fe,B as o,T as n,P as T}from"./Button-B_2tu0cn.js";import{B as L}from"./ButtonGroup-CCy93Gk6.js";import{T as p,S as je}from"./Work-bK6ZZ-Qp.js";import{F as $}from"./FileDownload-CzpwCIB0.js";import{G as m}from"./Grid-6uBMiZYW.js";import{C as v}from"./Card-DBrS13VS.js";import{C as y}from"./CardContent-BDcyNa-E.js";import{B as ue}from"./Badge-DGpL2cWn.js";import{E as R}from"./Event-JhFTkm8A.js";import{W as k}from"./WorkOutline-B3w2_Dhf.js";import{S as ve}from"./Stack-CsubfPvX.js";import{T as ye}from"./Tune-Df3KyvXQ.js";import{R as Se}from"./Sidebar-sw6YawgY.js";import{C as O,A as we}from"./Slide-DsAvN5qg.js";import{S as Y}from"./Star-C0Yn4_6R.js";import{M as Ie}from"./MoreVert-DyEsPTVO.js";import{D as Ce}from"./DragIndicator-DIhAE6IG.js";import{E as G}from"./Email-Cw9EmbE7.js";import{S as ze}from"./StarBorder-D-XRe2Gf.js";import"./tiny-invariant-BaFNuDhB.js";import"./FilterList-D0xY2zDR.js";import"./LocationOn-BAU5EuQK.js";import"./BusinessCenter-CGvXca3O.js";import"./Close-BbHhCS19.js";import"./InputLabel-DUQX8vmT.js";import"./Select-DuuFGO1T.js";import"./Alert-D22fyny9.js";import"./Close-Dpj-0MLQ.js";import"./AlertTitle-CTfZdqfc.js";import"./AccessTime-as3EkDL5.js";import"./ArrowForward-jR7HuMfl.js";import"./Error-D1IMUwky.js";import"./Warning-CYk4HSbS.js";import"./Info-j9m1PK-Q.js";import"./CheckCircle-nvk-SVVX.js";import"./LinearProgress-Cp3Ye6up.js";import"./Footer-BBk2Lp_N.js";import"./Container-CHMV_DAY.js";import"./index-BJHsQb-H.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./People-KxvvNdCJ.js";const Re=D([e.jsx("path",{d:"M8 8H6v7c0 1.1.9 2 2 2h9v-2H8z"},"0"),e.jsx("path",{d:"M20 3h-8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 8h-8V7h8zM4 12H2v7c0 1.1.9 2 2 2h9v-2H4z"},"1")]),ke=D(e.jsx("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M10 17H5v-2h5zm0-4H5v-2h5zm0-4H5V7h5zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42z"})),De=D(e.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),Ar=()=>{const{applications:a,stages:C,statuses:Ae,jobs:K,flash:S}=te().props,l=fe(),[g,q]=u.useState({search:"",status:"",job:""}),[J,A]=u.useState(!1),[f,z]=u.useState({});u.useEffect(()=>{if(C&&a){const s={};C.forEach(r=>{s[r.id]={id:r.id,name:r.name,color:r.color,items:a.filter(i=>i.current_stage_id===r.id)}}),s.unstaged={id:"unstaged",name:"Unstaged",color:"#9e9e9e",items:a.filter(r=>!r.current_stage_id)},z(s)}},[C,a]);const W=(s,r)=>{q(i=>({...i,[s]:r}))};u.useEffect(()=>{const s=Object.fromEntries(Object.entries(g).filter(([r,i])=>i!==""));A(!0),c.get(route("manager.applications.kanban"),s,{preserveState:!0,replace:!0,only:["applications"],onSuccess:()=>A(!1)})},[g]);const U=s=>{if(!s.destination)return;const{source:r,destination:i,draggableId:_}=s;if(r.droppableId===i.droppableId&&r.index===i.index)return;const t=f[r.droppableId],w=f[i.droppableId];if(r.droppableId===i.droppableId){const x=Array.from(t.items),[h]=x.splice(r.index,1);x.splice(i.index,0,h),z({...f,[r.droppableId]:{...t,items:x}})}else{const x=Array.from(t.items),h=Array.from(w.items),[j]=x.splice(r.index,1),I={...j,current_stage_id:i.droppableId==="unstaged"?null:parseInt(i.droppableId)};h.splice(i.index,0,I),z({...f,[r.droppableId]:{...t,items:x},[i.droppableId]:{...w,items:h}}),c.post(route("manager.applications.update-stage",j.id),{stage_id:i.droppableId==="unstaged"?null:i.droppableId},{preserveScroll:!0,preserveState:!0})}},X=()=>{c.get(route("manager.applications.export"),g)},N=s=>{c.post(route("manager.applications.toggle-favorite-post",s),{},{preserveScroll:!0,preserveState:!0})},Q=s=>[{label:"View Application",onClick:()=>c.visit(route("manager.applications.show",s.id)),icon:e.jsx(G,{fontSize:"small"})},{label:"Schedule Interview",onClick:()=>c.visit(route("manager.events.create",{application_id:s.id})),icon:e.jsx(R,{fontSize:"small"})},{divider:!0},{label:s.is_favorite?"Remove from Favorites":"Add to Favorites",onClick:()=>N(s.id),color:s.is_favorite?"warning":"inherit",icon:s.is_favorite?e.jsx(ze,{fontSize:"small"}):e.jsx(Y,{fontSize:"small"})},{divider:!0},{label:"Download Resume",onClick:()=>window.open(s.resume_url,"_blank"),disabled:!s.resume,icon:e.jsx($,{fontSize:"small"})}],Z=(a==null?void 0:a.length)||0,ee=(a==null?void 0:a.filter(s=>{var r;return((r=s.status)==null?void 0:r.name)==="Pending"}).length)||0,re=(a==null?void 0:a.filter(s=>{var r;return((r=s.status)==null?void 0:r.name)==="Interviewing"}).length)||0,se=(a==null?void 0:a.filter(s=>{var r;return((r=s.status)==null?void 0:r.name)==="Shortlisted"}).length)||0;return e.jsxs(ge,{children:[e.jsx(ie,{title:"Applications Kanban"}),e.jsxs(o,{sx:{background:"linear-gradient(135deg, rgba(15, 118, 110, 0.08) 0%, rgba(20, 184, 166, 0.15) 100%)",py:4,borderRadius:"1rem",px:3,mb:4,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",border:"1px solid",borderColor:"divider"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(o,{children:[e.jsx(n,{variant:"h5",fontWeight:"600",gutterBottom:!0,children:"Kanban Board"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Visualize and manage applications through different hiring stages using drag-and-drop."})]}),e.jsxs(o,{sx:{display:"flex",gap:2},children:[e.jsxs(L,{variant:"outlined",size:"small",sx:{bgcolor:"background.paper",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e.jsx(p,{title:"List View",children:e.jsx(b,{color:"default",onClick:()=>c.visit(route("manager.applications.index")),sx:{borderRadius:0},children:e.jsx(De,{})})}),e.jsx(p,{title:"Kanban View",children:e.jsx(b,{color:"primary",sx:{borderRadius:0},children:e.jsx(Re,{})})})]}),e.jsx(p,{title:"Export Applications",children:e.jsx(de,{variant:"contained",startIcon:e.jsx($,{}),onClick:X,size:"small",sx:{borderRadius:"8px"},children:"Export"})})]})]}),e.jsxs(m,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{sx:{borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"none",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-3px)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.05)"}},children:e.jsxs(y,{sx:{p:2.5},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{color:"text.secondary",variant:"body2",children:"Total Applications"}),e.jsx(o,{sx:{p:1,borderRadius:"50%",bgcolor:d(l.palette.primary.main,.1)},children:e.jsx(ue,{fontSize:"small",color:"primary"})})]}),e.jsx(n,{variant:"h4",sx:{mt:1,fontWeight:"bold"},children:Z})]})})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{sx:{borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"none",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-3px)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.05)"}},children:e.jsxs(y,{sx:{p:2.5},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{color:"text.secondary",variant:"body2",children:"Pending"}),e.jsx(o,{sx:{p:1,borderRadius:"50%",bgcolor:d(l.palette.warning.main,.1)},children:e.jsx(ke,{fontSize:"small",color:"warning"})})]}),e.jsx(n,{variant:"h4",sx:{mt:1,fontWeight:"bold"},children:ee})]})})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{sx:{borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"none",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-3px)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.05)"}},children:e.jsxs(y,{sx:{p:2.5},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{color:"text.secondary",variant:"body2",children:"Interviewing"}),e.jsx(o,{sx:{p:1,borderRadius:"50%",bgcolor:d(l.palette.info.main,.1)},children:e.jsx(R,{fontSize:"small",color:"info"})})]}),e.jsx(n,{variant:"h4",sx:{mt:1,fontWeight:"bold"},children:re})]})})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{sx:{borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"none",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-3px)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.05)"}},children:e.jsxs(y,{sx:{p:2.5},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(n,{color:"text.secondary",variant:"body2",children:"Shortlisted"}),e.jsx(o,{sx:{p:1,borderRadius:"50%",bgcolor:d(l.palette.success.main,.1)},children:e.jsx(k,{fontSize:"small",color:"success"})})]}),e.jsx(n,{variant:"h4",sx:{mt:1,fontWeight:"bold",color:l.palette.success.main},children:se})]})})})]})]}),(S==null?void 0:S.success)&&e.jsx(he,{severity:"success",title:"Success",onClose:()=>c.reload({only:["flash"]}),sx:{mb:3},children:S.success}),e.jsx(T,{elevation:0,sx:{p:2.5,mb:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.03)"},children:e.jsxs(m,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(m,{item:!0,xs:12,md:5,children:e.jsx(xe,{placeholder:"Search applicants",value:g.search,onChange:s=>W("search",s.target.value),size:"small",startIcon:e.jsx(je,{fontSize:"small"}),sx:{borderRadius:"0.75rem"}})}),e.jsx(m,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{options:K.map(s=>({value:s.id,label:s.title})),value:g.job,onChange:s=>W("job",s.target.value),placeholder:"Job Position",size:"small",startIcon:e.jsx(k,{fontSize:"small"}),sx:{borderRadius:"0.75rem"}})}),e.jsx(m,{item:!0,xs:12,md:1,sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"}},children:e.jsxs(ve,{direction:"row",spacing:1,children:[e.jsx(p,{title:"More Filters",children:e.jsx(b,{color:"primary",sx:{bgcolor:d(l.palette.primary.main,.08),"&:hover":{bgcolor:d(l.palette.primary.main,.15)}},children:e.jsx(ye,{})})}),e.jsx(p,{title:"Refresh",children:e.jsx(b,{color:"primary",onClick:()=>c.reload({only:["applications"]}),sx:{bgcolor:d(l.palette.primary.main,.08),"&:hover":{bgcolor:d(l.palette.primary.main,.15)}},children:e.jsx(Se,{})})})]})})]})}),J?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(be,{message:"Loading applications..."})}):e.jsx(ae,{onDragEnd:U,children:e.jsx(o,{sx:{display:"flex",overflowX:"auto",pb:2,pt:1,px:1,minHeight:"calc(100vh - 460px)","&::-webkit-scrollbar":{height:8},"&::-webkit-scrollbar-thumb":{bgcolor:d(l.palette.primary.main,.2),borderRadius:4},"&::-webkit-scrollbar-track":{bgcolor:d(l.palette.primary.main,.05),borderRadius:4}},children:Object.entries(f).map(([s,r])=>e.jsxs(T,{sx:{minWidth:320,maxWidth:320,mx:1,bgcolor:`${r.color}05`,border:`1px solid ${r.color}30`,borderRadius:"1rem",display:"flex",flexDirection:"column",overflow:"hidden",height:"fit-content",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.03)",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},elevation:0,children:[e.jsx(o,{sx:{p:2,bgcolor:`${r.color}15`,borderBottom:`1px solid ${r.color}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(o,{display:"flex",alignItems:"center",children:[e.jsx(n,{variant:"body1",fontWeight:"600",color:r.color,children:r.name}),e.jsx(O,{label:r.items.length,size:"small",sx:{ml:1,bgcolor:`${r.color}30`,color:r.color,fontWeight:"bold",height:20,fontSize:"0.75rem",borderRadius:"10px"}})]})}),e.jsx(ne,{droppableId:s,children:(i,_)=>e.jsxs(o,{...i.droppableProps,ref:i.innerRef,sx:{p:2,minHeight:100,backgroundColor:_.isDraggingOver?`${r.color}10`:"transparent",transition:"background-color 0.2s ease-in-out",height:"100%"},children:[r.items.length===0&&e.jsx(o,{sx:{height:100,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"0.75rem",border:"1px dashed",borderColor:`${r.color}40`,p:2},children:e.jsx(n,{variant:"body2",color:"text.secondary",align:"center",children:"Drag applications here"})}),r.items.map((t,w)=>e.jsx(le,{draggableId:t.id.toString(),index:w,children:(x,h)=>{var j,I,B,H,V,E,M,P,F;return e.jsx(v,{ref:x.innerRef,...x.draggableProps,...x.dragHandleProps,sx:{mb:2,borderRadius:"0.75rem",boxShadow:h.isDragging?"0 8px 16px rgba(0,0,0,0.1)":"0 2px 8px rgba(0,0,0,0.05)",transform:h.isDragging?"rotate(1deg) scale(1.02)":"none",transition:"box-shadow 0.2s, transform 0.2s",border:t.is_favorite?`1px solid ${l.palette.warning.main}`:"1px solid rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:e.jsxs(y,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(we,{src:((j=t.user)==null?void 0:j.avatar)||"/images/avatars/default.png",sx:{width:40,height:40,border:"2px solid",borderColor:d(l.palette.primary.main,.2)}}),e.jsxs(o,{children:[e.jsx(n,{variant:"body2",fontWeight:"600",children:(I=t.user)==null?void 0:I.name}),e.jsx(n,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{maxWidth:180,display:"block"},children:(B=t.user)==null?void 0:B.email})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[t.is_favorite&&e.jsx(p,{title:"Favorite",children:e.jsx(Y,{fontSize:"small",sx:{color:l.palette.warning.main,mr:.5}})}),e.jsx(me,{buttonType:"icon",icon:e.jsx(Ie,{fontSize:"small"}),items:Q(t)})]})]}),e.jsx(ce,{sx:{my:1.5}}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(k,{fontSize:"small",color:"primary",sx:{mr:1}}),e.jsx(p,{title:(H=t.job)==null?void 0:H.title,children:e.jsx(n,{variant:"body2",fontWeight:"500",noWrap:!0,children:(V=t.job)==null?void 0:V.title})})]}),e.jsxs(n,{variant:"caption",color:"text.secondary",display:"block",mb:1.5,children:[(E=t.job)==null?void 0:E.location," • Dilamar ",new Date(t.created_at).toLocaleDateString()]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(O,{label:(M=t.status)==null?void 0:M.name,size:"small",sx:{bgcolor:`${(P=t.status)==null?void 0:P.color}20`,color:(F=t.status)==null?void 0:F.color,fontWeight:500,borderRadius:"12px",fontSize:"0.7rem",height:24}}),e.jsx(o,{sx:{display:"flex",alignItems:"center"},children:e.jsx(Ce,{fontSize:"small",sx:{color:oe=>d(oe.palette.text.secondary,.5),opacity:.5,"&:hover":{opacity:1}}})})]}),e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:e.jsxs(L,{variant:"outlined",size:"small",sx:{"& .MuiButtonGroup-grouped":{minWidth:"auto",borderRadius:"8px",px:1}},children:[e.jsx(p,{title:"View Application",children:e.jsx(b,{size:"small",color:"primary",onClick:()=>c.visit(route("manager.applications.show",t.id)),sx:{borderRadius:"8px 0 0 8px"},children:e.jsx(G,{fontSize:"small"})})}),e.jsx(p,{title:"Schedule Interview",children:e.jsx(b,{size:"small",color:"primary",onClick:()=>c.visit(route("manager.events.create",{application_id:t.id})),sx:{borderRadius:"0 8px 8px 0"},children:e.jsx(R,{fontSize:"small"})})})]})})]})})}},t.id)),i.placeholder]})})]},s))})})]})};export{Ar as default};
