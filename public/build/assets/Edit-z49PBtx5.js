import{r as D,S as w,j as e,a as F,J as x}from"./app-DbtvrzCH.js";import{L}from"./Layout-nP23ILEi.js";import{y as p}from"./index-BnDXrXRt.js";import{C as W}from"./Container-CHMV_DAY.js";import{P as S,T as n,B as a,a as u}from"./Button-B_2tu0cn.js";import{D as B,I as E}from"./Button-CgCKgwRd.js";import{T as d}from"./TextField-BKjSZQPY.js";import{F as R,I as G,a as j}from"./InputLabel-DUQX8vmT.js";import{S as I}from"./Select-DuuFGO1T.js";import{M as U}from"./Work-bK6ZZ-Qp.js";import{A as k}from"./AdapterDateFns-D53_zNrW.js";import{C as A}from"./Card-DBrS13VS.js";import{C as M}from"./CardMedia-BfmN9CJc.js";import{D as J}from"./DeleteOutline-B2UiZQZ-.js";import{C as z}from"./CloudUpload-vL1lrGKt.js";import{F as H}from"./FormControlLabel-DEPIK6dM.js";import{S as N}from"./Switch-DiBnIsap.js";import{A as q}from"./ArrowBack-BlJGXhv6.js";import{L as O}from"./useMobilePicker-xnour5BQ.js";import{D as f}from"./DatePicker-B-1PjIjJ.js";import"./Sidebar-sw6YawgY.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-BJHsQb-H.js";import"./Slide-DsAvN5qg.js";import"./CheckCircle-nvk-SVVX.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./Info-j9m1PK-Q.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";import"./Footer-BBk2Lp_N.js";import"./toDate-DQ4lCuA9.js";import"./startOfMonth-T6FU0C-h.js";import"./en-US-DjmIwZ1X.js";import"./format-Bimm2Xz4.js";import"./endOfDay-CxCfia3b.js";import"./endOfMonth-CEPzkpce.js";import"./SwitchBase-BHRWgqGq.js";import"./index-DDaWyaml.js";import"./useThemeProps-DZvn-Cy9.js";import"./DialogContent-CpDcnQgJ.js";import"./visuallyHidden-Dan1xhjv.js";import"./InputAdornment-Vh23wNde.js";function ke({auth:g,portfolioItem:o,types:b}){const[m,c]=D.useState(o.thumbnail||null),{data:s,setData:i,put:y,errors:t,processing:v}=w({title:o.title||"",description:o.description||"",project_url:o.project_url||"",repository_url:o.repository_url||"",thumbnail:null,start_date:o.start_date?new Date(o.start_date):null,end_date:o.end_date?new Date(o.end_date):null,type:o.type||"project",is_featured:o.is_featured||!1}),_=r=>{r.preventDefault(),y(route("candidate.portfolio.update",o.id),{onSuccess:()=>{p.success("Portfolio item updated successfully")},onError:l=>{console.error(l),p.error("Failed to update portfolio item")}})},C=r=>{const l=r.target.files[0];if(!l)return;if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(l.type)){p.error("Please upload a valid image file (JPG, PNG, or GIF)");return}if(l.size>2*1024*1024){p.error("Image size should be less than 2MB");return}i("thumbnail",l);const h=new FileReader;h.onload=P=>{c(P.target.result)},h.readAsDataURL(l)},T=()=>{i("thumbnail",null),c(null)};return e.jsxs(L,{user:g.user,header:e.jsxs(a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(n,{variant:"h5",component:"h1",fontWeight:600,children:"Edit Portfolio Item"}),e.jsx(u,{variant:"outlined",startIcon:e.jsx(q,{}),component:x,href:route("candidate.portfolio.index"),children:"Back to Portfolio"})]}),children:[e.jsx(F,{title:"Edit Portfolio Item"}),e.jsx(W,{maxWidth:"lg",children:e.jsxs(S,{elevation:0,sx:{p:3,mt:3,borderRadius:2,border:"1px solid",borderColor:"divider"},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,fontWeight:600,children:"Edit Project Details"}),e.jsx(n,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Update information about your project, open source contribution, or work experience."}),e.jsx(B,{sx:{my:2}}),e.jsxs(a,{component:"form",onSubmit:_,sx:{mt:3},children:[e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:"1fr",gap:3},children:[e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"8fr 4fr"},gap:3},children:[e.jsx(d,{fullWidth:!0,label:"Project Title",name:"title",value:s.title,onChange:r=>i("title",r.target.value),error:!!t.title,helperText:t.title,required:!0}),e.jsxs(R,{fullWidth:!0,error:!!t.type,children:[e.jsx(G,{id:"type-label",children:"Type"}),e.jsx(I,{labelId:"type-label",id:"type",value:s.type,label:"Type",onChange:r=>i("type",r.target.value),children:Object.entries(b).map(([r,l])=>e.jsx(U,{value:r,children:l},r))}),t.type&&e.jsx(j,{children:t.type})]})]}),e.jsx(a,{children:e.jsx(d,{fullWidth:!0,label:"Description",name:"description",value:s.description,onChange:r=>i("description",r.target.value),error:!!t.description,helperText:t.description,multiline:!0,rows:4})}),e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsx(d,{fullWidth:!0,label:"Project URL",name:"project_url",value:s.project_url,onChange:r=>i("project_url",r.target.value),error:!!t.project_url,helperText:t.project_url||"Live demo or published URL",placeholder:"https://example.com"}),e.jsx(d,{fullWidth:!0,label:"Repository URL",name:"repository_url",value:s.repository_url,onChange:r=>i("repository_url",r.target.value),error:!!t.repository_url,helperText:t.repository_url||"GitHub, GitLab, etc.",placeholder:"https://github.com/username/repo"})]}),e.jsx(O,{dateAdapter:k,children:e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsx(f,{label:"Start Date",value:s.start_date,onChange:r=>i("start_date",r),renderInput:r=>e.jsx(d,{...r,fullWidth:!0,error:!!t.start_date,helperText:t.start_date||"When did you start this project?"})}),e.jsx(f,{label:"End Date",value:s.end_date,onChange:r=>i("end_date",r),renderInput:r=>e.jsx(d,{...r,fullWidth:!0,error:!!t.end_date,helperText:t.end_date||"Leave empty if ongoing"})})]})}),e.jsxs(a,{children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Project Thumbnail"}),m?e.jsx(a,{sx:{mb:2},children:e.jsxs(A,{sx:{maxWidth:300,position:"relative"},children:[e.jsx(M,{component:"img",height:"180",image:m,alt:"Thumbnail preview",onError:r=>{console.error("Image load error"),r.target.src="/default-project.jpg"}}),e.jsx(E,{sx:{position:"absolute",top:8,right:8,bgcolor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{bgcolor:"rgba(0, 0, 0, 0.7)"}},onClick:T,children:e.jsx(J,{})})]})}):e.jsxs(u,{variant:"outlined",component:"label",startIcon:e.jsx(z,{}),sx:{mb:2},children:["Upload Thumbnail",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:C})]}),t.thumbnail&&e.jsx(j,{error:!0,children:t.thumbnail}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Recommended: 1200Ã—630 pixels, max 2MB (JPG, PNG, GIF)"})]}),e.jsxs(a,{children:[e.jsx(H,{control:e.jsx(N,{checked:s.is_featured,onChange:r=>i("is_featured",r.target.checked),name:"is_featured",color:"primary"}),label:"Feature this project in your portfolio"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Featured projects will appear at the top of your portfolio"})]})]}),e.jsxs(a,{sx:{mt:3,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(u,{variant:"outlined",component:x,href:route("candidate.portfolio.index"),children:"Cancel"}),e.jsx(u,{type:"submit",variant:"contained",color:"primary",disabled:v,children:"Update Project"})]})]})]})})]})}export{ke as default};
