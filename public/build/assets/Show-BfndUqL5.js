import{j as e,q as V,r as j,J as h,f as R}from"./app-BUVb_nAj.js";import{C as H}from"./Card-vSg9PuMO.js";import{B as m,D as w,L as I}from"./Button-DzGhUBn7.js";import{M as k}from"./Modal-B2mKmmvX.js";import{A as J}from"./Alert-W_CUoSxB.js";import{T as N}from"./Tabs-CYePqLeI.js";import{B as o}from"./Badge-Z58iZkOl.js";import{T as $}from"./Table-DMYZ1T9r.js";import{L as u}from"./Layout-DnkF-NCm.js";import{c as F,B as s,P as v,T as x}from"./Button-DFxjcZ8p.js";import{S as O}from"./Stack-DUsTNRwi.js";import{B as b,L as l,a,b as n,W as U}from"./Work-CLEsMByH.js";import{A as q}from"./ArrowBack-Cgi6G0-j.js";import{E as G}from"./Edit-D-W3BsdZ.js";import{D as K}from"./Delete-DjrVMKuP.js";import{P as W}from"./Person-5k5xBlAT.js";import{A as P}from"./Slide-DYtCGdXj.js";import{E as A}from"./Email-E4u4F7F-.js";import{P as M}from"./Phone-_DVlyzHf.js";import{C as Q}from"./CalendarToday-CUHpeiFE.js";import{L as y}from"./LocationOn-CpujyWrU.js";import"./Card-D_rkxkaC.js";import"./MoreVert-PY4ZbxeC.js";import"./CardHeader-D023TrKm.js";import"./CardContent-DTmJK9ga.js";import"./DialogContent-D4sYn80t.js";import"./DialogTitle-DUJu7qVS.js";import"./Close-B7UDIhaS.js";import"./DialogContentText-B8PLj8LQ.js";import"./Alert-j9c9aQEr.js";import"./Close-CafbgWA1.js";import"./AlertTitle-CPDkbCwY.js";import"./AccessTime-DXhpyso9.js";import"./ArrowForward-Tz2ikYxH.js";import"./Error-CSPDIC8t.js";import"./Warning-BLg7sOqp.js";import"./Info-CdM9Lqya.js";import"./CheckCircle-Dd-oaFV0.js";import"./LinearProgress-3EBWbMR1.js";import"./Tabs-CQDMEBQN.js";import"./KeyboardArrowRight-By3nsvSL.js";import"./TableRow-BgPH6iWY.js";import"./Checkbox-DZaxlRGh.js";import"./SwitchBase-BRw57M3-.js";import"./TablePagination-C03w4OZ2.js";import"./LastPage-B2IJYsVY.js";import"./Select-Bh9V9k3o.js";import"./Sidebar-DGzgELZX.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-Dtg-WGcE.js";import"./Container-DEvTfuj0.js";import"./ChevronRight-FNylUib_.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";import"./Footer-DSErbOqA.js";const X=F(e.jsx("path",{d:"M17 11V3H7v4H3v14h8v-4h2v4h8V11zM7 19H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm4 4H9v-2h2zm0-4H9V9h2zm0-4H9V5h2zm4 8h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm4 12h-2v-2h2zm0-4h-2v-2h2z"})),Y=({manager:r,company:i,user:t})=>{var d,f,c,p;return e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsx(s,{sx:{flex:1},children:e.jsxs(v,{sx:{p:3,borderRadius:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(P,{src:t==null?void 0:t.avatar,alt:t==null?void 0:t.name,sx:{width:80,height:80},children:(d=t==null?void 0:t.name)==null?void 0:d.charAt(0).toUpperCase()}),e.jsxs(s,{children:[e.jsx(x,{variant:"h5",fontWeight:600,children:t==null?void 0:t.name}),e.jsx(x,{variant:"body1",color:"text.secondary",children:t==null?void 0:t.email}),e.jsxs(s,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(o,{label:((f=t==null?void 0:t.role)==null?void 0:f.name)||"No Role",color:"primary",size:"small",variant:"outlined"}),e.jsx(o,{label:t!=null&&t.is_active?"Active":"Inactive",color:t!=null&&t.is_active?"success":"default",size:"small"})]})]})]}),e.jsx(w,{sx:{my:2}}),e.jsxs(I,{disablePadding:!0,children:[(t==null?void 0:t.email)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(A,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Email",secondary:t.email})]}),((c=t==null?void 0:t.profile)==null?void 0:c.phone)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(M,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Phone",secondary:t.profile.phone})]}),e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(Q,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Joined",secondary:t!=null&&t.created_at?new Date(t.created_at).toLocaleDateString():"-"})]}),((p=t==null?void 0:t.profile)==null?void 0:p.address)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(y,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Address",secondary:t.profile.address})]})]}),e.jsx(s,{sx:{mt:3},children:e.jsx(m,{variant:"outlined",startIcon:e.jsx(W,{}),component:h,href:route("admin.users.show",t==null?void 0:t.id),fullWidth:!0,children:"View Full User Profile"})})]})}),e.jsx(s,{sx:{flex:1},children:e.jsxs(v,{sx:{p:3,borderRadius:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(P,{src:i==null?void 0:i.logo,alt:i==null?void 0:i.name,variant:"rounded",sx:{width:80,height:80},children:e.jsx(b,{fontSize:"large"})}),e.jsxs(s,{children:[e.jsx(x,{variant:"h5",fontWeight:600,children:i==null?void 0:i.name}),e.jsx(x,{variant:"body1",color:"text.secondary",children:(i==null?void 0:i.industry)||"No Industry Specified"}),e.jsxs(s,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(o,{label:r!=null&&r.is_primary?"Primary Manager":"Secondary Manager",color:r!=null&&r.is_primary?"primary":"default",size:"small",variant:r!=null&&r.is_primary?"filled":"outlined"}),e.jsx(o,{label:i!=null&&i.is_active?"Active":"Inactive",color:i!=null&&i.is_active?"success":"default",size:"small"})]})]})]}),e.jsx(w,{sx:{my:2}}),e.jsxs(I,{disablePadding:!0,children:[(i==null?void 0:i.email)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(A,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Company Email",secondary:i.email})]}),(i==null?void 0:i.phone)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(M,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Company Phone",secondary:i.phone})]}),(i==null?void 0:i.website)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(X,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Website",secondary:e.jsx(h,{href:i.website.startsWith("http")?i.website:`https://${i.website}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(x,{variant:"body2",color:"primary",sx:{textDecoration:"none"},children:i.website})})})]}),(i==null?void 0:i.address)&&e.jsxs(l,{disablePadding:!0,sx:{py:1},children:[e.jsx(a,{sx:{minWidth:40},children:e.jsx(y,{fontSize:"small",color:"action"})}),e.jsx(n,{primary:"Address",secondary:i.address})]})]}),e.jsx(s,{sx:{mt:3},children:e.jsx(m,{variant:"outlined",startIcon:e.jsx(b,{}),component:h,href:route("admin.companies.show",i==null?void 0:i.id),fullWidth:!0,children:"View Full Company Profile"})})]})})]})},Z=({jobs:r})=>e.jsx(s,{children:!r||r.length===0?e.jsx(v,{sx:{p:4,borderRadius:2,textAlign:"center"},children:e.jsx(x,{variant:"body1",color:"text.secondary",children:"No jobs have been posted by this company yet."})}):e.jsx($,{columns:[{field:"title",header:"Job Title",render:(i,t)=>e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{fontSize:"small",color:"action"}),e.jsx(x,{variant:"body2",fontWeight:500,children:i})]})},{field:"location",header:"Location",render:i=>i||"-"},{field:"job_type",header:"Type",render:i=>e.jsx(o,{label:i,color:"primary",variant:"outlined",size:"small"})},{field:"status",header:"Status",render:(i,t)=>e.jsx(o,{label:i||(t!=null&&t.is_active?"Active":"Inactive"),color:i==="published"?"success":i==="archived"?"warning":i==="closed"?"error":"default",size:"small"})},{field:"submission_deadline",header:"Deadline",render:i=>i?new Date(i).toLocaleDateString():"-"}],data:r,actions:i=>e.jsx(m,{variant:"text",color:"primary",size:"small",component:h,href:route("admin.jobs.show",i.id),children:"View"}),emptyMessage:"No jobs found"})}),ti=()=>{var S;const{manager:r,company:i,user:t,jobs:d}=V().props,[f,c]=j.useState(!1),[p,g]=j.useState(!1),[C,z]=j.useState(!1),[_,D]=j.useState(""),[L,B]=j.useState("success"),T=[{label:"Overview",content:e.jsx(Y,{manager:r,company:i,user:t})},{label:`Company Jobs (${(d==null?void 0:d.length)||0})`,content:e.jsx(Z,{jobs:d||[]})}],E=()=>{g(!0),R.delete(route("admin.managers.destroy",r.id),{onSuccess:()=>{},onError:()=>{c(!1),D("Failed to remove manager association."),B("error"),z(!0),g(!1)}})};return e.jsxs(u,{children:[C&&e.jsx(J,{severity:L,onClose:()=>z(!1),sx:{mb:2},children:_}),e.jsx(H,{title:`Company Manager: ${t==null?void 0:t.name}`,icon:e.jsx(W,{}),action:e.jsxs(s,{sx:{display:"flex",gap:1},children:[e.jsx(m,{variant:"outlined",startIcon:e.jsx(q,{}),component:h,href:route("admin.managers.index"),children:"Back"}),e.jsx(m,{variant:"contained",startIcon:e.jsx(G,{}),color:"primary",component:h,href:route("admin.managers.edit",r==null?void 0:r.id),children:"Edit"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(K,{}),color:"error",onClick:()=>c(!0),children:"Remove"})]}),children:e.jsxs(s,{sx:{mb:3},children:[e.jsxs(O,{direction:"row",spacing:1,sx:{mb:3},children:[e.jsx(o,{label:r!=null&&r.is_primary?"Primary Manager":"Secondary Manager",color:r!=null&&r.is_primary?"primary":"default",size:"small"}),e.jsx(o,{label:i==null?void 0:i.name,color:"secondary",variant:"outlined",size:"small",icon:e.jsx(b,{fontSize:"small"})}),e.jsx(o,{label:((S=t==null?void 0:t.role)==null?void 0:S.name)||"No Role",color:"info",variant:"outlined",size:"small"})]}),e.jsx(N,{tabs:T,variant:"contained",padding:0})]})}),e.jsx(k,{open:f,onClose:()=>c(!1),title:"Remove Manager",description:`Are you sure you want to remove ${t==null?void 0:t.name} as a manager from ${i==null?void 0:i.name}? This action cannot be undone.`,confirmButton:!0,cancelButton:!0,confirmText:"Remove",confirmColor:"error",onConfirm:E,loading:p})]})};export{ti as default};
