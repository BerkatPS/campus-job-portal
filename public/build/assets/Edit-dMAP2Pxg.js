import{r as H,S as $,j as e,a as X,b as k}from"./app-DbtvrzCH.js";import{E as v}from"./index-pmeEE7sK.js";import{L as N}from"./Layout-nP23ILEi.js";import{u as Q,B as t,T as d,P,a as b}from"./Button-B_2tu0cn.js";import{A as V}from"./Alert-D22fyny9.js";import{T as c}from"./TextField-BKjSZQPY.js";import{F as x,I as h,a as u}from"./InputLabel-DUQX8vmT.js";import{S as p}from"./Select-DuuFGO1T.js";import{M as n}from"./Work-bK6ZZ-Qp.js";import{I as W}from"./InputAdornment-Vh23wNde.js";import{F as Y}from"./FormControlLabel-DEPIK6dM.js";import{S as Z}from"./Switch-DiBnIsap.js";import{D as g,I as ee}from"./Button-CgCKgwRd.js";import{A as re}from"./Add-DoOXNSNv.js";import{C as D}from"./Slide-DsAvN5qg.js";import{D as L}from"./DeleteOutline-B2UiZQZ-.js";import{S as M}from"./Stack-CsubfPvX.js";import"./Sidebar-sw6YawgY.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-BJHsQb-H.js";import"./Container-CHMV_DAY.js";import"./CheckCircle-nvk-SVVX.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./Info-j9m1PK-Q.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";import"./Footer-BBk2Lp_N.js";import"./Close-Dpj-0MLQ.js";import"./SwitchBase-BHRWgqGq.js";const y=o=>o?o.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."):"",B=o=>o?o.toString().replace(/\./g,""):"";function Le({job:o,companies:C=[],hiringStages:S=[],selectedStages:q=[],categories:A=[]}){const j=Q(),[f,R]=H.useState(""),E=r=>{let s;r.is_active===!0?s="active":r.status==="closed"?s="closed":s="draft";let m=r.salary_min?y(r.salary_min.toString()):"",_=r.salary_max?y(r.salary_max.toString()):"";return{title:r.title||"",company_id:r.company_id||"",description:r.description||"",requirements:r.requirements||"",responsibilities:r.responsibilities||"",benefits:r.benefits||"",location:r.location||"",job_type:r.job_type||"full_time",experience_level:r.experience_level||"entry",salary_min:m,salary_max:_,is_salary_visible:r.is_salary_visible||!1,vacancies:r.vacancies||"1",submission_deadline:r.submission_deadline||"",deadline:r.deadline||"",is_active:r.is_active||!1,status:s,category_id:r.category_id||"",skills:r.skills||[],hiring_stages:q||[]}},{data:a,setData:l,put:O,processing:I,errors:i}=$(E(o)),T=r=>{r.preventDefault();const s={...a,salary_min:B(a.salary_min),salary_max:B(a.salary_max)},m={...s,is_active:s.status==="active"};O(route("manager.jobs.update",o.id),m)},w=()=>{f.trim()!==""&&!a.skills.includes(f.trim())&&(l("skills",[...a.skills,f.trim()]),R(""))},F=r=>{l("skills",a.skills.filter(s=>s!==r))},z=r=>{r.key==="Enter"&&(r.preventDefault(),w())},K=r=>{a.hiring_stages.includes(r)||l("hiring_stages",[...a.hiring_stages,r])},J=r=>{l("hiring_stages",a.hiring_stages.filter(s=>s!==r))},G=r=>{if(r>0){const s=[...a.hiring_stages];[s[r],s[r-1]]=[s[r-1],s[r]],l("hiring_stages",s)}},U=r=>{if(r<a.hiring_stages.length-1){const s=[...a.hiring_stages];[s[r],s[r+1]]=[s[r+1],s[r]],l("hiring_stages",s)}};return e.jsxs(N,{children:[e.jsx(X,{title:`Edit: ${o.title}`}),e.jsx(t,{sx:{background:"linear-gradient(135deg, rgba(15, 118, 110, 0.08) 0%, rgba(20, 184, 166, 0.15) 100%)",py:4,borderRadius:"1rem",px:3,mb:4,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",border:"1px solid",borderColor:"divider"},children:e.jsxs(t,{sx:{mb:3},children:[e.jsx(d,{variant:"h5",component:"h1",fontWeight:"600",gutterBottom:!0,children:"Edit Lowongan Pekerjaan"}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:['Perbarui informasi lowongan pekerjaan "',o.title,'"']})]})}),e.jsxs(P,{sx:{p:3,mb:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.03)"},children:[Object.keys(i).length>0&&e.jsx(V,{severity:"error",sx:{mb:3,borderRadius:"0.75rem",border:`1px solid ${k(j.palette.error.main,.2)}`},children:"Terdapat kesalahan pada formulir. Silakan periksa kembali."}),e.jsx("form",{onSubmit:T,children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(t,{children:e.jsx(c,{label:"Judul Pekerjaan",fullWidth:!0,required:!0,value:a.title,onChange:r=>l("title",r.target.value),error:!!i.title,helperText:i.title,sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsxs(x,{fullWidth:!0,error:!!i.company_id,children:[e.jsx(h,{id:"company-label",children:"Perusahaan"}),e.jsx(p,{labelId:"company-label",value:a.company_id,onChange:r=>l("company_id",r.target.value),label:"Perusahaan",sx:{borderRadius:"0.75rem"},disabled:!0,children:(C||[]).map(r=>e.jsx(n,{value:r.id,children:r.name},r.id))}),i.company_id&&e.jsx(u,{children:i.company_id})]}),e.jsxs(x,{fullWidth:!0,required:!0,error:!!i.category_id,children:[e.jsx(h,{id:"category-label",children:"Kategori"}),e.jsx(p,{labelId:"category-label",value:a.category_id,onChange:r=>l("category_id",r.target.value),label:"Kategori",sx:{borderRadius:"0.75rem"},children:(A||[]).map(r=>e.jsx(n,{value:r.id,children:r.name},r.id))}),i.category_id&&e.jsx(u,{children:i.category_id})]})]}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsx(c,{label:"Lokasi",fullWidth:!0,required:!0,value:a.location,onChange:r=>l("location",r.target.value),error:!!i.location,helperText:i.location,placeholder:"Contoh: Jakarta, Remote, Hybrid",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}}),e.jsx(c,{label:"Jumlah Posisi yang Dibuka",fullWidth:!0,type:"number",value:a.vacancies||"",onChange:r=>l("vacancies",r.target.value),error:!!i.vacancies,helperText:i.vacancies,sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})]}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsxs(x,{fullWidth:!0,required:!0,error:!!i.job_type,children:[e.jsx(h,{id:"type-label",children:"Tipe Pekerjaan"}),e.jsxs(p,{labelId:"type-label",value:a.job_type,onChange:r=>l("job_type",r.target.value),label:"Tipe Pekerjaan",sx:{borderRadius:"0.75rem"},children:[e.jsx(n,{value:"full_time",children:"Full Time"}),e.jsx(n,{value:"part_time",children:"Part Time"}),e.jsx(n,{value:"contract",children:"Kontrak"}),e.jsx(n,{value:"internship",children:"Magang"}),e.jsx(n,{value:"freelance",children:"Freelance"})]}),i.job_type&&e.jsx(u,{children:i.job_type})]}),e.jsxs(x,{fullWidth:!0,required:!0,error:!!i.experience_level,children:[e.jsx(h,{id:"experience-label",children:"Level Pengalaman"}),e.jsxs(p,{labelId:"experience-label",value:a.experience_level,onChange:r=>l("experience_level",r.target.value),label:"Level Pengalaman",sx:{borderRadius:"0.75rem"},children:[e.jsx(n,{value:"entry",children:"Entry Level (0-2 tahun)"}),e.jsx(n,{value:"mid",children:"Mid Level (2-5 tahun)"}),e.jsx(n,{value:"senior",children:"Senior Level (5+ tahun)"}),e.jsx(n,{value:"executive",children:"Executive (10+ tahun)"})]}),i.experience_level&&e.jsx(u,{children:i.experience_level})]})]}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsx(c,{label:"Gaji Minimum",fullWidth:!0,value:a.salary_min,onChange:r=>{const s=y(r.target.value);l("salary_min",s)},error:!!i.salary_min,helperText:i.salary_min,InputProps:{startAdornment:e.jsx(W,{position:"start",children:"Rp"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}}),e.jsx(c,{label:"Gaji Maksimum",fullWidth:!0,value:a.salary_max,onChange:r=>{const s=y(r.target.value);l("salary_max",s)},error:!!i.salary_max,helperText:i.salary_max||"Kosongkan jika tidak ingin menampilkan range gaji",InputProps:{startAdornment:e.jsx(W,{position:"start",children:"Rp"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})]}),e.jsx(t,{sx:{pl:1,mb:2},children:e.jsx(Y,{control:e.jsx(Z,{checked:a.is_salary_visible,onChange:r=>l("is_salary_visible",r.target.checked),color:"primary"}),label:"Tampilkan informasi gaji kepada kandidat"})}),e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsx(c,{label:"Batas Waktu Pendaftaran",fullWidth:!0,type:"date",required:!0,value:a.submission_deadline,onChange:r=>l("submission_deadline",r.target.value),error:!!i.submission_deadline,helperText:i.submission_deadline,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}}),e.jsx(c,{label:"Deadline Lamaran",fullWidth:!0,type:"date",value:a.deadline,onChange:r=>l("deadline",r.target.value),error:!!i.deadline,helperText:i.deadline||"Opsional",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})]}),e.jsx(t,{children:e.jsxs(x,{fullWidth:!0,required:!0,error:!!i.status,children:[e.jsx(h,{id:"status-label",children:"Status"}),e.jsxs(p,{labelId:"status-label",value:a.status,onChange:r=>{const s=r.target.value;l("status",s),l("is_active",s==="active")},label:"Status",sx:{borderRadius:"0.75rem"},children:[e.jsx(n,{value:"draft",children:"Draft"}),e.jsx(n,{value:"active",children:"Aktif"}),e.jsx(n,{value:"closed",children:"Ditutup"})]}),i.status&&e.jsx(u,{children:i.status})]})}),e.jsxs(t,{children:[e.jsx(g,{sx:{my:2}}),e.jsx(d,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:"Skills & Kemampuan"}),e.jsxs(t,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[e.jsx(c,{label:"Tambahkan Skill",value:f,onChange:r=>R(r.target.value),onKeyPress:z,sx:{mr:1,flexGrow:1,"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}},placeholder:"Contoh: JavaScript, React, UI/UX, dll"}),e.jsx(b,{variant:"contained",onClick:w,startIcon:e.jsx(re,{}),sx:{borderRadius:"0.75rem",boxShadow:"0 4px 12px rgba(15, 118, 110, 0.2)"},children:"Tambah"})]}),e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Array.isArray(a.skills)&&a.skills.map((r,s)=>e.jsx(D,{label:r,onDelete:()=>F(r),deleteIcon:e.jsx(L,{}),color:"primary",variant:"outlined",sx:{mb:1,borderRadius:"0.75rem"}},s))})]}),e.jsxs(t,{children:[e.jsx(g,{sx:{my:2}}),e.jsx(d,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:"Tahapan Perekrutan"}),e.jsx(t,{sx:{mb:2},children:e.jsxs(x,{fullWidth:!0,children:[e.jsx(h,{id:"hiring-stage-label",children:"Tambah Tahapan"}),e.jsx(p,{labelId:"hiring-stage-label",label:"Tambah Tahapan",value:"",onChange:r=>K(r.target.value),sx:{borderRadius:"0.75rem"},children:S.filter(r=>!a.hiring_stages.includes(r.id)).map(r=>e.jsx(n,{value:r.id,children:r.name},r.id))})]})}),e.jsx(M,{spacing:1,children:a.hiring_stages.map((r,s)=>{const m=S.find(_=>_.id===r);return m?e.jsxs(t,{sx:{display:"flex",alignItems:"center",p:2,borderRadius:"0.75rem",border:"1px solid",borderColor:"divider",background:j.palette.background.paper},children:[e.jsxs(d,{sx:{flex:1},children:[s+1,". ",m.name]}),e.jsxs(t,{children:[e.jsx(b,{onClick:()=>G(s),disabled:s===0,size:"small",children:"↑"}),e.jsx(b,{onClick:()=>U(s),disabled:s===a.hiring_stages.length-1,size:"small",children:"↓"}),e.jsx(ee,{onClick:()=>J(r),size:"small",color:"error",children:e.jsx(L,{})})]})]},r):null})})]}),e.jsxs(t,{children:[e.jsx(g,{sx:{my:2}}),e.jsx(d,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:"Deskripsi Pekerjaan"}),e.jsx(t,{sx:{border:"1px solid",borderColor:"divider",borderRadius:"0.75rem",overflow:"hidden"},children:e.jsx(v,{value:a.description,onChange:r=>l("description",r),height:300})}),i.description&&e.jsx(u,{error:!0,children:i.description})]}),e.jsxs(t,{children:[e.jsx(g,{sx:{my:2}}),e.jsx(d,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:"Persyaratan"}),e.jsx(t,{sx:{border:"1px solid",borderColor:"divider",borderRadius:"0.75rem",overflow:"hidden"},children:e.jsx(v,{value:a.requirements,onChange:r=>l("requirements",r),height:300})}),i.requirements&&e.jsx(u,{error:!0,children:i.requirements})]}),e.jsxs(t,{children:[e.jsx(g,{sx:{my:2}}),e.jsx(d,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:"Tanggung Jawab"}),e.jsx(t,{sx:{border:"1px solid",borderColor:"divider",borderRadius:"0.75rem",overflow:"hidden"},children:e.jsx(v,{value:a.responsibilities,onChange:r=>l("responsibilities",r),height:300})}),i.responsibilities&&e.jsx(u,{error:!0,children:i.responsibilities})]}),e.jsxs(t,{children:[e.jsx(g,{sx:{my:2}}),e.jsx(d,{variant:"h6",fontWeight:"600",gutterBottom:!0,children:"Manfaat & Benefit"}),e.jsx(t,{sx:{border:"1px solid",borderColor:"divider",borderRadius:"0.75rem",overflow:"hidden"},children:e.jsx(v,{value:a.benefits,onChange:r=>l("benefits",r),height:300})}),i.benefits&&e.jsx(u,{error:!0,children:i.benefits})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"flex-end",mt:2,gap:2},children:[e.jsx(b,{variant:"outlined",size:"large",href:route("manager.jobs.index"),sx:{borderRadius:"0.75rem"},children:"Batal"}),e.jsx(b,{type:"submit",variant:"contained",size:"large",disabled:I,onClick:r=>{a.status==="active"&&!a.is_active?l("is_active",!0):a.status!=="active"&&a.is_active&&l("is_active",!1),T(r)},sx:{borderRadius:"0.75rem",boxShadow:"0 4px 12px rgba(15, 118, 110, 0.2)"},children:I?"Menyimpan...":"Simpan Perubahan"})]})]})})]}),e.jsxs(P,{sx:{p:3,mb:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.03)"},children:[e.jsx(t,{sx:{display:"flex",alignItems:"center",mb:2},children:e.jsx(d,{variant:"h6",fontWeight:"600",children:"Status Lowongan"})}),e.jsx(t,{sx:{p:2,borderRadius:"0.75rem",bgcolor:k(j.palette.primary.main,.04),border:"1px solid",borderColor:k(j.palette.primary.main,.1)},children:e.jsxs(M,{spacing:1,children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(d,{variant:"body2",children:"Status saat ini:"}),e.jsx(D,{label:a.status==="active"?"Aktif":a.status==="closed"?"Ditutup":"Draft",size:"small",color:a.status==="active"?"success":a.status==="closed"?"error":"warning",sx:{borderRadius:"0.75rem",fontWeight:500}})]}),e.jsx(d,{variant:"body2",color:"text.secondary",fontSize:"0.85rem",children:a.status==="active"?"Lowongan dapat dilihat dan dilamar oleh pelamar":a.status==="closed"?"Lowongan sudah ditutup dan tidak dapat dilamar lagi":"Lowongan masih dalam tahap draft, belum dapat dilihat oleh pelamar"})]})})]})]})}export{Le as default};
