import{q as oe,r as w,j as r,a as de,m as Z,b as d,J as W}from"./app-DbtvrzCH.js";import{L as ce}from"./Layout-nP23ILEi.js";import{S as me}from"./SweetAlert-BO_jTu2E.js";import{u as xe,B as s,a as x,P as k,T as a}from"./Button-B_2tu0cn.js";import{u as pe}from"./index-BJHsQb-H.js";import{C as he}from"./Container-CHMV_DAY.js";import{A as ue}from"./ArrowBack-BlJGXhv6.js";import{L as ye}from"./LinearProgress-Cp3Ye6up.js";import{C as p,A as J}from"./Slide-DsAvN5qg.js";import{B as b,L as h,a as u,b as y}from"./Work-bK6ZZ-Qp.js";import{W as _}from"./WorkOutline-B3w2_Dhf.js";import{L as C}from"./LocationOn-BAU5EuQK.js";import{A as fe}from"./Sidebar-sw6YawgY.js";import{A as j}from"./AttachMoney-D8q6iNQQ.js";import{S as T}from"./Stack-CsubfPvX.js";import{T as L}from"./AccessTime-as3EkDL5.js";import{C as ge}from"./CalendarToday-CkOTnclg.js";import{D as ve,L as we}from"./Button-CgCKgwRd.js";import{I as ee}from"./Info-j9m1PK-Q.js";import{S as ke}from"./Send-DKoTlC6h.js";import{C as P}from"./CardContent-BDcyNa-E.js";import{P as Se}from"./People-KxvvNdCJ.js";import{A as De}from"./ArrowForward-jR7HuMfl.js";import{D as We,a as _e,b as Ce}from"./DialogContent-CpDcnQgJ.js";import{D as Te}from"./DialogTitle-CnVKeRzh.js";import{D as Le}from"./DialogContentText-BbIC-bWf.js";import"./Footer-BBk2Lp_N.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./CheckCircle-nvk-SVVX.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./Event-JhFTkm8A.js";function mr({job:e,hasApplied:R,relatedJobs:S}){var G,M,H,N,E,q,O,F,K,Q,Y,U,V,X;const{auth:I,flash:l}=oe().props,[re,z]=w.useState(!1),t=xe(),D=pe(t.breakpoints.down("sm")),[Pe,ie]=w.useState(!1),[f,o]=w.useState({show:!1,title:"",text:"",icon:""});w.useEffect(()=>{l.success?o({show:!0,title:"Berhasil",text:l.success,icon:"success"}):l.error?o({show:!0,title:"Gagal",text:l.error,icon:"error"}):l.warning?o({show:!0,title:"Perhatian",text:l.warning,icon:"warning"}):R?o({show:!0,title:"Info",text:"Anda sudah melamar pekerjaan ini. Silakan cek status lamaran di halaman 'Lamaran Saya'.",icon:"info"}):A()&&o({show:!0,title:"Info",text:"Lowongan ini sudah berakhir.",icon:"info"})},[l]);const g=i=>{if(!i)return"Tidak tersedia";try{const n=new Date(i);return isNaN(n.getTime())?"Tidak tersedia":n.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}catch{return"Tidak tersedia"}},A=()=>e!=null&&e.submission_deadline?new Date(e.submission_deadline)<new Date:!0,B=(i,n)=>!i&&!n?"Tidak ditentukan":i&&!n?`Rp${i.toLocaleString()}+`:!i&&n?`Hingga Rp${n.toLocaleString()}`:`Rp${i.toLocaleString()} - Rp${n.toLocaleString()}`,ae=()=>{if(!(e!=null&&e.submission_deadline))return 0;const i=new Date(e.submission_deadline),n=new Date;if(i<n)return 0;const le=(i-n)/(1e3*60*60*24);return Math.floor(le)},v=i=>{switch(i){case"active":return t.palette.success.main;case"expired":return t.palette.error.main;case"draft":return t.palette.warning.main;default:return t.palette.grey[500]}},se=i=>{switch(i){case"active":return"Aktif";case"expired":return"Berakhir";case"closed":return"Ditutup";case"draft":return"Draft";default:return i||"Tidak diketahui"}},ne=i=>{if(i.preventDefault(),!I.user){z(!0);return}if(!I.user.has_resume){o({show:!0,title:"Perhatian",text:"Anda belum memiliki resume. Silakan buat resume terlebih dahulu.",icon:"warning"}),ie(!0),setTimeout(()=>{window.location.href=route("candidate.profile.edit")},1500);return}window.location.href=route("candidate.jobs.apply",e==null?void 0:e.id)},$=()=>{z(!1)},te=()=>{window.location.href=route("login")},c=ae(),m=c>0&&c<=3;return r.jsxs(ce,{children:[r.jsx(de,{title:(e==null?void 0:e.title)||"Detail Lowongan"}),r.jsx(he,{maxWidth:"lg",sx:{py:{xs:3,md:4}},children:r.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsx(s,{sx:{mb:3},children:r.jsx(x,{component:W,href:route("candidate.jobs.index"),startIcon:r.jsx(ue,{}),sx:{color:"text.secondary",fontWeight:500,"&:hover":{backgroundColor:d(t.palette.primary.main,.05)}},children:"Kembali ke Lowongan"})}),f.show&&r.jsx(me,{title:f.title,text:f.text,icon:f.icon,showConfirmButton:!0,onClose:()=>o({...f,show:!1})}),r.jsxs(s,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"8fr 4fr"},gap:3},children:[r.jsx(s,{children:r.jsxs(k,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:"1rem",mb:3,border:"1px solid",borderColor:"divider",position:"relative",overflow:"hidden"},children:[r.jsx(ye,{variant:"determinate",value:(e==null?void 0:e.status)==="active"?100:0,sx:{position:"absolute",top:0,left:0,right:0,height:4,backgroundColor:"rgba(0,0,0,0.05)","& .MuiLinearProgress-bar":{backgroundColor:v(e==null?void 0:e.status)}}}),r.jsx(s,{sx:{mb:2,mt:1,display:"flex",justifyContent:"flex-end"},children:r.jsx(p,{label:se(e==null?void 0:e.status),size:"small",sx:{height:24,fontWeight:600,bgcolor:d(v(e==null?void 0:e.status),.1),color:v(e==null?void 0:e.status),fontSize:"0.7rem",borderRadius:"0.5rem",border:"1px solid",borderColor:`${v(e==null?void 0:e.status)}30`}})}),r.jsxs(s,{sx:{mb:3},children:[r.jsxs(s,{sx:{display:"flex",alignItems:"flex-start",mb:3},children:[r.jsx(J,{src:(G=e==null?void 0:e.company)==null?void 0:G.logo,alt:(M=e==null?void 0:e.company)==null?void 0:M.name,variant:"rounded",sx:{width:64,height:64,mr:2.5,borderRadius:"0.75rem",bgcolor:d(t.palette.primary.main,.1),border:"1px solid",borderColor:"divider",p:1},children:!((H=e==null?void 0:e.company)!=null&&H.logo)&&((E=(N=e==null?void 0:e.company)==null?void 0:N.name)==null?void 0:E.charAt(0))}),r.jsxs(s,{children:[r.jsx(a,{variant:"h4",component:"h1",sx:{fontWeight:700,mb:1,color:"text.primary"},className:"text-gray-800",children:e==null?void 0:e.title}),r.jsxs(a,{variant:"body1",sx:{color:"primary.main",fontWeight:500,display:"flex",alignItems:"center",mb:1},children:[r.jsx(b,{fontSize:"small",sx:{mr:.5}}),(q=e==null?void 0:e.company)==null?void 0:q.name]})]})]}),r.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,mb:3},children:[(e==null?void 0:e.job_type)&&r.jsx(p,{icon:r.jsx(_,{fontSize:"small"}),label:e.job_type,size:"small",variant:"outlined",sx:{borderRadius:"0.75rem"}}),(e==null?void 0:e.location)&&r.jsx(p,{icon:r.jsx(C,{fontSize:"small"}),label:e.location,size:"small",variant:"outlined",sx:{borderRadius:"0.75rem"}}),(e==null?void 0:e.experience_level)&&r.jsx(p,{icon:r.jsx(fe,{fontSize:"small"}),label:e.experience_level,size:"small",variant:"outlined",sx:{borderRadius:"0.75rem"}})]}),(e==null?void 0:e.is_salary_visible)&&((e==null?void 0:e.salary_min)||(e==null?void 0:e.salary_max))&&r.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:3,color:"success.main",bgcolor:d(t.palette.success.main,.1),px:2,py:1,borderRadius:"0.75rem",width:"fit-content"},children:[r.jsx(j,{fontSize:"small",sx:{mr:.5}}),r.jsx(a,{variant:"body1",fontWeight:"medium",children:B(e==null?void 0:e.salary_min,e==null?void 0:e.salary_max)})]}),r.jsxs(T,{direction:"row",spacing:3,sx:{mb:1},children:[(e==null?void 0:e.submission_deadline)&&r.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(L,{fontSize:"small",sx:{mr:1,color:m?"error.main":"text.secondary"}}),r.jsx(a,{variant:"body2",sx:{color:m?"error.main":"text.secondary",fontWeight:m?"bold":"normal"},children:c>0?`${c} hari lagi`:`Deadline: ${g(e.submission_deadline)}`})]}),(e==null?void 0:e.created_at)&&r.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(ge,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),r.jsxs(a,{variant:"body2",color:"text.secondary",children:["Diposting: ",g(e.created_at)]})]})]})]}),r.jsx(ve,{sx:{my:3}}),r.jsx(s,{sx:{mb:4},children:R?r.jsxs(a,{variant:"body1",sx:{p:2,bgcolor:"info.light",color:"info.dark",borderRadius:"0.75rem",display:"flex",alignItems:"center"},children:[r.jsx(ee,{sx:{mr:1}}),"Anda sudah melamar pekerjaan ini. Silakan cek status lamaran di halaman 'Lamaran Saya'."]}):A()?r.jsxs(a,{variant:"body1",sx:{p:2,bgcolor:"error.light",color:"error.dark",borderRadius:"0.75rem",display:"flex",alignItems:"center"},children:[r.jsx(L,{sx:{mr:1}}),"Lowongan ini sudah berakhir."]}):r.jsxs(T,{direction:D?"column":"row",spacing:2,children:[r.jsx(x,{variant:"contained",color:"primary",size:"large",onClick:ne,fullWidth:D,startIcon:r.jsx(ke,{}),sx:{py:1.5,px:4,fontSize:"1rem",fontWeight:600,borderRadius:"0.75rem",boxShadow:"0 4px 14px 0 rgba(20, 184, 166, 0.25)","&:hover":{boxShadow:"0 6px 20px 0 rgba(20, 184, 166, 0.35)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},className:"transition-all duration-300",children:"Lamar Sekarang"}),r.jsx(x,{variant:"outlined",color:"primary",size:"large",fullWidth:D,component:W,href:route("candidate.jobs.index"),sx:{py:1.5,fontSize:"1rem",borderRadius:"0.75rem"},children:"Lihat Lowongan Lain"})]})}),r.jsxs(s,{sx:{mb:4},children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Deskripsi Pekerjaan"}),r.jsx(a,{variant:"body1",sx:{whiteSpace:"pre-line",color:"text.secondary",lineHeight:1.6},children:(e==null?void 0:e.description)||"Tidak ada deskripsi tersedia"})]}),(e==null?void 0:e.responsibilities)&&r.jsxs(s,{sx:{mb:4},children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Tanggung Jawab"}),r.jsx(a,{variant:"body1",sx:{whiteSpace:"pre-line",color:"text.secondary",lineHeight:1.6},children:e.responsibilities})]}),(e==null?void 0:e.requirements)&&r.jsxs(s,{sx:{mb:4},children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Persyaratan"}),r.jsx(a,{variant:"body1",sx:{whiteSpace:"pre-line",color:"text.secondary",lineHeight:1.6},children:e.requirements})]}),(e==null?void 0:e.benefits)&&r.jsxs(s,{sx:{mb:4},children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Tunjangan dan Manfaat"}),r.jsx(a,{variant:"body1",sx:{whiteSpace:"pre-line",color:"text.secondary",lineHeight:1.6},children:e.benefits})]})]})}),r.jsxs(s,{children:[r.jsx(k,{elevation:0,sx:{mb:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",overflow:"hidden",position:"relative"},children:r.jsxs(P,{children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Tentang Perusahaan"}),r.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx(J,{src:(O=e==null?void 0:e.company)==null?void 0:O.logo,alt:(F=e==null?void 0:e.company)==null?void 0:F.name,variant:"rounded",sx:{width:60,height:60,mr:2,borderRadius:"0.75rem",bgcolor:d(t.palette.primary.main,.1),border:"1px solid",borderColor:"divider",p:1},children:(Q=(K=e==null?void 0:e.company)==null?void 0:K.name)==null?void 0:Q.charAt(0)}),r.jsxs(s,{children:[r.jsx(a,{variant:"subtitle1",sx:{fontWeight:500},children:(Y=e==null?void 0:e.company)==null?void 0:Y.name}),((U=e==null?void 0:e.company)==null?void 0:U.industry)&&r.jsx(a,{variant:"body2",color:"text.secondary",children:e.company.industry})]})]}),((V=e==null?void 0:e.company)==null?void 0:V.description)&&r.jsx(a,{variant:"body2",sx:{mb:3,color:"text.secondary",lineHeight:1.6},children:e.company.description}),((X=e==null?void 0:e.company)==null?void 0:X.website)&&r.jsx(x,{variant:"outlined",color:"primary",href:e.company.website,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{borderRadius:"0.75rem",py:1.25,"&:hover":{backgroundColor:d(t.palette.primary.main,.05)}},children:"Kunjungi Website"})]})}),r.jsx(k,{elevation:0,sx:{mb:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider"},children:r.jsxs(P,{children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Detail Pekerjaan"}),r.jsxs(we,{dense:!0,disablePadding:!0,children:[(e==null?void 0:e.job_type)&&r.jsxs(h,{disableGutters:!0,sx:{py:1},children:[r.jsx(u,{sx:{minWidth:36},children:r.jsx(_,{sx:{color:"primary.main"}})}),r.jsx(y,{primary:"Tipe Pekerjaan",secondary:e.job_type,primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body1",fontWeight:500}})]}),(e==null?void 0:e.location)&&r.jsxs(h,{disableGutters:!0,sx:{py:1},children:[r.jsx(u,{sx:{minWidth:36},children:r.jsx(C,{sx:{color:"primary.main"}})}),r.jsx(y,{primary:"Lokasi",secondary:e.location,primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body1",fontWeight:500}})]}),(e==null?void 0:e.is_salary_visible)&&((e==null?void 0:e.salary_min)||(e==null?void 0:e.salary_max))&&r.jsxs(h,{disableGutters:!0,sx:{py:1},children:[r.jsx(u,{sx:{minWidth:36},children:r.jsx(j,{sx:{color:"success.main"}})}),r.jsx(y,{primary:"Rentang Gaji",secondary:B(e==null?void 0:e.salary_min,e==null?void 0:e.salary_max),primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body1",fontWeight:500,color:"success.main"}})]}),(e==null?void 0:e.vacancies)&&r.jsxs(h,{disableGutters:!0,sx:{py:1},children:[r.jsx(u,{sx:{minWidth:36},children:r.jsx(Se,{sx:{color:"primary.main"}})}),r.jsx(y,{primary:"Jumlah Posisi",secondary:e.vacancies,primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body1",fontWeight:500}})]}),(e==null?void 0:e.experience_level)&&r.jsxs(h,{disableGutters:!0,sx:{py:1},children:[r.jsx(u,{sx:{minWidth:36},children:r.jsx(ee,{sx:{color:"primary.main"}})}),r.jsx(y,{primary:"Pengalaman",secondary:e.experience_level,primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body1",fontWeight:500}})]}),(e==null?void 0:e.submission_deadline)&&r.jsxs(h,{disableGutters:!0,sx:{py:1,color:m?"error.main":"inherit"},children:[r.jsx(u,{sx:{minWidth:36},children:r.jsx(L,{sx:{color:m?"error.main":"primary.main"}})}),r.jsx(y,{primary:"Deadline",secondary:c>0?`${c} hari lagi (${g(e.submission_deadline)})`:g(e.submission_deadline),primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{color:m?"error.main":"text.primary"}})]})]})]})}),S&&S.length>0&&r.jsx(k,{elevation:0,sx:{borderRadius:"1rem",border:"1px solid",borderColor:"divider"},children:r.jsxs(P,{children:[r.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Lowongan Serupa"}),r.jsx(T,{spacing:2,children:S.map(i=>{var n;return r.jsx(s,{component:Z.div,whileHover:{y:-4},sx:{border:1,borderColor:"divider",borderRadius:"0.75rem",p:2,"&:hover":{borderColor:d(t.palette.primary.main,.3),boxShadow:"0 4px 14px rgba(0,0,0,0.05)"},transition:"all 0.3s ease"},className:"transition-all duration-300",children:r.jsxs(W,{href:route("candidate.jobs.show",i.id),style:{textDecoration:"none"},children:[r.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,color:"text.primary"},children:i==null?void 0:i.title}),r.jsxs(a,{variant:"body2",sx:{color:"primary.main",fontWeight:500,mb:1.5,display:"flex",alignItems:"center"},children:[r.jsx(b,{fontSize:"small",sx:{mr:.5,fontSize:16}}),(n=i==null?void 0:i.company)==null?void 0:n.name]}),r.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(i==null?void 0:i.job_type)&&r.jsx(p,{label:i.job_type,size:"small",variant:"outlined",icon:r.jsx(_,{fontSize:"small"}),sx:{borderRadius:"0.5rem"}}),(i==null?void 0:i.location)&&r.jsx(p,{label:i.location,size:"small",variant:"outlined",icon:r.jsx(C,{fontSize:"small"}),sx:{borderRadius:"0.5rem"}})]}),r.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:2},children:[(i==null?void 0:i.submission_deadline)&&r.jsxs(a,{variant:"caption",sx:{color:"text.secondary",display:"flex",alignItems:"center"},children:[r.jsx(AccessTimeIcon,{sx:{mr:.5,fontSize:14}}),Math.floor((new Date(i.submission_deadline)-new Date)/(1e3*60*60*24))>0?`${Math.floor((new Date(i.submission_deadline)-new Date)/(1e3*60*60*24))} hari lagi`:"Berakhir"]}),r.jsx(De,{fontSize:"small",sx:{color:"primary.main",ml:1}})]})]})},i.id)})})]})})]})]})]})}),r.jsxs(We,{open:re,onClose:$,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{borderRadius:"0.75rem"}},children:[r.jsx(Te,{id:"alert-dialog-title",sx:{pb:1},children:r.jsx(a,{variant:"h6",fontWeight:"600",children:"Login diperlukan untuk melamar"})}),r.jsx(_e,{children:r.jsx(Le,{id:"alert-dialog-description",children:"Anda perlu login terlebih dahulu untuk dapat melamar pekerjaan ini. Silahkan login atau daftar jika belum memiliki akun."})}),r.jsxs(Ce,{sx:{p:2.5},children:[r.jsx(x,{onClick:$,color:"inherit",variant:"outlined",sx:{borderRadius:"0.75rem",px:3},children:"Batal"}),r.jsx(x,{onClick:te,color:"primary",variant:"contained",autoFocus:!0,sx:{borderRadius:"0.75rem",px:3,boxShadow:"0 4px 14px 0 rgba(20, 184, 166, 0.25)","&:hover":{boxShadow:"0 6px 20px 0 rgba(20, 184, 166, 0.35)"},transition:"all 0.3s ease"},className:"transition-all duration-300",children:"Login"})]})]})]})}export{mr as default};
