import{j as e,q as X,r as m,S as Y,a as Z,b as s,J as ee,m as z}from"./app-BUVb_nAj.js";import{B as b,D as B,L as ae}from"./Button-DzGhUBn7.js";import{S as R}from"./Select-CwiaD0cR.js";import{F as h}from"./FormGroup-DX6tnawx.js";import{C as $}from"./Checkbox-DFrHN2i9.js";import{A as re}from"./Alert-W_CUoSxB.js";import{L as ne}from"./Layout-DnkF-NCm.js";import{c as se,u as te,B as a,T as n,P as W}from"./Button-DFxjcZ8p.js";import{A as y,C as f}from"./Slide-DYtCGdXj.js";import{A as D}from"./AdminPanelSettings-CO8uXZnm.js";import{A as ie}from"./ArrowBack-Cgi6G0-j.js";import{B as k,L as v,a as S,b as I}from"./Work-CLEsMByH.js";import{P as M}from"./Person-5k5xBlAT.js";import{I as U}from"./Info-CdM9Lqya.js";import{S as oe}from"./Star-Bgm7RHOV.js";import{C as le}from"./Cancel-CvQZ1HG8.js";import{S as de}from"./Save-JdvVwzrr.js";import{E as me}from"./Error-CSPDIC8t.js";import{C as P}from"./CheckCircle-Dd-oaFV0.js";import{A as ce}from"./Sidebar-DGzgELZX.js";import"./InputLabel-DpN5m5Yk.js";import"./Select-Bh9V9k3o.js";import"./FormControlLabel-DTCfN-Gd.js";import"./Checkbox-DZaxlRGh.js";import"./SwitchBase-BRw57M3-.js";import"./Alert-j9c9aQEr.js";import"./Close-CafbgWA1.js";import"./AlertTitle-CPDkbCwY.js";import"./AccessTime-DXhpyso9.js";import"./ArrowForward-Tz2ikYxH.js";import"./Close-B7UDIhaS.js";import"./Warning-BLg7sOqp.js";import"./LinearProgress-3EBWbMR1.js";import"./Footer-DSErbOqA.js";import"./Container-DEvTfuj0.js";import"./index-Dtg-WGcE.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./ChevronRight-FNylUib_.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";const pe=se(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),aa=({companies:w=[],users:u=[]})=>{var A;const{auth:xe}=X().props,r=te(),[L,_]=m.useState(!1),[q,E]=m.useState(""),[F,H]=m.useState("error"),[c,J]=m.useState(null),[i,K]=m.useState(null),[g,C]=m.useState(!1),{data:p,setData:o,post:G,processing:T,errors:x,reset:O}=Y({company_id:"",user_id:"",is_primary:!1,update_role:!0}),N=t=>{t.preventDefault(),G(route("admin.managers.store"),{onSuccess:()=>{},onError:l=>{E("Mohon periksa kembali formulir untuk kesalahan."),H("error"),_(!0),window.scrollTo(0,0)}})},Q=t=>{const l=t.target.value;o("company_id",l);const d=w.find(j=>j.id.toString()===l.toString());J(d||null)},V=t=>{const l=t.target.value;o("user_id",l);const d=u.find(j=>j.id.toString()===l.toString());K(d||null),d&&d.role&&d.role.slug==="manager"?(C(!0),o("update_role",!1)):(C(!1),o("update_role",!0))};return e.jsxs(ne,{children:[e.jsx(Z,{title:"Tambah Manager Perusahaan"}),L&&e.jsx(re,{severity:F,onClose:()=>_(!1),sx:{mb:3},children:q}),e.jsxs(a,{sx:{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(y,{sx:{bgcolor:s(r.palette.primary.main,.1),color:r.palette.primary.main,width:56,height:56},children:e.jsx(D,{fontSize:"large"})}),e.jsxs(a,{children:[e.jsx(n,{variant:"h4",component:"h1",fontWeight:700,children:"Tambah Manager Perusahaan"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Tetapkan pengguna sebagai manager perusahaan untuk mengelola detail dan lowongan kerja"})]})]}),e.jsx(b,{variant:"outlined",startIcon:e.jsx(ie,{}),component:ee,href:route("admin.managers.index"),children:"Kembali ke Daftar Manager"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsx(a,{sx:{flex:1},children:e.jsxs(W,{elevation:0,sx:{borderRadius:3,boxShadow:"0 2px 10px rgba(0,0,0,0.04)",border:`1px solid ${s(r.palette.divider,.1)}`,overflow:"hidden"},children:[e.jsxs(a,{sx:{p:3,borderBottom:`1px solid ${s(r.palette.divider,.1)}`,display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(k,{color:"primary"}),e.jsx(n,{variant:"h6",fontWeight:600,children:"Formulir Penugasan Manager"})]}),e.jsxs(a,{component:"form",onSubmit:N,sx:{p:3},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsx(a,{sx:{flex:1},children:e.jsx(h,{label:"Perusahaan",required:!0,icon:e.jsx(k,{fontSize:"small",sx:{opacity:.7}}),marginBottom:"medium",children:e.jsx(R,{name:"company_id",value:p.company_id,onChange:Q,options:(w||[]).map(t=>({value:t.id,label:t.name,description:t.is_active?"Aktif":"Tidak Aktif"})),required:!0,placeholder:"Pilih perusahaan",error:x.company_id,helperText:x.company_id})})}),e.jsx(a,{sx:{flex:1},children:e.jsx(h,{label:"Pengguna",required:!0,icon:e.jsx(M,{fontSize:"small",sx:{opacity:.7}}),marginBottom:"medium",children:e.jsx(R,{name:"user_id",value:p.user_id,onChange:V,options:(u||[]).map(t=>({value:t.id,label:t.name,description:t.email,additionalInfo:t.role?t.role.name:"Tanpa Role"})),required:!0,placeholder:"Pilih pengguna",error:x.user_id,helperText:x.user_id||"Pilih pengguna yang akan ditugaskan sebagai manager",emptyMessage:u.length===0?"Tidak ada pengguna yang tersedia":"Tidak ada pilihan tersedia"})})})]}),e.jsx(a,{sx:{mt:2},children:e.jsx(a,{sx:{p:2,bgcolor:s(r.palette.primary.main,.04),borderRadius:2,border:`1px solid ${s(r.palette.primary.main,.1)}`},children:e.jsx(h,{marginBottom:"none",children:e.jsx($,{label:"Tetapkan sebagai Manager Utama",name:"is_primary",checked:p.is_primary,onChange:t=>o("is_primary",t.target.checked),helperText:"Manager utama memiliki kendali penuh atas detail perusahaan dan pengelolaan lowongan kerja"})})})}),i&&!g&&e.jsx(a,{sx:{mt:2},children:e.jsx(a,{sx:{p:2,bgcolor:s(r.palette.secondary.main,.04),borderRadius:2,border:`1px solid ${s(r.palette.secondary.main,.1)}`},children:e.jsx(h,{marginBottom:"none",children:e.jsx($,{label:"Ubah role pengguna menjadi Manager",name:"update_role",checked:p.update_role,onChange:t=>o("update_role",t.target.checked),helperText:`Role ${i.name} saat ini adalah "${((A=i.role)==null?void 0:A.name)||"Tanpa Role"}". Dengan opsi ini, role akan diubah menjadi "Manager".`})})})}),i&&g&&e.jsx(a,{sx:{mt:2},children:e.jsxs(a,{sx:{p:2,bgcolor:s(r.palette.info.main,.04),borderRadius:2,border:`1px solid ${s(r.palette.info.main,.1)}`,display:"flex",alignItems:"flex-start",gap:1},children:[e.jsx(U,{color:"info",sx:{mt:.5}}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[i.name," sudah memiliki role Manager. Tidak diperlukan perubahan role."]})]})}),(c||i)&&e.jsxs(a,{sx:{mt:2},children:[e.jsx(n,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Ringkasan Penugasan"}),e.jsx(a,{sx:{p:2,bgcolor:"background.paper",borderRadius:2,border:`1px solid ${s(r.palette.divider,.1)}`},children:e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[c&&e.jsx(a,{sx:{flex:1},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(y,{sx:{bgcolor:s(r.palette.primary.main,.1),color:r.palette.primary.main},children:e.jsx(k,{})}),e.jsxs(a,{children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Perusahaan"}),e.jsx(n,{variant:"subtitle2",fontWeight:600,children:c.name}),e.jsx(f,{size:"small",label:c.is_active?"Aktif":"Tidak Aktif",color:c.is_active?"success":"error",variant:"outlined",sx:{mt:.5,height:20,fontSize:"0.7rem"}})]})]})}),i&&e.jsx(a,{sx:{flex:1},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(y,{src:i.avatar,sx:{bgcolor:s(r.palette.secondary.main,.1),color:r.palette.secondary.main},children:e.jsx(M,{})}),e.jsxs(a,{children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Pengguna"}),e.jsx(n,{variant:"subtitle2",fontWeight:600,children:i.name}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[e.jsx(f,{size:"small",label:i.role?i.role.name:"Tanpa Role",color:i.role&&i.role.slug==="manager"?"primary":"default",variant:"outlined",sx:{height:20,fontSize:"0.7rem"}}),p.update_role&&!g&&e.jsx(f,{size:"small",label:"â†’ Manager",color:"secondary",icon:e.jsx(oe,{sx:{fontSize:"0.7rem !important"}}),variant:"outlined",sx:{height:20,fontSize:"0.7rem"}})]})]})]})})]})})]}),e.jsx(B,{sx:{my:4}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(b,{type:"button",variant:"text",color:"error",onClick:()=>O(),disabled:T,startIcon:e.jsx(le,{}),children:"Reset Formulir"}),e.jsx(z.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(b,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(de,{}),loading:T,size:"large",children:"Simpan Manager"})})]})]})]})}),e.jsx(a,{sx:{width:{xs:"100%",md:"35%"}},children:e.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(W,{elevation:0,sx:{borderRadius:3,boxShadow:"0 2px 10px rgba(0,0,0,0.04)",border:`1px solid ${s(r.palette.divider,.1)}`,overflow:"hidden",height:"100%"},children:[e.jsxs(a,{sx:{p:3,borderBottom:`1px solid ${s(r.palette.divider,.1)}`,display:"flex",alignItems:"center",gap:1.5,bgcolor:s(r.palette.info.main,.05)},children:[e.jsx(U,{color:"info"}),e.jsx(n,{variant:"h6",fontWeight:600,children:"Informasi"})]}),e.jsxs(a,{sx:{p:3},children:[e.jsx(n,{variant:"body1",paragraph:!0,children:"Manager perusahaan adalah pengguna yang dapat mengelola detail dan lowongan kerja untuk perusahaan tertentu."}),e.jsxs(a,{sx:{bgcolor:s(r.palette.warning.main,.05),border:`1px solid ${s(r.palette.warning.main,.2)}`,borderRadius:2,p:2,mb:3},children:[e.jsxs(n,{variant:"subtitle2",color:"warning.dark",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(me,{fontSize:"small"}),"Penting untuk diketahui:"]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Jika Anda menetapkan manager utama baru, manager utama yang sudah ada akan diturunkan menjadi manager sekunder."})]}),e.jsx(n,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Perubahan Role User"}),e.jsxs(a,{sx:{bgcolor:s(r.palette.secondary.main,.05),border:`1px solid ${s(r.palette.secondary.main,.1)}`,borderRadius:2,p:2,mb:3},children:[e.jsxs(n,{variant:"subtitle2",color:"secondary.main",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(M,{fontSize:"small"}),"Perubahan Otomatis"]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:'Ketika Anda menambahkan user sebagai manager, user tersebut secara otomatis akan memiliki role "Manager" (kecuali jika Anda menonaktifkan opsi tersebut).'})]}),e.jsx(n,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Fitur dan Hak Akses Manager"}),e.jsxs(ae,{disablePadding:!0,children:[e.jsxs(v,{disablePadding:!0,sx:{pb:1},children:[e.jsx(S,{sx:{minWidth:32},children:e.jsx(P,{fontSize:"small",color:"success"})}),e.jsx(I,{primary:"Mengubah profil perusahaan",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(v,{disablePadding:!0,sx:{pb:1},children:[e.jsx(S,{sx:{minWidth:32},children:e.jsx(P,{fontSize:"small",color:"success"})}),e.jsx(I,{primary:"Membuat dan mengelola lowongan kerja",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs(v,{disablePadding:!0,sx:{pb:1},children:[e.jsx(S,{sx:{minWidth:32},children:e.jsx(P,{fontSize:"small",color:"success"})}),e.jsx(I,{primary:"Melihat dan mengelola lamaran",primaryTypographyProps:{variant:"body2"}})]})]}),e.jsx(B,{sx:{my:3}}),e.jsx(n,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Perbedaan Manager Utama & Sekunder"}),e.jsxs(a,{sx:{bgcolor:s(r.palette.primary.main,.05),border:`1px solid ${s(r.palette.primary.main,.1)}`,borderRadius:2,p:2,mb:2},children:[e.jsxs(n,{variant:"subtitle2",color:"primary.main",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(D,{fontSize:"small"}),"Manager Utama"]}),e.jsx(n,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Dapat mengelola semua aspek perusahaan termasuk mengubah informasi dasar, logo, dan detail kontak."}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Juga dapat menambahkan manager sekunder lain untuk perusahaan."})]}),e.jsxs(a,{sx:{bgcolor:s(r.palette.secondary.main,.05),border:`1px solid ${s(r.palette.secondary.main,.1)}`,borderRadius:2,p:2},children:[e.jsxs(n,{variant:"subtitle2",color:"secondary.main",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(ce,{fontSize:"small"}),"Manager Sekunder"]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Dapat mengelola lowongan kerja dan aplikasi, tetapi memiliki akses terbatas untuk mengubah detail perusahaan."})]}),e.jsxs(a,{sx:{mt:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(pe,{fontSize:"small",color:"action"}),e.jsx(n,{variant:"caption",color:"text.secondary",children:"Butuh bantuan? Hubungi tim dukungan di support@campusjobportal.com"})]})]})]})})})]})]})};export{aa as default};
