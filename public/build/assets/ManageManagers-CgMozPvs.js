import{R,j as e,C as K,a as H,r as x,S as Q,J as X,b as S}from"./app-BUVb_nAj.js";import{a as Y,H as Z}from"./Sidebar-DGzgELZX.js";import{B as l,u as ee,T as r,a as f,P as B}from"./Button-DFxjcZ8p.js";import{y as se}from"./index-Ss3HazNN.js";import{I as v,L as re,D as E}from"./Button-DzGhUBn7.js";import{A as te}from"./ArrowBack-Cgi6G0-j.js";import{S as O}from"./Save-JdvVwzrr.js";import{A as C,C as m}from"./Slide-DYtCGdXj.js";import{G as t}from"./Grid-CUDx21Kg.js";import{C as A}from"./Card-D_rkxkaC.js";import{C as M}from"./CardContent-DTmJK9ga.js";import{P as ie}from"./PersonAdd-C_AqpDZ_.js";import{S as w}from"./Star-Bgm7RHOV.js";import{S as $}from"./StarBorder-BS1uSk71.js";import{T as I}from"./TextField-DdsD0Afg.js";import{I as le}from"./InputAdornment-CzgX0339.js";import{S as ne,L as G,T as P}from"./Work-CLEsMByH.js";import{L as ae}from"./ListItemAvatar-CyNe9-3r.js";import{V as oe}from"./Visibility-clJeQAT9.js";import{E as ce}from"./Edit-D-W3BsdZ.js";import{D as de}from"./Delete-DjrVMKuP.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-Dtg-WGcE.js";import"./Container-DEvTfuj0.js";import"./CheckCircle-Dd-oaFV0.js";import"./ChevronRight-FNylUib_.js";import"./Person-5k5xBlAT.js";import"./Info-CdM9Lqya.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";import"./Select-Bh9V9k3o.js";import"./InputLabel-DpN5m5Yk.js";function xe({children:a,title:c}){const[g,p]=R.useState(!1),[o,j]=R.useState(!1),y=()=>{p(!0)},i=()=>{p(!1)},u=()=>{j(!o)};return e.jsxs(l,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(K,{}),e.jsx(H,{title:c}),e.jsx(Y,{isOpen:g,onClose:i,collapsed:o,toggleCollapsed:u}),e.jsxs(l,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",width:{sm:`calc(100% - ${o?72:280}px)`},ml:{sm:`${o?72:280}px`},transition:n=>n.transitions.create(["margin","width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen})},children:[e.jsx(Z,{onDrawerOpen:y,sidebarCollapsed:o}),e.jsx(l,{component:"div",sx:{flexGrow:1,p:{xs:1,sm:2,md:3},bgcolor:"background.default"},children:a})]})]})}function We({company:a,managers:c,company_managers:g,primary_manager:p}){const o=ee(),[j,y]=x.useState(""),[i,u]=x.useState(g||[]),[n,z]=x.useState(p||null),[J,me]=x.useState(["All Roles","Manager"]),[L,V]=x.useState("All Roles"),[F,he]=x.useState(["All Companies"]),[_,N]=x.useState("All Companies"),{setData:U,post:W,processing:D}=Q({managers:i,primary_manager:n});x.useEffect(()=>{U({managers:i,primary_manager:n})},[i,n]);const T=s=>{s.preventDefault(),W(route("admin.companies.update-managers",a.id),{onSuccess:()=>{se.success("Company managers updated successfully")}})},k=s=>{i.includes(s)?(n===s&&z(null),u(i.filter(d=>d!==s))):u([...i,s])},q=s=>{i.includes(s)||u([...i,s]),z(s)},b=c.filter(s=>(s.name.toLowerCase().includes(j.toLowerCase())||s.email.toLowerCase().includes(j.toLowerCase()))&&(L==="All Roles"||!0));return e.jsxs(xe,{children:[e.jsx(H,{title:"Manage Company Managers"}),e.jsxs(l,{sx:{p:3},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(X,{href:route("admin.companies.show",a.id),children:e.jsx(v,{sx:{mr:2},children:e.jsx(te,{})})}),e.jsx(r,{variant:"h4",component:"h1",children:"Company Managers"}),e.jsx(f,{variant:"contained",color:"primary",startIcon:e.jsx(O,{}),sx:{ml:"auto"},onClick:T,disabled:D,children:"Save Changes"})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(C,{src:a.logo,alt:a.name,sx:{width:56,height:56,mr:2},variant:"rounded",children:a.name.charAt(0)}),e.jsx(r,{variant:"h5",children:a.name})]}),e.jsxs(t,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(A,{variant:"outlined",children:e.jsxs(M,{sx:{textAlign:"center"},children:[e.jsx(r,{variant:"h3",color:"primary",children:c.length}),e.jsx(r,{variant:"subtitle1",children:"Total Managers"})]})})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(A,{variant:"outlined",children:e.jsxs(M,{sx:{textAlign:"center"},children:[e.jsx(r,{variant:"h3",color:"primary",children:c.filter(s=>i.includes(s.id)&&n===s.id).length}),e.jsx(r,{variant:"subtitle1",children:"Primary Managers"})]})})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(A,{variant:"outlined",children:e.jsxs(M,{sx:{textAlign:"center"},children:[e.jsx(r,{variant:"h3",color:"primary",children:c.filter(s=>i.includes(s.id)&&n!==s.id).length}),e.jsx(r,{variant:"subtitle1",children:"Secondary Managers"})]})})})]}),e.jsx(r,{variant:"h6",sx:{mb:2},children:"Manage Company Assignments"}),e.jsxs(l,{sx:{display:"flex",mb:2},children:[e.jsx(m,{icon:e.jsx(ie,{}),label:`All Managers (${c.length})`,color:"primary",variant:"outlined",sx:{mr:2}}),e.jsx(m,{icon:e.jsx(w,{}),label:`Primary (${c.filter(s=>i.includes(s.id)&&n===s.id).length})`,color:"primary",sx:{mr:2}}),e.jsx(m,{icon:e.jsx($,{}),label:`Secondary (${c.filter(s=>i.includes(s.id)&&n!==s.id).length})`,color:"secondary"})]}),e.jsxs(l,{sx:{display:"flex",mb:3},children:[e.jsx(I,{placeholder:"Search for manager name",variant:"outlined",fullWidth:!0,size:"small",value:j,onChange:s=>y(s.target.value),InputProps:{startAdornment:e.jsx(le,{position:"start",children:e.jsx(ne,{})})},sx:{mr:2}}),e.jsx(I,{select:!0,label:"All Companies",value:_,onChange:s=>N(s.target.value),SelectProps:{native:!0},size:"small",sx:{width:200,mr:2},children:F.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(I,{select:!0,label:"All Roles",value:L,onChange:s=>V(s.target.value),SelectProps:{native:!0},size:"small",sx:{width:150},children:J.map(s=>e.jsx("option",{value:s,children:s},s))})]}),b.length>0?e.jsxs(l,{sx:{mb:3},children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[b.length," results found"]}),e.jsx(B,{variant:"outlined",children:e.jsxs(re,{sx:{width:"100%",bgcolor:"background.paper"},children:[e.jsx(G,{sx:{bgcolor:S(o.palette.primary.main,.1),py:1},children:e.jsxs(t,{container:!0,alignItems:"center",children:[e.jsx(t,{item:!0,xs:3,children:e.jsx(r,{variant:"subtitle2",children:"Manager"})}),e.jsx(t,{item:!0,xs:3,children:e.jsx(r,{variant:"subtitle2",children:"Company"})}),e.jsx(t,{item:!0,xs:2,children:e.jsx(r,{variant:"subtitle2",children:"Role"})}),e.jsx(t,{item:!0,xs:1,children:e.jsx(r,{variant:"subtitle2",children:"User Role"})}),e.jsx(t,{item:!0,xs:1,children:e.jsx(r,{variant:"subtitle2",children:"Status"})}),e.jsx(t,{item:!0,xs:1,children:e.jsx(r,{variant:"subtitle2",children:"Added On"})}),e.jsx(t,{item:!0,xs:1,children:e.jsx(r,{variant:"subtitle2",children:"Actions"})})]})}),e.jsx(E,{}),b.map(s=>{const d=i.includes(s.id),h=n===s.id;return e.jsxs(R.Fragment,{children:[e.jsx(G,{sx:{py:1.5},children:e.jsxs(t,{container:!0,alignItems:"center",children:[e.jsx(t,{item:!0,xs:3,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{children:e.jsx(C,{src:s.avatar,children:s.name.charAt(0)})}),e.jsxs(l,{children:[e.jsx(r,{variant:"body1",children:s.name}),e.jsx(r,{variant:"body2",color:"text.secondary",children:s.email})]})]})}),e.jsx(t,{item:!0,xs:3,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(C,{src:a.logo,variant:"rounded",sx:{width:24,height:24,mr:1},children:a.name.charAt(0)}),e.jsx(r,{variant:"body2",children:a.name})]})}),e.jsx(t,{item:!0,xs:2,children:h?e.jsx(m,{label:"Primary Manager",size:"small",color:"primary",icon:e.jsx(w,{})}):d?e.jsx(m,{label:"Secondary Manager",size:"small",color:"secondary",variant:"outlined"}):null}),e.jsx(t,{item:!0,xs:1,children:e.jsx(m,{label:"Manager",size:"small",sx:{bgcolor:S(o.palette.info.main,.1),color:o.palette.info.main,borderColor:"transparent"},variant:"outlined"})}),e.jsx(t,{item:!0,xs:1,children:e.jsx(m,{label:"Active",size:"small",sx:{bgcolor:S(o.palette.success.main,.1),color:o.palette.success.main,borderColor:"transparent"},variant:"outlined"})}),e.jsx(t,{item:!0,xs:1,children:e.jsx(r,{variant:"body2",children:"Jul 3, 2025"})}),e.jsx(t,{item:!0,xs:1,children:e.jsxs(l,{sx:{display:"flex"},children:[e.jsx(P,{title:"View Profile",children:e.jsx(v,{size:"small",color:"info",children:e.jsx(oe,{fontSize:"small"})})}),e.jsx(P,{title:"Edit",children:e.jsx(v,{size:"small",color:"primary",children:e.jsx(ce,{fontSize:"small"})})}),e.jsx(P,{title:"Remove",children:e.jsx(v,{size:"small",color:"error",onClick:()=>k(s.id),children:e.jsx(de,{fontSize:"small"})})})]})})]})}),e.jsxs(l,{sx:{display:"flex",ml:9,mb:1},children:[e.jsx(f,{variant:d?"contained":"outlined",color:d?"primary":"inherit",size:"small",onClick:()=>k(s.id),sx:{mr:1},children:d?"Selected":"Select"}),d&&e.jsx(f,{variant:h?"contained":"outlined",color:h?"secondary":"inherit",size:"small",startIcon:h?e.jsx(w,{}):e.jsx($,{}),onClick:()=>q(s.id),children:h?"Primary":"Set as Primary"})]}),e.jsx(E,{})]},s.id)})]})})]}):e.jsx(B,{sx:{p:3,textAlign:"center"},children:e.jsx(r,{variant:"body1",children:"No managers found matching your search criteria."})}),e.jsx(l,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e.jsx(f,{variant:"contained",color:"primary",startIcon:e.jsx(O,{}),onClick:T,disabled:D,children:"Save Changes"})})]})]})}export{We as default};
