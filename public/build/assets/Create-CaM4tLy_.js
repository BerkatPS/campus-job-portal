import{j as e,q as O,r as c,S as N,a as q,b as p,J as H}from"./app-BUVb_nAj.js";import{I as z,B as w}from"./Button-DzGhUBn7.js";import{I as f}from"./Input-CZ4N0rVB.js";import{T as k}from"./TextArea-CO0sOTJt.js";import{C as G}from"./Checkbox-DFrHN2i9.js";import{A as J}from"./Alert-W_CUoSxB.js";import{L as V}from"./Layout-DnkF-NCm.js";import{c as A,u as U,B as o,T as n,P as u}from"./Button-DFxjcZ8p.js";import{A as $}from"./ArrowBack-Cgi6G0-j.js";import{C as X,A as W}from"./Slide-DYtCGdXj.js";import{B as S,M as I}from"./Work-CLEsMByH.js";import{I as K}from"./InfoOutlined-DJot2JP-.js";import{T as Q}from"./TextField-DdsD0Afg.js";import{C as Y}from"./Category-CYeNYdY6.js";import{P as M}from"./Phone-_DVlyzHf.js";import{E as Z}from"./Email-E4u4F7F-.js";import{L as ee}from"./LocationOn-CpujyWrU.js";import{S as re}from"./Save-JdvVwzrr.js";import"./InputLabel-DpN5m5Yk.js";import"./InputAdornment-CzgX0339.js";import"./VisibilityOff-BgFPuDcZ.js";import"./Visibility-clJeQAT9.js";import"./FormControlLabel-DTCfN-Gd.js";import"./Checkbox-DZaxlRGh.js";import"./SwitchBase-BRw57M3-.js";import"./Alert-j9c9aQEr.js";import"./Close-CafbgWA1.js";import"./AlertTitle-CPDkbCwY.js";import"./AccessTime-DXhpyso9.js";import"./ArrowForward-Tz2ikYxH.js";import"./Close-B7UDIhaS.js";import"./Error-CSPDIC8t.js";import"./Warning-BLg7sOqp.js";import"./Info-CdM9Lqya.js";import"./CheckCircle-Dd-oaFV0.js";import"./LinearProgress-3EBWbMR1.js";import"./Sidebar-DGzgELZX.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./index-Dtg-WGcE.js";import"./Container-DEvTfuj0.js";import"./ChevronRight-FNylUib_.js";import"./Person-5k5xBlAT.js";import"./People-6TwBzk5z.js";import"./Event-DRCIx1GO.js";import"./Footer-DSErbOqA.js";import"./Select-Bh9V9k3o.js";const R=A([e.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),e.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),oe=A(e.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5m0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"})),te=A(e.jsx("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2m0 14H5V8h14z"})),Ye=({industries:j=[],company:t=null})=>{const{auth:se}=O().props,d=U(),[D,x]=c.useState(!1),[E,h]=c.useState(""),[P,g]=c.useState("error"),[v,y]=c.useState(null),[m,C]=c.useState(null),{data:s,setData:l,post:B,processing:T,errors:i}=N({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",logo:null,website:(t==null?void 0:t.website)||"",address:(t==null?void 0:t.address)||"",phone:(t==null?void 0:t.phone)||"",email:(t==null?void 0:t.email)||"",industry:(t==null?void 0:t.industry)||"",is_active:(t==null?void 0:t.is_active)??!0}),L=r=>{if(r.preventDefault(),!s.name.trim()){h("Company name is required."),g("error"),x(!0),window.scrollTo(0,0);return}const a=new FormData;a.append("name",s.name),a.append("description",s.description||""),a.append("website",s.website||""),a.append("address",s.address||""),a.append("phone",s.phone||""),a.append("email",s.email||""),a.append("industry",s.industry||""),a.append("is_active",s.is_active?"1":"0"),m&&(a.append("logo",m),console.log("Appending logo file:",m.name,m.type,m.size)),B(route("admin.companies.store"),a,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{console.log("Company created successfully")},onError:b=>{console.error("Form validation errors:",b),h("Please check the form for errors."),g("error"),x(!0),window.scrollTo(0,0)}})},F=r=>{if(!r){C(null),y(null),l("logo",null);return}if(console.log("File selected:",r.name,r.type,r.size),!["image/jpeg","image/png","image/gif","image/jpg"].includes(r.type)){h("Please upload a valid image file (JPG, PNG, or GIF)"),g("error"),x(!0);return}if(r.size>2*1024*1024){h("Image size should be less than 2MB"),g("error"),x(!0);return}C(r);const b=new FileReader;b.onload=_=>{y(_.target.result)},b.readAsDataURL(r)};return e.jsxs(V,{children:[e.jsx(q,{title:"Create Company"}),e.jsx(o,{sx:{background:`linear-gradient(135deg, ${p(d.palette.primary.main,.08)} 0%, ${p(d.palette.primary.main,.15)} 100%)`,py:4,borderRadius:"1rem",px:3,mb:4,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",border:"1px solid",borderColor:"divider"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{href:route("admin.companies.index"),children:e.jsx(z,{sx:{mr:2,bgcolor:"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.08)","&:hover":{bgcolor:"background.paper",opacity:.9}},children:e.jsx($,{})})}),e.jsxs(o,{children:[e.jsx(n,{variant:"h5",fontWeight:"600",children:"Create New Company"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Add a new company to the platform"})]})]}),e.jsx(o,{children:e.jsx(X,{icon:e.jsx(S,{fontSize:"small"}),label:"New Company",color:"primary",sx:{borderRadius:"0.75rem",fontWeight:500,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}})})]})}),D&&e.jsx(J,{severity:P,onClose:()=>x(!1),sx:{mb:3,borderRadius:"0.75rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)"},children:E}),e.jsxs(o,{component:"form",onSubmit:L,children:[e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsxs(o,{sx:{flex:"1 1 65%"},children:[e.jsxs(u,{elevation:0,sx:{p:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",mb:3},children:[e.jsxs(n,{variant:"h6",fontWeight:600,sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(K,{fontSize:"small",color:"primary"}),"Company Information"]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(o,{children:e.jsx(f,{label:"Company Name",name:"name",value:s.name,onChange:r=>l("name",r.target.value),required:!0,error:!!i.name,helperText:i.name,fullWidth:!0,placeholder:"Enter company name",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})}),e.jsx(o,{children:e.jsx(k,{label:"Description",name:"description",value:s.description||"",onChange:r=>l("description",r.target.value),error:!!i.description,helperText:i.description,rows:4,fullWidth:!0,placeholder:"Enter company description",sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})}),e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:3},children:[e.jsx(o,{sx:{flex:1},children:e.jsx(f,{label:"Website",name:"website",value:s.website||"",onChange:r=>l("website",r.target.value),error:!!i.website,helperText:i.website,fullWidth:!0,placeholder:"e.g., www.company.com",startAdornment:e.jsx(te,{color:"action",fontSize:"small",sx:{mr:1}}),sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})}),e.jsx(o,{sx:{flex:1},children:e.jsx(Q,{select:!0,label:"Industry",name:"industry",value:s.industry||"",onChange:r=>l("industry",r.target.value),error:!!i.industry,helperText:i.industry||"Select an industry or type a new one",fullWidth:!0,InputProps:{startAdornment:e.jsx(Y,{color:"action",fontSize:"small",sx:{mr:1}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}},children:j&&j.length>0?e.jsxs(e.Fragment,{children:[e.jsx(I,{value:"",children:e.jsx("em",{children:"Select an industry"})}),j.map((r,a)=>e.jsx(I,{value:r,children:r},a))]}):e.jsx(I,{value:"",children:"No industries available"})})})]})]})]}),e.jsxs(u,{elevation:0,sx:{p:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider"},children:[e.jsxs(n,{variant:"h6",fontWeight:600,sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(M,{fontSize:"small",color:"primary"}),"Contact Information"]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:3},children:[e.jsx(o,{sx:{flex:1},children:e.jsx(f,{label:"Email",name:"email",type:"email",value:s.email||"",onChange:r=>l("email",r.target.value),error:!!i.email,helperText:i.email,fullWidth:!0,placeholder:"Enter contact email",startAdornment:e.jsx(Z,{color:"action",fontSize:"small",sx:{mr:1}}),sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})}),e.jsx(o,{sx:{flex:1},children:e.jsx(f,{label:"Phone",name:"phone",value:s.phone||"",onChange:r=>l("phone",r.target.value),error:!!i.phone,helperText:i.phone,fullWidth:!0,placeholder:"Enter contact phone",startAdornment:e.jsx(M,{color:"action",fontSize:"small",sx:{mr:1}}),sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})})]}),e.jsx(o,{children:e.jsx(k,{label:"Address",name:"address",value:s.address||"",onChange:r=>l("address",r.target.value),error:!!i.address,helperText:i.address,rows:3,fullWidth:!0,placeholder:"Enter company address",startAdornment:e.jsx(ee,{color:"action",fontSize:"small",sx:{mr:1}}),sx:{"& .MuiOutlinedInput-root":{borderRadius:"0.75rem"}}})})]})]})]}),e.jsxs(o,{sx:{flex:"1 1 35%",display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(u,{elevation:0,sx:{p:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",height:"fit-content"},children:[e.jsxs(n,{variant:"h6",fontWeight:600,sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(R,{fontSize:"small",color:"primary"}),"Company Logo"]}),e.jsxs(o,{sx:{backgroundColor:p(d.palette.primary.main,.05),borderRadius:"1rem",p:3,textAlign:"center",border:"1px dashed",borderColor:p(d.palette.primary.main,.3),mb:2},children:[v?e.jsxs(o,{sx:{position:"relative",mb:2},children:[e.jsx(W,{src:v,alt:"Company Logo Preview",variant:"rounded",sx:{width:120,height:120,mx:"auto",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:e.jsx(S,{fontSize:"large"})}),e.jsx(z,{sx:{position:"absolute",bottom:-10,right:"50%",transform:"translateX(50%)",bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},onClick:()=>document.getElementById("company-logo-upload").click(),children:e.jsx(R,{fontSize:"small"})})]}):e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,mb:2},children:[e.jsx(W,{sx:{width:80,height:80,bgcolor:p(d.palette.primary.main,.1),color:"primary.main",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)"},children:e.jsx(S,{fontSize:"large"})}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"No logo uploaded"})]}),e.jsx("input",{id:"company-logo-upload",type:"file",accept:"image/*",onChange:r=>F(r.target.files[0]||null),style:{display:"none"}}),e.jsx(w,{variant:"outlined",startIcon:e.jsx(R,{}),onClick:()=>document.getElementById("company-logo-upload").click(),sx:{textTransform:"none",borderRadius:"2rem",px:3},children:v?"Change Logo":"Upload Logo"}),i.logo&&e.jsx(n,{variant:"caption",color:"error",sx:{display:"block",mt:1},children:i.logo}),e.jsx(n,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"Recommended: Square image, max 2MB"})]})]}),e.jsxs(u,{elevation:0,sx:{p:3,borderRadius:"1rem",border:"1px solid",borderColor:"divider",height:"fit-content"},children:[e.jsxs(n,{variant:"h6",fontWeight:600,sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(oe,{fontSize:"small",color:"primary"}),"Company Status"]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:p(d.palette.success.main,s.is_active?.1:.05),borderRadius:"1rem",p:2,border:"1px solid",borderColor:p(d.palette.success.main,s.is_active?.3:.1)},children:[e.jsxs(o,{children:[e.jsx(n,{variant:"subtitle1",fontWeight:500,children:s.is_active?"Active":"Inactive"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:s.is_active?"Company will be visible to users":"Company will be hidden from users"})]}),e.jsx(G,{name:"is_active",checked:s.is_active,onChange:r=>l("is_active",r.target.checked),color:"success",sx:{"& .MuiSvgIcon-root":{fontSize:28}}})]})]})]})]}),e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:4,position:"sticky",bottom:24,zIndex:10},children:e.jsxs(u,{elevation:3,sx:{display:"flex",gap:2,p:1.5,borderRadius:"3rem",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.1)"},children:[e.jsx(w,{type:"button",variant:"outlined",onClick:()=>{reset(),y(null),C(null)},disabled:T,sx:{textTransform:"none",fontWeight:600,borderRadius:"2rem",px:3},children:"Reset Form"}),e.jsx(w,{type:"submit",variant:"contained",startIcon:e.jsx(re,{}),loading:T,sx:{textTransform:"none",fontWeight:600,borderRadius:"2rem",px:3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:"Create Company"})]})})]})]})};export{Ye as default};
