import{F as D,b as p,r as d,u as ee,j as e,g as J,S as re,a as te,J as _}from"./app-DbtvrzCH.js";import{L as ne}from"./Layout-nP23ILEi.js";import{S as ie}from"./SweetAlert-BO_jTu2E.js";import{f as oe,g as ae,u as U,s as se,b as le,d as ce,T as o,m as de,i as pe,v as E,B as i,P as V,a as f}from"./Button-B_2tu0cn.js";import{C as me}from"./Container-CHMV_DAY.js";import{B as ue}from"./Breadcrumbs-DUoWtdBV.js";import{N as xe}from"./NavigateNext-DIvksT2_.js";import{I as he}from"./InfoOutlined-CBgt_X2S.js";import{T as fe}from"./TextField-BKjSZQPY.js";import{P as ye}from"./PictureAsPdf-D2_5a5_Z.js";import{T as N,W as ge}from"./Work-bK6ZZ-Qp.js";import{I as K,D as be}from"./Button-CgCKgwRd.js";import{O as ve}from"./OpenInNew-D8-FU0dq.js";import{E as je}from"./Edit-LT1RMSQh.js";import{C as Ce}from"./Card-DBrS13VS.js";import{C as F}from"./Slide-DsAvN5qg.js";import{S as ke}from"./Star-C0Yn4_6R.js";import{C as we}from"./CardMedia-BfmN9CJc.js";import{C as Se}from"./CardContent-BDcyNa-E.js";import{C as _e}from"./CardActions-l8qA0pjd.js";import{C as Pe}from"./Checkbox-D9hSuJOi.js";import{S as Le}from"./Send-DKoTlC6h.js";import{B as M}from"./BusinessCenter-CGvXca3O.js";import{S as H}from"./Stack-CsubfPvX.js";import{L as Te}from"./LocationOn-BAU5EuQK.js";import{C as Ae}from"./CalendarToday-CkOTnclg.js";import{T as Be}from"./AccessTime-as3EkDL5.js";import{E as De}from"./Error-D1IMUwky.js";import{S as Ie}from"./Snackbar-CPfc4qD6.js";import{A as Re}from"./Alert-D22fyny9.js";import{D as ze,a as Fe,b as $e}from"./DialogContent-CpDcnQgJ.js";import{D as We}from"./DialogTitle-CnVKeRzh.js";import{L as Oe,C as Ee}from"./Link-DQY4lxu3.js";import{G as Ve}from"./GitHub-p5ZSMJb8.js";import{D as Ne}from"./Description-Z4oGvRZp.js";import{F as Ke}from"./Sidebar-sw6YawgY.js";import"./Footer-BBk2Lp_N.js";import"./index-BJHsQb-H.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./Select-DuuFGO1T.js";import"./InputLabel-DUQX8vmT.js";import"./SwitchBase-BHRWgqGq.js";import"./Close-Dpj-0MLQ.js";import"./moment-C5S46NFB.js";import"./id-DNGKkZzB.js";import"./CheckCircle-nvk-SVVX.js";import"./ChevronRight-Bjx9uoMx.js";import"./Person-C1OGobf6.js";import"./Info-j9m1PK-Q.js";import"./People-KxvvNdCJ.js";import"./Event-JhFTkm8A.js";function Me(r){return ae("MuiLink",r)}const He=oe("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Ge=({theme:r,ownerState:n})=>{const s=n.color,a=D(r,`palette.${s}.main`,!1)||D(r,`palette.${s}`,!1)||n.color,x=D(r,`palette.${s}.mainChannel`)||D(r,`palette.${s}Channel`);return"vars"in r&&x?`rgba(${x} / 0.4)`:p(a,.4)},G={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Je=r=>{const{classes:n,component:s,focusVisible:a,underline:x}=r,y={root:["root",`underline${J(x)}`,s==="button"&&"button",a&&"focusVisible"]};return ce(y,Me,n)},Ue=se(o,{name:"MuiLink",slot:"Root",overridesResolver:(r,n)=>{const{ownerState:s}=r;return[n.root,n[`underline${J(s.underline)}`],s.component==="button"&&n.button]}})(de(({theme:r})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:n,ownerState:s})=>n==="always"&&s.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(r.palette).filter(pe()).map(([n])=>({props:{underline:"always",color:n},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette[n].mainChannel} / 0.4)`:p(r.palette[n].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:p(r.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":r.vars?`rgba(${r.vars.palette.text.secondaryChannel} / 0.4)`:p(r.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(r.vars||r).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${He.focusVisible}`]:{outline:"auto"}}}]}))),$=d.forwardRef(function(n,s){const a=ee({props:n,name:"MuiLink"}),x=U(),{className:y,color:m="primary",component:g="a",onBlur:w,onFocus:P,TypographyClasses:b,underline:L="always",variant:T="inherit",sx:v,...l}=a,[A,c]=d.useState(!1),j=h=>{E(h.target)||c(!1),w&&w(h)},C=h=>{E(h.target)&&c(!0),P&&P(h)},k={...a,color:m,component:g,focusVisible:A,underline:L,variant:T},I=Je(k);return e.jsx(Ue,{color:m,className:le(I.root,y),classes:b,component:g,onBlur:j,onFocus:C,ref:s,ownerState:k,variant:T,...l,sx:[...G[m]===void 0?[{color:m}]:[],...Array.isArray(v)?v:[v]],style:{...l.style,...L==="always"&&m!=="inherit"&&!G[m]&&{"--Link-underlineColor":Ge({theme:x,ownerState:k})}}})});function Gr({job:r,candidateProfile:n,portfolioItems:s}){const a=U(),[x,y]=d.useState(!1),[m,g]=d.useState({open:!1,message:"",severity:"info"}),[w,P]=d.useState(!1),[b,L]=d.useState([]),[T,v]=d.useState(!1),[l,A]=d.useState(null),[c,j]=d.useState({show:!1,title:"",text:"",icon:"",confirmButtonText:"",showCancelButton:!1,cancelButtonText:"",onConfirm:null});d.useEffect(()=>{if(w){const t=setTimeout(()=>{window.location.href=route("candidate.applications.index")},1500);return()=>clearTimeout(t)}},[w]),d.useEffect(()=>{console.log("Job data:",r),console.log("Candidate profile:",n),console.log("Portfolio items:",s)},[r,n,s]);const{data:C,setData:k,post:I,processing:h,errors:B}=re({job_id:(r==null?void 0:r.id)||"",cover_letter:"",portfolio_items:[]}),q=t=>{const{name:u,value:S}=t.target;k(u,S)},W=t=>{L(u=>u.includes(t)?u.filter(S=>S!==t):[...u,t]),k("portfolio_items",u=>u.includes(t)?u.filter(S=>S!==t):[...u,t])},Q=t=>{A(t),v(!0)},R=()=>{v(!1),A(null)},X=()=>r!=null&&r.submission_deadline?new Date(r.submission_deadline)<new Date:!1,Y=t=>{if(t.preventDefault(),!C.cover_letter||C.cover_letter.trim().length<10){g({open:!0,message:"Cover letter harus diisi minimal 10 karakter",severity:"error"});return}j({show:!0,title:"Kirim Lamaran",text:`Apakah Anda yakin ingin mengirim lamaran untuk posisi ${r.title} di ${r.company.name}? Pastikan semua informasi telah lengkap dan akurat.`,icon:"question",confirmButtonText:"Konfirmasi & Kirim",showCancelButton:!0,cancelButtonText:"Periksa Kembali",onConfirm:Z})},Z=()=>{y(!0),console.log("Submitting application data:",C),I(route("candidate.jobs.submit-application",r.id),{onSuccess:()=>{j({show:!0,title:"Berhasil!",text:"Lamaran Anda telah berhasil dikirim. Anda akan dialihkan ke halaman lamaran Anda.",icon:"success",confirmButtonText:"OK",onConfirm:()=>{P(!0)}})},onError:t=>{console.error("Application submission errors:",t),g({open:!0,message:"Terjadi kesalahan saat mengirim lamaran. Silakan coba lagi.",severity:"error"}),y(!1)}})},O=()=>{g(t=>({...t,open:!1}))},z=t=>{switch(t){case"project":return e.jsx(Ke,{});case"open_source":return e.jsx(Ee,{});case"work":return e.jsx(ge,{});default:return e.jsx(Ne,{})}};return e.jsxs(ne,{children:[e.jsx(te,{title:`Apply - ${r==null?void 0:r.title}`}),e.jsxs(me,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(ue,{separator:e.jsx(xe,{fontSize:"small"}),"aria-label":"breadcrumb",sx:{mb:3},children:[e.jsx($,{underline:"hover",color:"inherit",component:_,href:route("candidate.dashboard"),children:"Dashboard"}),e.jsx($,{underline:"hover",color:"inherit",component:_,href:route("candidate.jobs.index"),children:"Lowongan"}),e.jsx($,{underline:"hover",color:"inherit",component:_,href:route("candidate.jobs.show",r.id),children:r.title}),e.jsx(o,{color:"text.primary",children:"Lamar"})]}),e.jsxs(i,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3},children:[e.jsx(i,{sx:{flex:{xs:"1 1 100%",md:"1 1 calc(66.666% - 12px)"}},children:e.jsxs(V,{elevation:0,sx:{p:3,border:"1px solid",borderColor:"divider",borderRadius:2,mb:3},children:[e.jsxs(o,{variant:"h5",gutterBottom:!0,children:["Lamar Posisi ",r.title]}),e.jsxs(i,{display:"flex",alignItems:"center",sx:{mb:3,p:2,backgroundColor:p(a.palette.info.main,.1),borderRadius:1,border:`1px solid ${p(a.palette.info.main,.3)}`},children:[e.jsx(he,{color:"info",sx:{mr:1}}),e.jsx(o,{variant:"body2",children:"Periksa kembali dokumen dan informasi yang Anda berikan sebelum mengirim lamaran."})]}),e.jsxs(i,{component:"form",onSubmit:Y,sx:{mt:3},children:[e.jsx(fe,{name:"cover_letter",label:"Cover Letter",multiline:!0,rows:8,value:C.cover_letter,onChange:q,fullWidth:!0,variant:"outlined",required:!0,placeholder:"Tuliskan mengapa Anda tertarik dengan posisi ini dan mengapa Anda adalah kandidat yang tepat...",error:!!B.cover_letter,helperText:B.cover_letter||"Jelaskan mengapa Anda tertarik dengan posisi ini dan kualifikasi yang Anda miliki.",InputProps:{sx:{fontFamily:"inherit"}},sx:{mb:3}}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Resume"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",p:2,backgroundColor:a.palette.background.default,borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsx(ye,{color:"error",sx:{fontSize:28,mr:2}}),e.jsxs(i,{sx:{flexGrow:1},children:[e.jsx(o,{variant:"subtitle1",children:n.resume_filename||"Resume.pdf"}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:["Last updated: ",n.last_updated]})]}),e.jsx(N,{title:"Lihat Resume",children:e.jsx(K,{color:"primary",href:n.resume,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ve,{})})}),e.jsx(N,{title:"Edit Resume",children:e.jsx(K,{color:"primary",component:_,href:route("candidate.profile.edit"),children:e.jsx(je,{})})})]})]}),s&&s.length>0&&e.jsxs(i,{sx:{mb:4},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Portfolio"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Pilih proyek-proyek yang relevan dengan posisi ini untuk ditampilkan pada lamaran Anda."}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:s.map(t=>e.jsx(i,{sx:{width:{xs:"100%",sm:"calc(50% - 8px)",md:"calc(33.333% - 11px)"}},children:e.jsxs(Ce,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.2s",borderColor:b.includes(t.id)?a.palette.primary.main:"divider",backgroundColor:b.includes(t.id)?p(a.palette.primary.main,.05):"transparent"},children:[t.is_featured&&e.jsx(F,{icon:e.jsx(ke,{fontSize:"small"}),label:"Featured",size:"small",color:"primary",sx:{position:"absolute",top:8,right:8,zIndex:1}}),t.thumbnail?e.jsx(we,{component:"img",height:"140",image:t.thumbnail,alt:t.title}):e.jsx(i,{sx:{height:140,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:p(a.palette.primary.main,.1)},children:z(t.type)}),e.jsxs(Se,{sx:{flexGrow:1,pb:1},children:[e.jsx(o,{variant:"subtitle1",component:"div",noWrap:!0,children:t.title}),e.jsx(F,{label:t.type_label,size:"small",color:"default",variant:"outlined",icon:z(t.type),sx:{mb:1}}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description||"No description provided"})]}),e.jsxs(_e,{sx:{justifyContent:"space-between",pt:0},children:[e.jsx(f,{size:"small",onClick:()=>Q(t),children:"Preview"}),e.jsx(Pe,{checked:b.includes(t.id),onChange:()=>W(t.id),inputProps:{"aria-label":`Select ${t.title}`},color:"primary"})]})]})},t.id))}),B.portfolio_items&&e.jsx(o,{color:"error",variant:"caption",sx:{mt:1,display:"block"},children:B.portfolio_items})]}),e.jsxs(i,{sx:{mt:3,display:"flex",justifyContent:"space-between"},children:[e.jsx(f,{variant:"outlined",component:_,href:route("candidate.jobs.show",r.id),children:"Kembali"}),e.jsx(f,{type:"submit",variant:"contained",color:"primary",disabled:h||x||X(),startIcon:e.jsx(Le,{}),children:"Kirim Lamaran"})]})]})]})}),e.jsx(i,{sx:{flex:{xs:"1 1 100%",md:"1 1 calc(33.333% - 12px)"}},children:e.jsxs(V,{elevation:0,sx:{p:3,border:"1px solid",borderColor:"divider",borderRadius:2,position:{md:"sticky"},top:{md:24}},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Ringkasan Lowongan"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.company.logo?e.jsx(i,{component:"img",src:r.company.logo,alt:r.company.name,sx:{width:48,height:48,objectFit:"contain",mr:2,border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5}}):e.jsx(M,{sx:{fontSize:48,mr:2,color:"primary.main"}}),e.jsxs(i,{children:[e.jsx(o,{variant:"subtitle1",fontWeight:600,children:r.title}),e.jsx(o,{variant:"body2",color:"text.secondary",children:r.company.name})]})]}),e.jsx(be,{sx:{my:2}}),e.jsxs(H,{spacing:2,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Te,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsx(o,{variant:"body2",children:r.location||"Lokasi tidak ditentukan"})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(M,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsx(o,{variant:"body2",children:r.job_type||"Tipe pekerjaan tidak ditentukan"})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ae,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsxs(o,{variant:"body2",children:["Deadline: ",r.submission_deadline]})]}),e.jsx(i,{sx:{display:"flex",alignItems:"center",p:1.5,backgroundColor:r.days_remaining>5?p(a.palette.success.main,.1):r.days_remaining>2?p(a.palette.warning.main,.1):p(a.palette.error.main,.1),borderRadius:1},children:r.days_remaining>0?e.jsxs(e.Fragment,{children:[e.jsx(Be,{sx:{mr:1,fontSize:20,color:r.days_remaining>5?a.palette.success.main:r.days_remaining>2?a.palette.warning.main:a.palette.error.main}}),e.jsxs(o,{variant:"body2",children:[r.days_remaining," hari tersisa untuk melamar"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{sx:{color:a.palette.error.main,mr:1,fontSize:20}}),e.jsx(o,{variant:"body2",color:"error",children:"Batas waktu pendaftaran telah berakhir"})]})})]})]})})]})]}),e.jsx(Ie,{open:m.open,autoHideDuration:6e3,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Re,{onClose:O,severity:m.severity,variant:"filled",sx:{width:"100%"},children:m.message})}),e.jsx(ie,{show:c.show,title:c.title,text:c.text,icon:c.icon,showCancelButton:c.showCancelButton,confirmButtonText:c.confirmButtonText,cancelButtonText:c.cancelButtonText,onConfirm:()=>{c.onConfirm&&c.onConfirm(),j(t=>({...t,show:!1}))},onCancel:()=>j(t=>({...t,show:!1}))}),e.jsx(ze,{open:T,onClose:R,maxWidth:"md",fullWidth:!0,children:l&&e.jsxs(e.Fragment,{children:[e.jsx(We,{children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o,{variant:"h6",children:l.title}),e.jsx(F,{label:l.type_label,size:"small",color:"primary",icon:z(l.type)})]})}),e.jsxs(Fe,{dividers:!0,children:[l.thumbnail&&e.jsx(i,{sx:{mb:2,textAlign:"center"},children:e.jsx("img",{src:l.thumbnail,alt:l.title,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px"}})}),e.jsx(o,{variant:"body1",paragraph:!0,children:l.description||"No description provided"}),e.jsxs(H,{direction:"row",spacing:2,sx:{mt:2},children:[l.project_url&&e.jsx(f,{variant:"outlined",startIcon:e.jsx(Oe,{}),href:l.project_url,target:"_blank",rel:"noopener noreferrer",size:"small",children:"View Project"}),l.repository_url&&e.jsx(f,{variant:"outlined",startIcon:e.jsx(Ve,{}),href:l.repository_url,target:"_blank",rel:"noopener noreferrer",size:"small",children:"View Repository"})]})]}),e.jsxs($e,{children:[e.jsx(f,{onClick:R,children:"Close"}),e.jsx(f,{variant:"contained",onClick:()=>{W(l.id),R()},children:b.includes(l.id)?"Remove from Application":"Add to Application"})]})]})})]})}export{Gr as default};
